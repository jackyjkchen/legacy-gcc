diff --git a/config/gxx-include-dir.m4 b/config/gxx-include-dir.m4
index 0e6e4ffc..8a9857c6 100644
--- a/config/gxx-include-dir.m4
+++ b/config/gxx-include-dir.m4
@@ -8,15 +8,26 @@ dnl If you change the default here, you'll need to change the gcc and
 dnl libstdc++-v3 subdirectories too.
 AC_DEFUN([TL_AC_GXX_INCLUDE_DIR],
 [
+case "$host" in
+  *-msdosdjgpp*)
+    libstdcxx_incdir_base=cxx
+    gcc_version_dir='$(shell echo $(gcc_version) | sed -e "s:\.::2g")'
+    ;;
+  *)
+    libstdcxx_incdir_base=c++
+    gcc_version_dir=$(gcc_version)
+    ;;
+esac
+
 case "${with_gxx_include_dir}" in
   yes)
     AC_MSG_ERROR([--with-gxx-include-dir=[[dir]] requires a directory])
     ;;
   no | "")
     case "${enable_version_specific_runtime_libs}" in
-      yes) gxx_include_dir='$(libsubdir)/include/c++' ;;
+      yes) gxx_include_dir='$(libsubdir)/include/'${libstdcxx_incdir_base} ;;
       *)
-	libstdcxx_incdir='c++/$(gcc_version)'
+	libstdcxx_incdir=${libstdcxx_incdir_base}/${gcc_version_dir}
 	gxx_include_dir='$(prefix)/include/$(libstdcxx_incdir)' ;;
     esac ;;
   *) gxx_include_dir=${with_gxx_include_dir} ;;
diff --git a/configure b/configure
index 6bc55161..1c2792e2 100755
--- a/configure
+++ b/configure
@@ -6199,15 +6199,34 @@ trap 'rm -f $CONFIG_STATUS conftest*; exit 1' 1 2 15
 # Transform confdefs.h into DEFS.
 # Protect against shell expansion while executing Makefile rules.
 # Protect against Makefile macro expansion.
-cat > conftest.defs <<\EOF
-s%#define \([A-Za-z_][A-Za-z0-9_]*\) *\(.*\)%-D\1=\2%g
-s%[ 	`~#$^&*(){}\\|;'"<>?]%\\&%g
-s%\[%\\&%g
-s%\]%\\&%g
-s%\$%$$%g
-EOF
-DEFS=`sed -f conftest.defs confdefs.h | tr '\012' ' '`
-rm -f conftest.defs
+#
+# If the first sed substitution is executed (which looks for macros that
+# take arguments), then we branch to the quote section.  Otherwise,
+# look for a macro that doesn't take arguments.
+cat >confdef2opt.sed <<\_ACEOF
+t clear
+: clear
+s,^[ 	]*#[ 	]*define[ 	][ 	]*\([^ 	(][^ 	(]*([^)]*)\)[ 	]*\(.*\),-D\1=\2,g
+t quote
+s,^[ 	]*#[ 	]*define[ 	][ 	]*\([^ 	][^ 	]*\)[ 	]*\(.*\),-D\1=\2,g
+t quote
+d
+: quote
+s,[ 	`~#$^&*(){}\\|;'"<>?],\\&,g
+s,\[,\\&,g
+s,\],\\&,g
+s,\$,$$,g
+p
+_ACEOF
+# We use echo to avoid assuming a particular line-breaking character.
+# The extra dot is to prevent the shell from consuming trailing
+# line-breaks from the sub-command output.  A line-break within
+# single-quotes doesn't work because, if this script is created in a
+# platform that uses two characters for line-breaks (e.g., DOS), tr
+# would break.
+ac_LF_and_DOT=`echo; echo .`
+DEFS=`sed -n -f confdef2opt.sed confdefs.h | tr "$ac_LF_and_DOT" ' .'`
+rm -f confdef2opt.sed
 
 
 # Without the "./", some shells look in PATH for config.status.
diff --git a/fixincludes/Makefile.in b/fixincludes/Makefile.in
index 822e865c..d5064a83 100644
--- a/fixincludes/Makefile.in
+++ b/fixincludes/Makefile.in
@@ -42,6 +42,8 @@ VPATH = $(srcdir)
 libdir = @libdir@
 # Directory in which GCC puts its executables.
 libexecdir = @libexecdir@
+# GCC version for subdirectory names (editted if host requires it)
+gcc_version_dir = @gcc_version_dir@
 
 # End of variables for you to override.
 
@@ -53,9 +55,9 @@ target_noncanonical:=@target_noncanonical@
 gcc_version := $(shell cat $(srcdir)/../gcc/BASE-VER)
 
 # Directory in which the compiler finds libraries etc.
-libsubdir = $(libdir)/gcc/$(target_noncanonical)/$(gcc_version)
+libsubdir = $(libdir)/gcc/$(target_noncanonical)/$(gcc_version_dir)
 # Directory in which the compiler finds executables
-libexecsubdir = $(libexecdir)/gcc/$(target_noncanonical)/$(gcc_version)
+libexecsubdir = $(libexecdir)/gcc/$(target_noncanonical)/$(gcc_version_dir)
 # Where our executable files go
 itoolsdir = $(libexecsubdir)/install-tools
 # Where our data files go
diff --git a/fixincludes/configure b/fixincludes/configure
index 4d445194..7a5cdd8b 100755
--- a/fixincludes/configure
+++ b/fixincludes/configure
@@ -309,7 +309,7 @@ ac_includes_default="\
 # include <unistd.h>
 #endif"
 
-ac_subst_vars='SHELL PATH_SEPARATOR PACKAGE_NAME PACKAGE_TARNAME PACKAGE_VERSION PACKAGE_STRING PACKAGE_BUGREPORT exec_prefix prefix program_transform_name bindir sbindir libexecdir datadir sysconfdir sharedstatedir localstatedir libdir includedir oldincludedir infodir mandir build_alias host_alias target_alias DEFS ECHO_C ECHO_N ECHO_T LIBS build build_cpu build_vendor build_os host host_cpu host_vendor host_os target target_cpu target_vendor target_os CC CFLAGS LDFLAGS CPPFLAGS ac_ct_CC EXEEXT OBJEXT WARN_CFLAGS WARN_PEDANTIC WERROR target_noncanonical TARGET CPP EGREP MAINT LIBOBJS LTLIBOBJS'
+ac_subst_vars='SHELL PATH_SEPARATOR PACKAGE_NAME PACKAGE_TARNAME PACKAGE_VERSION PACKAGE_STRING PACKAGE_BUGREPORT exec_prefix prefix program_transform_name bindir sbindir libexecdir datadir sysconfdir sharedstatedir localstatedir libdir includedir oldincludedir infodir mandir build_alias host_alias target_alias DEFS ECHO_C ECHO_N ECHO_T LIBS build build_cpu build_vendor build_os host host_cpu host_vendor host_os target target_cpu target_vendor target_os CC CFLAGS LDFLAGS CPPFLAGS ac_ct_CC EXEEXT OBJEXT WARN_CFLAGS WARN_PEDANTIC WERROR target_noncanonical TARGET CPP EGREP MAINT gcc_version_dir LIBOBJS LTLIBOBJS'
 ac_subst_files=''
 
 # Initialize some variables set by options.
@@ -5159,6 +5159,19 @@ else
 fi
 
 
+# For DJGPP there should not be more than 1 dot. Therefore edit
+# version in case of DJGPP
+case $host in
+	i?86-*-msdosdjgpp*)
+		gcc_version_dir='$(shell echo $(gcc_version) | sed -e "s:\.::2g")'
+		;;
+
+	* )
+		gcc_version_dir='$(gcc_version)'
+		;;
+esac
+
+
           ac_config_headers="$ac_config_headers config.h"
 
                     ac_config_files="$ac_config_files Makefile mkheaders.almost:mkheaders.in"
@@ -5801,6 +5814,7 @@ s,@TARGET@,$TARGET,;t t
 s,@CPP@,$CPP,;t t
 s,@EGREP@,$EGREP,;t t
 s,@MAINT@,$MAINT,;t t
+s,@gcc_version_dir@,$gcc_version_dir,;t t
 s,@LIBOBJS@,$LIBOBJS,;t t
 s,@LTLIBOBJS@,$LTLIBOBJS,;t t
 CEOF
diff --git a/fixincludes/configure.ac b/fixincludes/configure.ac
index 04305fe6..f0765294 100644
--- a/fixincludes/configure.ac
+++ b/fixincludes/configure.ac
@@ -106,6 +106,19 @@ else
 fi	
 AC_SUBST(MAINT)
 
+# For DJGPP there should not be more than 1 dot. Therefore edit
+# version in case of DJGPP
+[case $host in
+	i?86-*-msdosdjgpp*)
+		gcc_version_dir='$(shell echo $(gcc_version) | sed -e "s:\.::2g")'
+		;;
+
+	* )
+		gcc_version_dir='$(gcc_version)'
+		;;
+esac]
+AC_SUBST(gcc_version_dir)
+
 AC_CONFIG_HEADERS(config.h, [echo timestamp > stamp-h])
 AC_CONFIG_FILES(Makefile mkheaders.almost:mkheaders.in)
 AC_OUTPUT
diff --git a/gcc/Makefile.in b/gcc/Makefile.in
index 96a55ad6..4e543666 100644
--- a/gcc/Makefile.in
+++ b/gcc/Makefile.in
@@ -104,7 +104,11 @@ VPATH = @srcdir@
 # pattern rule for everything.
 # This vpath could be extended within the Make-lang fragments.
 
+ifneq ($(DJGPP),)
+vpath %.texi $(docdir);$(docdir)/include
+else
 vpath %.texi $(docdir):$(docdir)/include
+endif
 
 # ----
 # Default values for variables overridden in Makefile fragments.
@@ -492,6 +496,7 @@ man7ext = .7
 objext = .o
 exeext = @host_exeext@
 build_exeext = @build_exeext@
+libstdcxx_incdir_base=@libstdcxx_incdir_base@
 
 # Directory in which to put man pages.
 mandir = @mandir@
@@ -3175,8 +3180,8 @@ s-macro_list : $(GCC_PASSES)
 # Abort if no system headers available, unless building a crosscompiler.
 # FIXME: abort unless building --without-headers would be more accurate and less ugly
 stmp-fixinc: gsyslimits.h macro_list \
-  $(build_objdir)/fixincludes/fixincl \
   $(build_objdir)/fixincludes/fixinc.sh
+	$(MAKE) -C $(build_objdir)/fixincludes all
 	@if ! $(inhibit_libc) && test ! -d ${SYSTEM_HEADER_DIR}; then \
 	  echo The directory that should contain system headers does not exist: >&2 ; \
 	  echo "  ${SYSTEM_HEADER_DIR}" >&2 ; \
diff --git a/gcc/ada/adaint.c b/gcc/ada/adaint.c
index d73665be..25732ba1 100644
--- a/gcc/ada/adaint.c
+++ b/gcc/ada/adaint.c
@@ -96,6 +96,9 @@
 #endif
 
 #if defined (__EMX__) || defined (MSDOS) || defined (_WIN32)
+
+#include <ctype.h>
+
 #elif defined (VMS)
 
 /* Header files and definitions for __gnat_set_file_time_name.  */
@@ -372,7 +375,9 @@ __gnat_readlink (char *path ATTRIBUTE_UNUSED,
 		 char *buf ATTRIBUTE_UNUSED,
 		 size_t bufsiz ATTRIBUTE_UNUSED)
 {
-#if defined (MSDOS) || defined (_WIN32) || defined (__EMX__)
+#if defined (__DJGPP__) && (__DJGPP__>2 || (__DJGPP__==2 && __DJGPP_MINOR__>=4))
+  return readlink (path, buf, bufsiz);
+#elif defined (MSDOS) || defined (_WIN32) || defined (__EMX__)
   return -1;
 #elif defined (__INTERIX) || defined (VMS)
   return -1;
@@ -391,7 +396,10 @@ int
 __gnat_symlink (char *oldpath ATTRIBUTE_UNUSED,
 		char *newpath ATTRIBUTE_UNUSED)
 {
-#if defined (MSDOS) || defined (_WIN32) || defined (__EMX__)
+#if defined (__DJGPP__) && (__DJGPP__>2 || (__DJGPP__==2 && __DJGPP_MINOR__>=4))
+/* Newer DJGPP versions supports symlinks */
+  return symlink (oldpath, newpath);
+#elif defined (MSDOS) || defined (_WIN32) || defined (__EMX__)
   return -1;
 #elif defined (__INTERIX) || defined (VMS)
   return -1;
@@ -484,7 +492,11 @@ int
 __gnat_get_maximum_file_name_length (void)
 {
 #if defined (MSDOS)
+#ifdef __DJGPP__
+  return (_use_lfn(".")) ? -1 : 8;
+#else
   return 8;
+#endif
 #elif defined (VMS)
   if (getenv ("GNAT$EXTENDED_FILE_SPECIFICATIONS"))
     return -1;
@@ -979,6 +991,7 @@ __gnat_file_time_fd (int fd)
   unsigned file_hour  = fs.ft_hour;
   unsigned file_min   = fs.ft_min;
   unsigned file_tsec  = fs.ft_tsec;
+  return ret;
 #endif
 
   /* Calculate the seconds since epoch from the time components. First count
@@ -1042,7 +1055,7 @@ __gnat_file_time_fd (int fd)
 void
 __gnat_set_file_time_name (char *name, time_t time_stamp)
 {
-#if defined (__EMX__) || defined (MSDOS) || defined (__vxworks)
+#if defined (__EMX__) || defined (__vxworks)
 
 /* Code to implement __gnat_set_file_time_name for these systems.  */
 
@@ -1274,9 +1287,10 @@ typedef struct _ile3
 void
 __gnat_set_env_value (char *name, char *value)
 {
-#ifdef MSDOS
+/* #ifdef MSDOS  */
 
-#elif defined (VMS)
+/* #elif defined (VMS)  */
+#if defined (VMS)
   struct descriptor_s name_desc;
   /* Put in JOB table for now, so that the project stuff at least works.  */
   struct descriptor_s table_desc = {7, 0, "LNM$JOB"};
@@ -1561,6 +1575,9 @@ __gnat_is_symbolic_link (char *name ATTRIBUTE_UNUSED)
 #if defined (__vxworks)
   return 0;
 
+#elif defined (__DJGPP__) && (__DJGPP__==2) && (__DJGPP_MINOR__<4)
+  return 0;
+
 #elif defined (_AIX) || defined (__APPLE__) || defined (__unix__)
   int ret;
   struct stat statbuf;
diff --git a/gcc/ada/ctrl_c.c b/gcc/ada/ctrl_c.c
index 5a5d5973..533c88de 100644
--- a/gcc/ada/ctrl_c.c
+++ b/gcc/ada/ctrl_c.c
@@ -39,6 +39,10 @@
 #include "system.h"
 #endif
 
+#ifndef SA_RESTART
+#define SA_RESTART 0
+#endif
+
 /* Services to intercept Ctrl-C */
 
 /* __gnat_install_int_handler will install the specified handler.
diff --git a/gcc/ada/gnatbl.c b/gcc/ada/gnatbl.c
index 0c567fde..bc8a90dd 100644
--- a/gcc/ada/gnatbl.c
+++ b/gcc/ada/gnatbl.c
@@ -212,7 +212,7 @@ main (int argc, char **argv)
   int  spawn_index = 0;
 
 #if defined (__EMX__) || defined(MSDOS)
-  char *tmppathval = malloc (strlen (pathval) + 3);
+  char *tmppathval = xmalloc (strlen (pathval) + 3);
   strcpy (tmppathval, ".;");
   pathval = strcat (tmppathval, pathval);
 #endif
@@ -334,7 +334,7 @@ main (int argc, char **argv)
 	    char *ptr = strstr (argv[i], ".exe");
 
 	    arg_len = strlen (argv[i]);
-	    coff2exe_args[1] = malloc (arg_len + 1);
+	    coff2exe_args[1] = xmalloc (arg_len + 1);
 	    strcpy (coff2exe_args[1], argv[i]);
 	    if (ptr != NULL && strlen (ptr) == 4)
 	      coff2exe_args[1][arg_len-4] = 0;
@@ -377,7 +377,7 @@ main (int argc, char **argv)
 
   if (!g_present)
     {
-      del_command = malloc (strlen (coff2exe_args[1]) + 5);
+      del_command = xmalloc (strlen (coff2exe_args[1]) + 5);
       sprintf (del_command, "del %s", coff2exe_args[1]);
       retcode = system (del_command);
     }
diff --git a/gcc/ada/gsocket.h b/gcc/ada/gsocket.h
index a3807889..4f071727 100644
--- a/gcc/ada/gsocket.h
+++ b/gcc/ada/gsocket.h
@@ -139,7 +139,7 @@
 #include <sys/time.h>
 #endif
 
-#if !(defined (VMS) || defined (__MINGW32__) || defined(__rtems__))
+#if !(defined (VMS) || defined (__MINGW32__) || defined(__rtems__) || defined(__DJGPP__))
 #include <sys/socket.h>
 #include <netinet/in.h>
 #include <netinet/tcp.h>
diff --git a/gcc/ada/init.c b/gcc/ada/init.c
index 7baa11bd..40cf602f 100644
--- a/gcc/ada/init.c
+++ b/gcc/ada/init.c
@@ -1831,6 +1831,37 @@ __gnat_install_handler(void)
   __gnat_handler_installed = 1;
 }
 
+#elif defined (__DJGPP__)
+
+/***************************************/
+/* FIXME: this is only a draft version */
+/***************************************/
+
+struct timestruc_t
+{
+   time_t  tv_sec;
+   long    tv_nsec;
+};
+
+
+int
+nanosleep (struct timestruc_t *Rqtp, struct timestruc_t *Rmtp);
+
+int
+nanosleep (struct timestruc_t *Rqtp, struct timestruc_t *Rmtp)
+{
+    usleep (1000000*Rqtp->tv_sec+Rqtp->tv_nsec/1000);
+    if (Rmtp) { Rmtp->tv_sec = Rmtp->tv_nsec=0; }
+    return 0;
+}
+
+
+void
+__gnat_install_handler ()
+{
+  __gnat_handler_installed = 1;
+}
+
 #else
 
 /* For all other versions of GNAT, the handler does nothing */
diff --git a/gcc/ada/socket.c b/gcc/ada/socket.c
index bb79ac30..fdf5d0cd 100644
--- a/gcc/ada/socket.c
+++ b/gcc/ada/socket.c
@@ -187,7 +187,7 @@ __gnat_get_h_errno (void) {
     default:
       return -1;
   }
-#elif defined(VMS)
+#elif defined(VMS) || defined(__DJGPP__)
   return errno;
 #elif defined(__rtems__)
   /* At this stage in the tool build, no networking .h files are available.
diff --git a/gcc/ada/sysdep.c b/gcc/ada/sysdep.c
index 03818b19..115292d6 100644
--- a/gcc/ada/sysdep.c
+++ b/gcc/ada/sysdep.c
@@ -159,6 +159,11 @@ static const char *mode_write_binary_plus = "w+b";
 static const char *mode_append_binary_plus = "a+b";
 const char __gnat_text_translation_required = 1;
 
+#ifdef __DJGPP__
+#include <io.h>
+#define _setmode setmode
+#endif
+
 void
 __gnat_set_binary_mode (int handle)
 {
@@ -701,6 +706,26 @@ __gnat_localtime_r (const time_t *timer, struct tm *tp)
 
 /* __gnat_localtime_r is not needed on NT and VMS */
 
+#else
+#if defined (__DJGPP__)
+
+/* FIXME: this is draft version only. Fix me if that is not correct  */
+/*        or not complete (AP)                                       */
+
+extern struct tm *__gnat_localtime_r PARAMS ((const time_t *, struct tm *));
+
+struct tm *
+__gnat_localtime_r (timer, tp)
+     const time_t *timer;
+     struct tm *tp;
+{
+  struct tm *tmp;
+
+  tmp = localtime (timer);
+  memcpy (tp, tmp, sizeof (struct tm));
+  return tp;
+}
+
 #else
 
 /* All other targets provide a standard localtime_r */
@@ -715,3 +740,4 @@ __gnat_localtime_r (const time_t *timer, struct tm *tp)
 #endif
 #endif
 #endif
+#endif
diff --git a/gcc/c-common.c b/gcc/c-common.c
index 9b935f9b..e883294d 100644
--- a/gcc/c-common.c
+++ b/gcc/c-common.c
@@ -5289,8 +5289,9 @@ handle_nonnull_attribute (tree *node, tree ARG_UNUSED (name),
 
       if (!get_nonnull_operand (TREE_VALUE (args), &arg_num))
 	{
-	  error ("nonnull argument has invalid operand number (argument %lu)",
-		 (unsigned long) attr_arg_num);
+	  if (!(flags & (int) ATTR_FLAG_BUILT_IN))
+	     error ("nonnull argument has invalid operand number (argument %lu)",
+		    (unsigned long) attr_arg_num);
 	  *no_add_attrs = true;
 	  return NULL_TREE;
 	}
@@ -5308,16 +5309,18 @@ handle_nonnull_attribute (tree *node, tree ARG_UNUSED (name),
 	  if (!argument
 	      || TREE_CODE (TREE_VALUE (argument)) == VOID_TYPE)
 	    {
-	      error ("nonnull argument with out-of-range operand number (argument %lu, operand %lu)",
-		     (unsigned long) attr_arg_num, (unsigned long) arg_num);
+	      if (!(flags & (int) ATTR_FLAG_BUILT_IN))
+		 error ("nonnull argument with out-of-range operand number (argument %lu, operand %lu)",
+		       (unsigned long) attr_arg_num, (unsigned long) arg_num);
 	      *no_add_attrs = true;
 	      return NULL_TREE;
 	    }
 
 	  if (TREE_CODE (TREE_VALUE (argument)) != POINTER_TYPE)
 	    {
-	      error ("nonnull argument references non-pointer operand (argument %lu, operand %lu)",
-		   (unsigned long) attr_arg_num, (unsigned long) arg_num);
+	      if (!(flags & (int) ATTR_FLAG_BUILT_IN))
+		 error ("nonnull argument references non-pointer operand (argument %lu, operand %lu)",
+		        (unsigned long) attr_arg_num, (unsigned long) arg_num);
 	      *no_add_attrs = true;
 	      return NULL_TREE;
 	    }
diff --git a/gcc/c-decl.c b/gcc/c-decl.c
index 4ac1031a..55f1c52a 100644
--- a/gcc/c-decl.c
+++ b/gcc/c-decl.c
@@ -1213,8 +1213,10 @@ diagnose_mismatched_decls (tree newdecl, tree olddecl,
 	      /* If types don't match for a built-in, throw away the
 		 built-in.  No point in calling locate_old_decl here, it
 		 won't print anything.  */
+#ifndef __DJGPP__
 	      warning (0, "conflicting types for built-in function %q+D",
 		       newdecl);
+#endif
 	      return false;
 	    }
 	}
diff --git a/gcc/config.host b/gcc/config.host
index 354551da..15bd2184 100644
--- a/gcc/config.host
+++ b/gcc/config.host
@@ -149,10 +149,14 @@ case ${host} in
   i[34567]86-pc-msdosdjgpp*)
     host_xm_file=i386/xm-djgpp.h
     host_exeext=.exe
+    host_xmake_file=i386/x-djgpp
     # Shorten $target_noncanonical for 8.3 filename conventions.
+    # Also update C++ include directory name
+    # due to the same restrictions
     case ${target} in
       *pc-msdosdjgpp*)
         target_noncanonical=djgpp
+	libstdcxx_incdir_base=cxx
         ;;
     esac
     ;;
diff --git a/gcc/config/i386/djgpp.h b/gcc/config/i386/djgpp.h
index 4e9f471b..b18e116d 100644
--- a/gcc/config/i386/djgpp.h
+++ b/gcc/config/i386/djgpp.h
@@ -22,6 +22,11 @@ Boston, MA 02110-1301, USA.  */
 /* Support generation of DWARF2 debugging info.  */
 #define DWARF2_DEBUGGING_INFO 1
 
+/* Use DWARF2 debugging info by default: comment out following  */
+/* 2 lines to default to COFF debugging info  */
+#undef PREFERRED_DEBUGGING_TYPE
+#define PREFERRED_DEBUGGING_TYPE DWARF2_DEBUG
+
 /* Don't assume anything about the header files.  */
 #define NO_IMPLICIT_EXTERN_C
 
@@ -65,6 +70,8 @@ Boston, MA 02110-1301, USA.  */
 #undef STANDARD_INCLUDE_DIR
 #define STANDARD_INCLUDE_DIR "/dev/env/DJDIR/include/"
 
+#undef PREFIX_INCLUDE_DIR
+
 /* Search for as.exe and ld.exe in DJGPP's binary directory.  */ 
 #undef MD_EXEC_PREFIX
 #define MD_EXEC_PREFIX "/dev/env/DJDIR/bin/"
@@ -73,16 +80,16 @@ Boston, MA 02110-1301, USA.  */
 #undef MD_STARTFILE_PREFIX
 #define MD_STARTFILE_PREFIX "/dev/env/DJDIR/lib/"
 
-/* Correctly handle absolute filename detection in cp/xref.c */
-#define FILE_NAME_ABSOLUTE_P(NAME) \
-        (((NAME)[0] == '/') || ((NAME)[0] == '\\') || \
-        (((NAME)[0] >= 'A') && ((NAME)[0] <= 'z') && ((NAME)[1] == ':')))
-
 #define TARGET_OS_CPP_BUILTINS()		\
   do						\
     {						\
+        if (!flag_iso)                          \
+	   builtin_define_with_int_value ("DJGPP",2);  \
+	builtin_define_with_int_value ("__DJGPP",2);   \
+	builtin_define_with_int_value ("__DJGPP__",2); \
 	builtin_define_std ("MSDOS");		\
 	builtin_define_std ("GO32");		\
+	builtin_define_std ("unix");		\
 	builtin_assert ("system=msdos");	\
     }						\
   while (0)
@@ -90,7 +97,7 @@ Boston, MA 02110-1301, USA.  */
 /* Include <sys/version.h> so __DJGPP__ and __DJGPP_MINOR__ are defined.  */
 #undef CPP_SPEC
 #define CPP_SPEC "-remap %{posix:-D_POSIX_SOURCE} \
-  -imacros %s../include/sys/version.h"
+  %{!nostdinc:-imacros %sdjgpp.ver}"
 
 /* We need to override link_command_spec in gcc.c so support -Tdjgpp.djl.
    This cannot be done in LINK_SPECS as that LINK_SPECS is processed
@@ -100,15 +107,14 @@ Boston, MA 02110-1301, USA.  */
 */ 
 
 #undef LINK_COMMAND_SPEC
-#define LINK_COMMAND_SPEC \
-"%{!fsyntax-only: \
-%{!c:%{!M:%{!MM:%{!E:%{!S:%(linker) %l %X %{o*} %{A} %{d} %{e*} %{m} %{N} %{n} \
-\t%{r} %{s} %{t} %{u*} %{x} %{z} %{Z}\
-\t%{!A:%{!nostdlib:%{!nostartfiles:%S}}}\
-\t%{static:} %{L*} %D %o\
-\t%{!nostdlib:%{!nodefaultlibs:%G %L %G}}\
-\t%{!A:%{!nostdlib:%{!nostartfiles:%E}}}\
-\t-Tdjgpp.djl %{T*}}}}}}}\n\
+#define LINK_COMMAND_SPEC "\
+%{!fsyntax-only:%{!c:%{!M:%{!MM:%{!E:%{!S:\
+    %(linker) %l " LINK_PIE_SPEC "%X %{o*} %{A} %{d} %{e*} %{m} %{N} %{n} %{r}\
+    %{s} %{t} %{u*} %{x} %{z} %{Z} %{!A:%{!nostdlib:%{!nostartfiles:%S}}}\
+    %{static:} %{L*} %(mfwrap) %(link_libgcc) %o %(mflib)\
+    %{fprofile-arcs|fprofile-generate|coverage:-lgcov}\
+    %{!nostdlib:%{!nodefaultlibs:%(link_gcc_c_sequence)}}\
+    %{!A:%{!nostdlib:%{!nostartfiles:%E}}} %{T*} }}}}}}\n\
 %{!c:%{!M:%{!MM:%{!E:%{!S:stubify %{v} %{o*:%*} %{!o*:a.out} }}}}}"
 
 /* Always just link in 'libc.a'.  */
@@ -166,23 +172,20 @@ Boston, MA 02110-1301, USA.  */
 #undef PTRDIFF_TYPE
 #define PTRDIFF_TYPE "int"
 
-/* Used to be defined in xm-djgpp.h, but moved here for cross-compilers.  */
-#define LIBSTDCXX "-lstdcxx"
-
 #define TARGET_VERSION fprintf (stderr, " (80386, MS-DOS DJGPP)"); 
 
-/* Warn that -mbnu210 is now obsolete.  */
-#undef  SUBTARGET_OVERRIDE_OPTIONS
-#define SUBTARGET_OVERRIDE_OPTIONS \
-do \
-  { \
-    if (TARGET_BNU210) \
-      {	\
-        warning (0, "-mbnu210 is ignored (option is obsolete)"); \
-      }	\
-  } \
-while (0)
-
 /* Support for C++ templates.  */
 #undef MAKE_DECL_ONE_ONLY
 #define MAKE_DECL_ONE_ONLY(DECL) (DECL_WEAK (DECL) = 1)
+
+#undef DBX_REGISTER_NUMBER
+#define DBX_REGISTER_NUMBER(n) svr4_dbx_register_map[n]
+
+/* Default to pcc-struct-return.  */
+#define DEFAULT_PCC_STRUCT_RETURN 1
+
+/* Copied from gcc/varasm.c. (i386.c uses it) */
+#undef ASM_DECLARE_FUNCTION_NAME
+#define ASM_DECLARE_FUNCTION_NAME(FILE, NAME, DECL)		\
+  ASM_OUTPUT_LABEL (FILE, NAME);
+
diff --git a/gcc/config/i386/t-djgpp b/gcc/config/i386/t-djgpp
index 7b54b7ba..42bfff58 100644
--- a/gcc/config/i386/t-djgpp
+++ b/gcc/config/i386/t-djgpp
@@ -1,2 +1,10 @@
 # Location of DJGPP's header directory.
 NATIVE_SYSTEM_HEADER_DIR=$(DJDIR)/include
+
+# We should have djgpp.ver before we can compile anything
+EXTRA_PARTS += djgpp.ver
+# djgpp.ver is needed for compilation, so we need it also here
+EXTRA_PASSES += djgpp.ver
+
+djgpp.ver:
+	echo '#include <sys/version.h>' >djgpp.ver
diff --git a/gcc/config/i386/x-djgpp b/gcc/config/i386/x-djgpp
new file mode 100644
index 00000000..4ebbded6
--- /dev/null
+++ b/gcc/config/i386/x-djgpp
@@ -0,0 +1,23 @@
+#-----------------------------------------------------------------------------
+# The following code is copied from config/mh-djgpp as one may 
+# want to run make in gcc build directory instead of toplevel 
+# one (for example 'make restage2' or similar which are not available
+# from top level makefile and we should have the same substitutions 
+# in this case)           
+#-----------------------------------------------------------------------------
+
+# Shorten the target alias so when it is used to set 'libsubdir'
+# the name will work in both short and long filename environments.
+ifeq ($(findstring -pc-msdosdjgpp,$(target_alias)),-pc-msdosdjgpp)
+target_alias=djgpp
+endif
+
+# The version string must be modified to contain just one dot
+# because DOS filenames can only have one dot when long filenames
+# are not available.
+#
+version := $(shell echo $(version) | sed -e 's:\.::2g')
+
+# on DJGPP the 'ln -s' does not work correctly
+LN = cp -p
+LN_S = cp -p
diff --git a/gcc/config/i386/xm-djgpp.h b/gcc/config/i386/xm-djgpp.h
index a93befca..e7c962bc 100644
--- a/gcc/config/i386/xm-djgpp.h
+++ b/gcc/config/i386/xm-djgpp.h
@@ -83,3 +83,15 @@ Boston, MA 02110-1301, USA.  */
       strcat (fixed_path, "/");			\
       (PATH) = xstrdup (fixed_path);		\
     } 
+
+/* Rename libstdc++ to libstdcxx as the first name is not valid for DOS */
+#define LIBSTDCXX "-lstdcxx"
+#define LIBSTDCXX_PROFILE "-lstdcxx"
+
+/* Rename libgfortranbegin.a to avoid filename conflict for DOS */
+#undef FORTRAN_INIT
+#define FORTRAN_INIT "-lgf95begin"
+
+/* Definition is missing in DJGPP headers. That broke building
+   GNU Fortran compiler in GCC-4.1 */
+typedef unsigned int uint;
diff --git a/gcc/configure b/gcc/configure
index 6dd8bd59..a9032ddc 100755
--- a/gcc/configure
+++ b/gcc/configure
@@ -309,7 +309,7 @@ ac_includes_default="\
 # include <unistd.h>
 #endif"
 
-ac_subst_vars='SHELL PATH_SEPARATOR PACKAGE_NAME PACKAGE_TARNAME PACKAGE_VERSION PACKAGE_STRING PACKAGE_BUGREPORT exec_prefix prefix program_transform_name bindir sbindir libexecdir datadir sysconfdir sharedstatedir localstatedir libdir includedir oldincludedir infodir mandir build_alias host_alias target_alias DEFS ECHO_C ECHO_N ECHO_T LIBS build build_cpu build_vendor build_os host host_cpu host_vendor host_os target target_cpu target_vendor target_os target_noncanonical build_subdir host_subdir target_subdir GENINSRC CC CFLAGS LDFLAGS CPPFLAGS ac_ct_CC EXEEXT OBJEXT NO_MINUS_C_MINUS_O OUTPUT_OPTION CPP EGREP strict1_warn warn_cflags WERROR nocommon_flag TREEBROWSER valgrind_path valgrind_path_defines valgrind_command coverage_flags enable_multilib enable_shared TARGET_SYSTEM_ROOT TARGET_SYSTEM_ROOT_DEFINE CROSS_SYSTEM_HEADER_DIR onestep SET_MAKE AWK LN_S LN RANLIB ac_ct_RANLIB ranlib_flags INSTALL INSTALL_PROGRAM INSTALL_DATA make_compare_target have_mktemp_command MAKEINFO BUILD_INFO GENERATED_MANPAGES FLEX BISON NM AR stage1_cflags COLLECT2_LIBS GNAT_LIBEXC LDEXP_LIB TARGET_GETGROUPS_T LIBICONV LTLIBICONV LIBICONV_DEP manext objext gthread_flags extra_modes_file extra_opt_files USE_NLS LIBINTL LIBINTL_DEP INCINTL XGETTEXT GMSGFMT POSUB CATALOGS host_cc_for_libada CROSS ALL SYSTEM_HEADER_DIR inhibit_libc CC_FOR_BUILD BUILD_CFLAGS STMP_FIXINC STMP_FIXPROTO collect2 gcc_cv_as ORIGINAL_AS_FOR_TARGET gcc_cv_ld ORIGINAL_LD_FOR_TARGET gcc_cv_nm ORIGINAL_NM_FOR_TARGET gcc_cv_objdump ORIGINAL_OBJDUMP_FOR_TARGET libgcc_visibility GGC zlibdir zlibinc MAINT gcc_tooldir dollar slibdir objdir subdirs srcdir all_boot_languages all_compilers all_gtfiles all_gtfiles_files_langs all_gtfiles_files_files all_lang_makefrags all_lang_makefiles all_languages all_stagestuff build_exeext build_install_headers_dir build_xm_file_list build_xm_include_list build_xm_defines check_languages cc_set_by_configure quoted_cc_set_by_configure cpp_install_dir xmake_file tmake_file extra_gcc_objs extra_headers_list extra_objs extra_parts extra_passes extra_programs float_h_file gcc_config_arguments gcc_gxx_include_dir libstdcxx_incdir host_exeext host_xm_file_list host_xm_include_list host_xm_defines out_host_hook_obj install lang_opt_files lang_specs_files lang_tree_files local_prefix md_file objc_boehm_gc out_file out_object_file stage_prefix_set_by_configure quoted_stage_prefix_set_by_configure thread_file tm_file_list tm_include_list tm_defines tm_p_file_list tm_p_include_list xm_file_list xm_include_list xm_defines c_target_objs cxx_target_objs target_cpu_default GMPLIBS GMPINC LIBOBJS LTLIBOBJS'
+ac_subst_vars='SHELL PATH_SEPARATOR PACKAGE_NAME PACKAGE_TARNAME PACKAGE_VERSION PACKAGE_STRING PACKAGE_BUGREPORT exec_prefix prefix program_transform_name bindir sbindir libexecdir datadir sysconfdir sharedstatedir localstatedir libdir includedir oldincludedir infodir mandir build_alias host_alias target_alias DEFS ECHO_C ECHO_N ECHO_T LIBS build build_cpu build_vendor build_os host host_cpu host_vendor host_os target target_cpu target_vendor target_os target_noncanonical build_subdir host_subdir target_subdir libstdcxx_incdir_base GENINSRC CC CFLAGS LDFLAGS CPPFLAGS ac_ct_CC EXEEXT OBJEXT NO_MINUS_C_MINUS_O OUTPUT_OPTION CPP EGREP strict1_warn warn_cflags WERROR nocommon_flag TREEBROWSER valgrind_path valgrind_path_defines valgrind_command coverage_flags enable_multilib enable_shared TARGET_SYSTEM_ROOT TARGET_SYSTEM_ROOT_DEFINE CROSS_SYSTEM_HEADER_DIR onestep SET_MAKE AWK LN_S LN RANLIB ac_ct_RANLIB ranlib_flags INSTALL INSTALL_PROGRAM INSTALL_DATA make_compare_target have_mktemp_command MAKEINFO BUILD_INFO GENERATED_MANPAGES FLEX BISON NM AR stage1_cflags COLLECT2_LIBS GNAT_LIBEXC LDEXP_LIB TARGET_GETGROUPS_T LIBICONV LTLIBICONV LIBICONV_DEP manext objext gthread_flags extra_modes_file extra_opt_files USE_NLS LIBINTL LIBINTL_DEP INCINTL XGETTEXT GMSGFMT POSUB CATALOGS host_cc_for_libada CROSS ALL SYSTEM_HEADER_DIR inhibit_libc CC_FOR_BUILD BUILD_CFLAGS STMP_FIXINC STMP_FIXPROTO collect2 gcc_cv_as ORIGINAL_AS_FOR_TARGET gcc_cv_ld ORIGINAL_LD_FOR_TARGET gcc_cv_nm ORIGINAL_NM_FOR_TARGET gcc_cv_objdump ORIGINAL_OBJDUMP_FOR_TARGET libgcc_visibility GGC zlibdir zlibinc MAINT gcc_tooldir dollar slibdir objdir subdirs srcdir all_boot_languages all_compilers all_gtfiles all_gtfiles_files_langs all_gtfiles_files_files all_lang_makefrags all_lang_makefiles all_languages all_stagestuff build_exeext build_install_headers_dir build_xm_file_list build_xm_include_list build_xm_defines check_languages cc_set_by_configure quoted_cc_set_by_configure cpp_install_dir xmake_file tmake_file extra_gcc_objs extra_headers_list extra_objs extra_parts extra_passes extra_programs float_h_file gcc_config_arguments gcc_gxx_include_dir libstdcxx_incdir host_exeext host_xm_file_list host_xm_include_list host_xm_defines out_host_hook_obj install lang_opt_files lang_specs_files lang_tree_files local_prefix md_file objc_boehm_gc out_file out_object_file stage_prefix_set_by_configure quoted_stage_prefix_set_by_configure thread_file tm_file_list tm_include_list tm_defines tm_p_file_list tm_p_include_list xm_file_list xm_include_list xm_defines c_target_objs cxx_target_objs target_cpu_default GMPLIBS GMPINC LIBOBJS LTLIBOBJS'
 ac_subst_files='language_hooks'
 
 # Initialize some variables set by options.
@@ -1653,11 +1653,15 @@ no)	;;
 esac
 fi;
 
+
+libstdcxx_incdir_base=c++
+
+
 if test x${gcc_gxx_include_dir} = x; then
   if test x${enable_version_specific_runtime_libs} = xyes; then
-    gcc_gxx_include_dir='${libsubdir}/include/c++'
+    gcc_gxx_include_dir='${libsubdir}/include/$(libstdcxx_incdir_base)'
   else
-    libstdcxx_incdir='c++/$(version)'
+    libstdcxx_incdir='$(libstdcxx_incdir_base)/$(version)'
     gcc_gxx_include_dir="\$(libsubdir)/\$(unlibsubdir)/..\`echo \$(exec_prefix) | sed -e 's|^\$(prefix)||' -e 's|/[^/]*|/..|g'\`/include/"${libstdcxx_incdir}
   fi
 fi
@@ -7492,7 +7496,7 @@ if test "${gcc_cv_prog_makeinfo_modern+set}" = set; then
 else
     ac_prog_version=`$MAKEINFO --version 2>&1 |
                    sed -n 's/^.*GNU texinfo.* \([0-9][0-9.]*\).*$/\1/p'`
-  echo "configure:7495: version of makeinfo is $ac_prog_version" >&5
+  echo "configure:7499: version of makeinfo is $ac_prog_version" >&5
   case $ac_prog_version in
     '')     gcc_cv_prog_makeinfo_modern=no;;
     4.[2-9]*)
@@ -17213,6 +17217,7 @@ s,@target_noncanonical@,$target_noncanonical,;t t
 s,@build_subdir@,$build_subdir,;t t
 s,@host_subdir@,$host_subdir,;t t
 s,@target_subdir@,$target_subdir,;t t
+s,@libstdcxx_incdir_base@,$libstdcxx_incdir_base,;t t
 s,@GENINSRC@,$GENINSRC,;t t
 s,@CC@,$CC,;t t
 s,@CFLAGS@,$CFLAGS,;t t
diff --git a/gcc/configure.ac b/gcc/configure.ac
index b073f350..0079a096 100644
--- a/gcc/configure.ac
+++ b/gcc/configure.ac
@@ -132,11 +132,15 @@ no)	;;
 *)	gcc_gxx_include_dir=$with_gxx_include_dir ;;
 esac])
 
+
+libstdcxx_incdir_base=c++
+AC_SUBST(libstdcxx_incdir_base)
+
 if test x${gcc_gxx_include_dir} = x; then
   if test x${enable_version_specific_runtime_libs} = xyes; then
-    gcc_gxx_include_dir='${libsubdir}/include/c++'
+    gcc_gxx_include_dir='${libsubdir}/include/$(libstdcxx_incdir_base)'
   else
-    libstdcxx_incdir='c++/$(version)'
+    libstdcxx_incdir='$(libstdcxx_incdir_base)/$(version)'
 changequote(<<, >>)dnl
     gcc_gxx_include_dir="\$(libsubdir)/\$(unlibsubdir)/..\`echo \$(exec_prefix) | sed -e 's|^\$(prefix)||' -e 's|/[^/]*|/..|g'\`/include/"${libstdcxx_incdir}
 changequote([, ])dnl
diff --git a/gcc/gcc.c b/gcc/gcc.c
index 74d805a5..79d60957 100644
--- a/gcc/gcc.c
+++ b/gcc/gcc.c
@@ -1463,18 +1463,22 @@ static const char *gcc_libexec_prefix;
 #endif
 
 static const char *const standard_exec_prefix = STANDARD_EXEC_PREFIX;
+#ifndef __DJGPP__
 static const char *const standard_exec_prefix_1 = "/usr/libexec/gcc/";
 static const char *const standard_exec_prefix_2 = "/usr/lib/gcc/";
+#endif
 static const char *md_exec_prefix = MD_EXEC_PREFIX;
 
 static const char *md_startfile_prefix = MD_STARTFILE_PREFIX;
 static const char *md_startfile_prefix_1 = MD_STARTFILE_PREFIX_1;
 static const char *const standard_startfile_prefix = STANDARD_STARTFILE_PREFIX;
+#ifndef __DJGPP__
 static const char *const standard_startfile_prefix_1
   = STANDARD_STARTFILE_PREFIX_1;
 static const char *const standard_startfile_prefix_2
   = STANDARD_STARTFILE_PREFIX_2;
-
+#endif
+  
 static const char *const tooldir_base_prefix = TOOLDIR_BASE_PREFIX;
 static const char *tooldir_prefix;
 
@@ -3934,16 +3938,20 @@ warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\n\n"
 	      PREFIX_PRIORITY_LAST, 2, 0);
   add_prefix (&exec_prefixes, standard_exec_prefix, "BINUTILS",
 	      PREFIX_PRIORITY_LAST, 2, 0);
+#ifndef __DJGPP__	      
   add_prefix (&exec_prefixes, standard_exec_prefix_1, "BINUTILS",
 	      PREFIX_PRIORITY_LAST, 2, 0);
   add_prefix (&exec_prefixes, standard_exec_prefix_2, "BINUTILS",
 	      PREFIX_PRIORITY_LAST, 2, 0);
+#endif	      
 #endif
 
   add_prefix (&startfile_prefixes, standard_exec_prefix, "BINUTILS",
 	      PREFIX_PRIORITY_LAST, 1, 0);
+#ifndef __DJGPP__	      
   add_prefix (&startfile_prefixes, standard_exec_prefix_2, "BINUTILS",
 	      PREFIX_PRIORITY_LAST, 1, 0);
+#endif
 
   tooldir_prefix = concat (tooldir_base_prefix, spec_machine,
 			   dir_separator_str, NULL);
@@ -6525,6 +6533,7 @@ main (int argc, const char **argv)
 		      NULL, PREFIX_PRIORITY_LAST, 0, 1);
 	}
 
+#ifndef __DJGPP__	
       if (*standard_startfile_prefix_1)
  	add_sysrooted_prefix (&startfile_prefixes,
 			      standard_startfile_prefix_1, "BINUTILS",
@@ -6533,6 +6542,7 @@ main (int argc, const char **argv)
 	add_sysrooted_prefix (&startfile_prefixes,
 			      standard_startfile_prefix_2, "BINUTILS",
 			      PREFIX_PRIORITY_LAST, 0, 1);
+#endif			      
     }
 
   /* Process any user specified specs in the order given on the command
diff --git a/gcc/gcov.c b/gcc/gcov.c
index ff583cc7..4a78e38b 100644
--- a/gcc/gcov.c
+++ b/gcc/gcov.c
@@ -1465,6 +1465,23 @@ make_gcov_file_name (const char *input_name, const char *src_name)
     }
 
   strcat (name, ".gcov");
+#ifdef __DJGPP__
+     if (!_use_lfn(name))
+       {
+           char *s1, *s2=NULL;
+           for (s1=name; *s1 && *s1!='.'; s1++);
+           if (*s1) for (s2=s1+1; *s2 && *s2!='.'; s2++);
+           if (s2 && *s2=='.')
+             {
+                 int l;
+                 s1++;  l=s2-s1;  if (l>2) l=2;
+                 s1 = s1+l;  s2++;
+                 while (*s2) { *s1++=*s2++; }
+                 *s1=0;
+             }
+       }
+#endif
+
   return name;
 }
 
diff --git a/gcc/ginclude/float.h b/gcc/ginclude/float.h
index 3cdf7c82..5dc4013a 100644
--- a/gcc/ginclude/float.h
+++ b/gcc/ginclude/float.h
@@ -28,6 +28,10 @@ Boston, MA 02110-1301, USA.  */
  * ISO C Standard:  5.2.4.2.2  Characteristics of floating types <float.h>
  */
 
+#ifdef __DJGPP__
+#include_next <float.h>
+#endif
+
 #ifndef _FLOAT_H___
 #define _FLOAT_H___
 
diff --git a/gcc/protoize.c b/gcc/protoize.c
index f67fc4de..b30148b7 100644
--- a/gcc/protoize.c
+++ b/gcc/protoize.c
@@ -4146,7 +4146,7 @@ edit_file (const hash_table_entry *hp)
 #ifdef __MSDOS__
       /* MSDOS filenames are restricted to 8.3 format, so we save `foo.c'
 	 as `foo.<save_suffix>'.  */
-      new_filename[(strlen (convert_filename) - 1] = '\0';
+      new_filename[strlen (convert_filename) - 1] = '\0';
 #endif
       strcat (new_filename, save_suffix);
 
diff --git a/gnattools/configure b/gnattools/configure
index 9e299b77..0e2dcff1 100755
--- a/gnattools/configure
+++ b/gnattools/configure
@@ -880,7 +880,7 @@ esac
     else
       echo "$as_me: WARNING: no configuration information is in $ac_dir" >&2
     fi
-    cd "$ac_popdir"
+    cd $ac_popdir
   done
 fi
 
@@ -1455,21 +1455,13 @@ test -n "$target_alias" &&
 # These demand that AC_CANONICAL_SYSTEM be called beforehand.
 
 ####
-# NCN_CHECK_TARGET_TOOL(variable, prog-to-check-for,[value-if-not-found],[path])
-# Like AC_CHECK_TOOL, but tries a prefix of the target, not the host.
-# Code is pretty much lifted from autoconf2.53.
-
-
-
-####
-# NCN_STRICT_CHECK_TOOL(variable, prog-to-check-for,[value-if-not-found],[path])
-# Like AC_CHECK_TOOL, but requires the prefix if build!=host.
-
+# NCN_STRICT_CHECK_TOOLS(variable, progs-to-check-for,[value-if-not-found],[path])
+# Like plain AC_CHECK_TOOLS, but require prefix if build!=target.
 
 
 ####
-# NCN_STRICT_CHECK_TARGET_TOOL(variable, prog-to-check-for,[value-if-not-found],[path])
-# Like NCN_CHECK_TARGET_TOOL, but requires the prefix if build!=target.
+# NCN_STRICT_CHECK_TARGET_TOOLS(variable, progs-to-check-for,[value-if-not-found],[path])
+# Like CVS Autoconf AC_CHECK_TARGET_TOOLS, but require prefix if build!=target.
 
 
 ###
@@ -1501,6 +1493,7 @@ test -n "$target_alias" &&
 
 
 
+
  case ${build_alias} in
   "") build_noncanonical=${build} ;;
   *) build_noncanonical=${build_alias} ;;
@@ -2469,6 +2462,11 @@ esac
   *) ac_INSTALL=$ac_top_builddir$INSTALL ;;
   esac
 
+  if test x"$ac_file" != x-; then
+    { echo "$as_me:$LINENO: creating $ac_file" >&5
+echo "$as_me: creating $ac_file" >&6;}
+    rm -f "$ac_file"
+  fi
   # Let's still pretend it is `configure' which instantiates (i.e., don't
   # use $as_me), people would be surprised to read:
   #    /* config.h.  Generated by config.status.  */
@@ -2507,12 +2505,6 @@ echo "$as_me: error: cannot find input file: $f" >&2;}
 	 fi;;
       esac
     done` || { (exit 1); exit 1; }
-
-  if test x"$ac_file" != x-; then
-    { echo "$as_me:$LINENO: creating $ac_file" >&5
-echo "$as_me: creating $ac_file" >&6;}
-    rm -f "$ac_file"
-  fi
 _ACEOF
 cat >>$CONFIG_STATUS <<_ACEOF
   sed "$ac_vpsub
diff --git a/include/libiberty.h b/include/libiberty.h
index c264cb2a..a52997d4 100644
--- a/include/libiberty.h
+++ b/include/libiberty.h
@@ -97,7 +97,7 @@ extern void expandargv PARAMS ((int *, char ***));
    to find the declaration so provide a fully prototyped one.  If it
    is 1, we found it so don't provide any declaration at all.  */
 #if !HAVE_DECL_BASENAME
-#if defined (__GNU_LIBRARY__ ) || defined (__linux__) || defined (__FreeBSD__) || defined (__OpenBSD__) || defined(__NetBSD__) || defined (__CYGWIN__) || defined (__CYGWIN32__) || defined (__MINGW32__) || defined (HAVE_DECL_BASENAME)
+#if defined (__GNU_LIBRARY__ ) || defined (__linux__) || defined (__FreeBSD__) || defined (__OpenBSD__) || defined(__NetBSD__) || defined (__CYGWIN__) || defined (__CYGWIN32__) || defined (__MINGW32__) || defined (__DJGPP__) || defined (HAVE_DECL_BASENAME)
 extern char *basename (const char *);
 #else
 /* Do not allow basename to be used if there is no prototype seen.  We
diff --git a/libada/configure b/libada/configure
index 5243b563..05922e32 100755
--- a/libada/configure
+++ b/libada/configure
@@ -881,7 +881,7 @@ esac
     else
       echo "$as_me: WARNING: no configuration information is in $ac_dir" >&2
     fi
-    cd "$ac_popdir"
+    cd $ac_popdir
   done
 fi
 
@@ -2232,6 +2232,11 @@ esac
 
 
 
+  if test x"$ac_file" != x-; then
+    { echo "$as_me:$LINENO: creating $ac_file" >&5
+echo "$as_me: creating $ac_file" >&6;}
+    rm -f "$ac_file"
+  fi
   # Let's still pretend it is `configure' which instantiates (i.e., don't
   # use $as_me), people would be surprised to read:
   #    /* config.h.  Generated by config.status.  */
@@ -2270,12 +2275,6 @@ echo "$as_me: error: cannot find input file: $f" >&2;}
 	 fi;;
       esac
     done` || { (exit 1); exit 1; }
-
-  if test x"$ac_file" != x-; then
-    { echo "$as_me:$LINENO: creating $ac_file" >&5
-echo "$as_me: creating $ac_file" >&6;}
-    rm -f "$ac_file"
-  fi
 _ACEOF
 cat >>$CONFIG_STATUS <<_ACEOF
   sed "$ac_vpsub
diff --git a/libcpp/files.c b/libcpp/files.c
index 31c38d0b..a88c520b 100644
--- a/libcpp/files.c
+++ b/libcpp/files.c
@@ -552,6 +552,10 @@ read_file_guts (cpp_reader *pfile, _cpp_file *file)
     cpp_error (pfile, CPP_DL_WARNING,
 	       "%s is shorter than expected", file->path);
 
+/* For DOS we should handle DOS EOF character (0x1A, ^Z). It is
+   only done if it is really the last character of the file  */
+  if (total>0 && buf[total-1]==0x1A) total--;
+  
   file->buffer = _cpp_convert_input (pfile, CPP_OPTION (pfile, input_charset),
 				     buf, size, total, &file->st.st_size);
   file->buffer_valid = true;
diff --git a/libgfortran/Makefile.am b/libgfortran/Makefile.am
index 56c33dfc..4e3e9ded 100644
--- a/libgfortran/Makefile.am
+++ b/libgfortran/Makefile.am
@@ -6,13 +6,22 @@ ACLOCAL_AMFLAGS = -I ../config
 ## May be used by toolexeclibdir.
 gcc_version := $(shell cat $(top_srcdir)/../gcc/BASE-VER)
 
+if DJGPP
+toolexeclib_LTLIBRARIES = libgfortran.la libgf95begin.la
+else
 toolexeclib_LTLIBRARIES = libgfortran.la libgfortranbegin.la
+endif
 
 libgfortran_la_LDFLAGS = -version-info `grep -v '^\#' $(srcdir)/libtool-version` -lm $(extra_ldflags_libgfortran)
 
 ## This should really go in the compiler lib dir, not the system lib dir.
+if DJGPP
+libgf95begin_la_SOURCES = fmain.c
+libgf95begin_la_LDFLAGS = -static
+else
 libgfortranbegin_la_SOURCES = fmain.c
 libgfortranbegin_la_LDFLAGS = -static
+endif
 
 ## io.h conflicts with some a system header on some platforms, so
 ## use -iquote
diff --git a/libgfortran/Makefile.in b/libgfortran/Makefile.in
index 90944665..014b3762 100644
--- a/libgfortran/Makefile.in
+++ b/libgfortran/Makefile.in
@@ -66,6 +66,11 @@ am__strip_dir = `echo $$p | sed -e 's|^.*/||'`;
 am__installdirs = "$(DESTDIR)$(toolexeclibdir)"
 toolexeclibLTLIBRARIES_INSTALL = $(INSTALL)
 LTLIBRARIES = $(toolexeclib_LTLIBRARIES)
+libgf95begin_la_LIBADD =
+am__libgf95begin_la_SOURCES_DIST = fmain.c
+@DJGPP_TRUE@am_libgf95begin_la_OBJECTS = fmain.lo
+libgf95begin_la_OBJECTS = $(am_libgf95begin_la_OBJECTS)
+@DJGPP_TRUE@am_libgf95begin_la_rpath = -rpath $(toolexeclibdir)
 libgfortran_la_LIBADD =
 am__objects_1 = compile_options.lo environ.lo error.lo fpu.lo main.lo \
 	memory.lo pause.lo stop.lo string.lo select.lo
@@ -212,9 +217,13 @@ am_libgfortran_la_OBJECTS = $(am__objects_1) $(am__objects_31) \
 	$(am__objects_32) $(am__objects_33) $(am__objects_34) \
 	$(am__objects_37)
 libgfortran_la_OBJECTS = $(am_libgfortran_la_OBJECTS)
+@DJGPP_FALSE@am_libgfortran_la_rpath = -rpath $(toolexeclibdir)
+@DJGPP_TRUE@am_libgfortran_la_rpath = -rpath $(toolexeclibdir)
 libgfortranbegin_la_LIBADD =
-am_libgfortranbegin_la_OBJECTS = fmain.lo
+am__libgfortranbegin_la_SOURCES_DIST = fmain.c
+@DJGPP_FALSE@am_libgfortranbegin_la_OBJECTS = fmain.lo
 libgfortranbegin_la_OBJECTS = $(am_libgfortranbegin_la_OBJECTS)
+@DJGPP_FALSE@am_libgfortranbegin_la_rpath = -rpath $(toolexeclibdir)
 DEFAULT_INCLUDES = -I. -I$(srcdir) -I.
 depcomp =
 am__depfiles_maybe =
@@ -236,9 +245,11 @@ LINK = $(LIBTOOL) --mode=link $(CCLD) $(AM_CFLAGS) $(CFLAGS) \
 	$(AM_LDFLAGS) $(LDFLAGS) -o $@
 FCCOMPILE = $(FC) $(AM_FCFLAGS) $(FCFLAGS)
 LTFCCOMPILE = $(LIBTOOL) --mode=compile $(FC) $(AM_FCFLAGS) $(FCFLAGS)
-SOURCES = $(libgfortran_la_SOURCES) $(libgfortranbegin_la_SOURCES)
-DIST_SOURCES = $(libgfortran_la_SOURCES) \
+SOURCES = $(libgf95begin_la_SOURCES) $(libgfortran_la_SOURCES) \
 	$(libgfortranbegin_la_SOURCES)
+DIST_SOURCES = $(am__libgf95begin_la_SOURCES_DIST) \
+	$(libgfortran_la_SOURCES) \
+	$(am__libgfortranbegin_la_SOURCES_DIST)
 MULTISRCTOP = 
 MULTIBUILDTOP = 
 MULTIDIRS = 
@@ -273,6 +284,8 @@ CPP = @CPP@
 CPPFLAGS = @CPPFLAGS@
 CYGPATH_W = @CYGPATH_W@
 DEFS = @DEFS@
+DJGPP_FALSE = @DJGPP_FALSE@
+DJGPP_TRUE = @DJGPP_TRUE@
 ECHO_C = @ECHO_C@
 ECHO_N = @ECHO_N@
 ECHO_T = @ECHO_T@
@@ -360,10 +373,13 @@ toolexecdir = @toolexecdir@
 toolexeclibdir = @toolexeclibdir@
 ACLOCAL_AMFLAGS = -I ../config
 gcc_version := $(shell cat $(top_srcdir)/../gcc/BASE-VER)
-toolexeclib_LTLIBRARIES = libgfortran.la libgfortranbegin.la
+@DJGPP_FALSE@toolexeclib_LTLIBRARIES = libgfortran.la libgfortranbegin.la
+@DJGPP_TRUE@toolexeclib_LTLIBRARIES = libgfortran.la libgf95begin.la
 libgfortran_la_LDFLAGS = -version-info `grep -v '^\#' $(srcdir)/libtool-version` -lm $(extra_ldflags_libgfortran)
-libgfortranbegin_la_SOURCES = fmain.c
-libgfortranbegin_la_LDFLAGS = -static
+@DJGPP_TRUE@libgf95begin_la_SOURCES = fmain.c
+@DJGPP_TRUE@libgf95begin_la_LDFLAGS = -static
+@DJGPP_FALSE@libgfortranbegin_la_SOURCES = fmain.c
+@DJGPP_FALSE@libgfortranbegin_la_LDFLAGS = -static
 AM_CPPFLAGS = -iquote$(srcdir)/io -I$(srcdir)/$(MULTISRCTOP)../gcc \
 	      -I$(srcdir)/$(MULTISRCTOP)../gcc/config \
 	      -I$(MULTIBUILDTOP)../../$(host_subdir)/gcc -D_GNU_SOURCE
@@ -1017,10 +1033,12 @@ clean-toolexeclibLTLIBRARIES:
 	  echo "rm -f \"$${dir}/so_locations\""; \
 	  rm -f "$${dir}/so_locations"; \
 	done
+libgf95begin.la: $(libgf95begin_la_OBJECTS) $(libgf95begin_la_DEPENDENCIES) 
+	$(LINK) $(am_libgf95begin_la_rpath) $(libgf95begin_la_LDFLAGS) $(libgf95begin_la_OBJECTS) $(libgf95begin_la_LIBADD) $(LIBS)
 libgfortran.la: $(libgfortran_la_OBJECTS) $(libgfortran_la_DEPENDENCIES) 
-	$(FCLINK) -rpath $(toolexeclibdir) $(libgfortran_la_LDFLAGS) $(libgfortran_la_OBJECTS) $(libgfortran_la_LIBADD) $(LIBS)
+	$(FCLINK) $(am_libgfortran_la_rpath) $(libgfortran_la_LDFLAGS) $(libgfortran_la_OBJECTS) $(libgfortran_la_LIBADD) $(LIBS)
 libgfortranbegin.la: $(libgfortranbegin_la_OBJECTS) $(libgfortranbegin_la_DEPENDENCIES) 
-	$(LINK) -rpath $(toolexeclibdir) $(libgfortranbegin_la_LDFLAGS) $(libgfortranbegin_la_OBJECTS) $(libgfortranbegin_la_LIBADD) $(LIBS)
+	$(LINK) $(am_libgfortranbegin_la_rpath) $(libgfortranbegin_la_LDFLAGS) $(libgfortranbegin_la_OBJECTS) $(libgfortranbegin_la_LIBADD) $(LIBS)
 
 mostlyclean-compile:
 	-rm -f *.$(OBJEXT)
diff --git a/libgfortran/configure b/libgfortran/configure
index 36493b7b..f289b4ea 100755
--- a/libgfortran/configure
+++ b/libgfortran/configure
@@ -308,7 +308,7 @@ ac_includes_default="\
 # include <unistd.h>
 #endif"
 
-ac_subst_vars='SHELL PATH_SEPARATOR PACKAGE_NAME PACKAGE_TARNAME PACKAGE_VERSION PACKAGE_STRING PACKAGE_BUGREPORT exec_prefix prefix program_transform_name bindir sbindir libexecdir datadir sysconfdir sharedstatedir localstatedir libdir includedir oldincludedir infodir mandir build_alias host_alias target_alias DEFS ECHO_C ECHO_N ECHO_T LIBS build build_cpu build_vendor build_os build_subdir host_subdir target_subdir host host_cpu host_vendor host_os target target_cpu target_vendor target_os INSTALL_PROGRAM INSTALL_SCRIPT INSTALL_DATA CYGPATH_W PACKAGE VERSION ACLOCAL AUTOCONF AUTOMAKE AUTOHEADER MAKEINFO install_sh STRIP ac_ct_STRIP INSTALL_STRIP_PROGRAM mkdir_p AWK SET_MAKE am__leading_dot AMTAR am__tar am__untar MAINTAINER_MODE_TRUE MAINTAINER_MODE_FALSE MAINT multi_basedir toolexecdir toolexeclibdir CC ac_ct_CC EXEEXT OBJEXT AM_FCFLAGS AM_CFLAGS AS ac_ct_AS AR ac_ct_AR RANLIB ac_ct_RANLIB LN_S LIBTOOL enable_shared enable_static FC FCFLAGS LDFLAGS ac_ct_FC extra_ldflags_libgfortran CPP CPPFLAGS EGREP FPU_HOST_HEADER LIBOBJS LTLIBOBJS'
+ac_subst_vars='SHELL PATH_SEPARATOR PACKAGE_NAME PACKAGE_TARNAME PACKAGE_VERSION PACKAGE_STRING PACKAGE_BUGREPORT exec_prefix prefix program_transform_name bindir sbindir libexecdir datadir sysconfdir sharedstatedir localstatedir libdir includedir oldincludedir infodir mandir build_alias host_alias target_alias DEFS ECHO_C ECHO_N ECHO_T LIBS build build_cpu build_vendor build_os build_subdir host_subdir target_subdir host host_cpu host_vendor host_os target target_cpu target_vendor target_os INSTALL_PROGRAM INSTALL_SCRIPT INSTALL_DATA CYGPATH_W PACKAGE VERSION ACLOCAL AUTOCONF AUTOMAKE AUTOHEADER MAKEINFO install_sh STRIP ac_ct_STRIP INSTALL_STRIP_PROGRAM mkdir_p AWK SET_MAKE am__leading_dot AMTAR am__tar am__untar MAINTAINER_MODE_TRUE MAINTAINER_MODE_FALSE MAINT multi_basedir DJGPP_TRUE DJGPP_FALSE toolexecdir toolexeclibdir CC ac_ct_CC EXEEXT OBJEXT AM_FCFLAGS AM_CFLAGS AS ac_ct_AS AR ac_ct_AR RANLIB ac_ct_RANLIB LN_S LIBTOOL enable_shared enable_static FC FCFLAGS LDFLAGS ac_ct_FC extra_ldflags_libgfortran CPP CPPFLAGS EGREP FPU_HOST_HEADER LIBOBJS LTLIBOBJS'
 ac_subst_files=''
 
 # Initialize some variables set by options.
@@ -1975,6 +1975,18 @@ fi
           ac_config_commands="$ac_config_commands default-1"
 
 
+# Add test for DJGPP
+
+
+if echo $build | grep msdosdjgpp; then
+  DJGPP_TRUE=
+  DJGPP_FALSE='#'
+else
+  DJGPP_TRUE='#'
+  DJGPP_FALSE=
+fi
+
+
 # Handy for debugging:
 #AC_MSG_NOTICE($build / $host / $target / $host_alias / $target_alias); sleep 5
 
@@ -4152,7 +4164,7 @@ test x"$pic_mode" = xno && libtool_flags="$libtool_flags --prefer-non-pic"
 case $host in
 *-*-irix6*)
   # Find out which ABI we are using.
-  echo '#line 4155 "configure"' > conftest.$ac_ext
+  echo '#line 4167 "configure"' > conftest.$ac_ext
   if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
   (eval $ac_compile) 2>&5
   ac_status=$?
@@ -4542,7 +4554,7 @@ fi
 
 
 # Provide some information about the compiler.
-echo "$as_me:4545:" \
+echo "$as_me:4557:" \
      "checking for Fortran compiler version" >&5
 ac_compiler=`set X $ac_compile; echo $2`
 { (eval echo "$as_me:$LINENO: \"$ac_compiler --version </dev/null >&5\"") >&5
@@ -24255,6 +24267,13 @@ echo "$as_me: error: conditional \"MAINTAINER_MODE\" was never defined.
 Usually this means the macro was only invoked conditionally." >&2;}
    { (exit 1); exit 1; }; }
 fi
+if test -z "${DJGPP_TRUE}" && test -z "${DJGPP_FALSE}"; then
+  { { echo "$as_me:$LINENO: error: conditional \"DJGPP\" was never defined.
+Usually this means the macro was only invoked conditionally." >&5
+echo "$as_me: error: conditional \"DJGPP\" was never defined.
+Usually this means the macro was only invoked conditionally." >&2;}
+   { (exit 1); exit 1; }; }
+fi
 
 : ${CONFIG_STATUS=./config.status}
 ac_clean_files_save=$ac_clean_files
@@ -24857,6 +24876,8 @@ s,@MAINTAINER_MODE_TRUE@,$MAINTAINER_MODE_TRUE,;t t
 s,@MAINTAINER_MODE_FALSE@,$MAINTAINER_MODE_FALSE,;t t
 s,@MAINT@,$MAINT,;t t
 s,@multi_basedir@,$multi_basedir,;t t
+s,@DJGPP_TRUE@,$DJGPP_TRUE,;t t
+s,@DJGPP_FALSE@,$DJGPP_FALSE,;t t
 s,@toolexecdir@,$toolexecdir,;t t
 s,@toolexeclibdir@,$toolexeclibdir,;t t
 s,@CC@,$CC,;t t
diff --git a/libgfortran/configure.ac b/libgfortran/configure.ac
index 36c6ed06..e6ed7004 100644
--- a/libgfortran/configure.ac
+++ b/libgfortran/configure.ac
@@ -56,6 +56,9 @@ AM_INIT_AUTOMAKE([1.8.2 no-define foreign no-dependencies -Wall -Wno-portability
 AM_MAINTAINER_MODE
 AM_ENABLE_MULTILIB(, ..)
 
+# Add test for DJGPP
+AM_CONDITIONAL(DJGPP,echo $host | grep msdosdjgpp)
+
 # Handy for debugging:
 #AC_MSG_NOTICE($build / $host / $target / $host_alias / $target_alias); sleep 5
 
diff --git a/libgfortran/io/unix.c b/libgfortran/io/unix.c
index 560047f8..98629c0b 100644
--- a/libgfortran/io/unix.c
+++ b/libgfortran/io/unix.c
@@ -81,6 +81,10 @@ Boston, MA 02110-1301, USA.  */
 #define S_IWOTH 0
 #endif
 
+#ifdef __DJGPP__
+#include <io.h>
+#endif
+
 /* This implementation of stream I/O is based on the paper:
  *
  *  "Exploiting the advantages of mapped files for stream I/O",
@@ -1078,7 +1082,12 @@ tempfile (st_parameter_open *opp)
 
   template = get_mem (strlen (tempdir) + 20);
 
+#ifdef __DJGPP__
+  /* Default filename is too long for DOS */
+  st_sprintf (template, "%s/gfXXXXXX", tempdir);
+#else
   st_sprintf (template, "%s/gfortrantmpXXXXXX", tempdir);
+#endif
 
 #ifdef HAVE_MKSTEMP
 
@@ -1269,6 +1278,13 @@ open_external (st_parameter_open *opp, unit_flags *flags)
       internal_error (&opp->common, "open_external(): Bad action");
     }
 
+#ifdef __DJGPP__
+  if (flags->form == FORM_UNFORMATTED)
+    {
+      setmode (fd, O_BINARY);
+    }
+#endif
+
   return fd_to_stream (fd, prot);
 }
 
diff --git a/libiberty/configure b/libiberty/configure
index 70eb9898..011f5d94 100755
--- a/libiberty/configure
+++ b/libiberty/configure
@@ -957,7 +957,7 @@ esac
     else
       echo "$as_me: WARNING: no configuration information is in $ac_dir" >&2
     fi
-    cd "$ac_popdir"
+    cd $ac_popdir
   done
 fi
 
@@ -2330,7 +2330,8 @@ if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
   cat conftest.err >&5
   echo "$as_me:$LINENO: \$? = $ac_status" >&5
   (exit $ac_status); } &&
-	 { ac_try='test -z "$ac_c_werror_flag"			 || test ! -s conftest.err'
+	 { ac_try='test -z "$ac_c_werror_flag"
+			 || test ! -s conftest.err'
   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
@@ -2388,7 +2389,8 @@ if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
   cat conftest.err >&5
   echo "$as_me:$LINENO: \$? = $ac_status" >&5
   (exit $ac_status); } &&
-	 { ac_try='test -z "$ac_c_werror_flag"			 || test ! -s conftest.err'
+	 { ac_try='test -z "$ac_c_werror_flag"
+			 || test ! -s conftest.err'
   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
@@ -2504,7 +2506,8 @@ if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
   cat conftest.err >&5
   echo "$as_me:$LINENO: \$? = $ac_status" >&5
   (exit $ac_status); } &&
-	 { ac_try='test -z "$ac_c_werror_flag"			 || test ! -s conftest.err'
+	 { ac_try='test -z "$ac_c_werror_flag"
+			 || test ! -s conftest.err'
   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
@@ -2558,7 +2561,8 @@ if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
   cat conftest.err >&5
   echo "$as_me:$LINENO: \$? = $ac_status" >&5
   (exit $ac_status); } &&
-	 { ac_try='test -z "$ac_c_werror_flag"			 || test ! -s conftest.err'
+	 { ac_try='test -z "$ac_c_werror_flag"
+			 || test ! -s conftest.err'
   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
@@ -2603,7 +2607,8 @@ if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
   cat conftest.err >&5
   echo "$as_me:$LINENO: \$? = $ac_status" >&5
   (exit $ac_status); } &&
-	 { ac_try='test -z "$ac_c_werror_flag"			 || test ! -s conftest.err'
+	 { ac_try='test -z "$ac_c_werror_flag"
+			 || test ! -s conftest.err'
   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
@@ -2647,7 +2652,8 @@ if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
   cat conftest.err >&5
   echo "$as_me:$LINENO: \$? = $ac_status" >&5
   (exit $ac_status); } &&
-	 { ac_try='test -z "$ac_c_werror_flag"			 || test ! -s conftest.err'
+	 { ac_try='test -z "$ac_c_werror_flag"
+			 || test ! -s conftest.err'
   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
@@ -3103,7 +3109,8 @@ if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
   cat conftest.err >&5
   echo "$as_me:$LINENO: \$? = $ac_status" >&5
   (exit $ac_status); } &&
-	 { ac_try='test -z "$ac_c_werror_flag"			 || test ! -s conftest.err'
+	 { ac_try='test -z "$ac_c_werror_flag"
+			 || test ! -s conftest.err'
   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
@@ -3163,7 +3170,8 @@ if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
   cat conftest.err >&5
   echo "$as_me:$LINENO: \$? = $ac_status" >&5
   (exit $ac_status); } &&
-	 { ac_try='test -z "$ac_c_werror_flag"			 || test ! -s conftest.err'
+	 { ac_try='test -z "$ac_c_werror_flag"
+			 || test ! -s conftest.err'
   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
@@ -3239,7 +3247,8 @@ if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
   cat conftest.err >&5
   echo "$as_me:$LINENO: \$? = $ac_status" >&5
   (exit $ac_status); } &&
-	 { ac_try='test -z "$ac_c_werror_flag"			 || test ! -s conftest.err'
+	 { ac_try='test -z "$ac_c_werror_flag"
+			 || test ! -s conftest.err'
   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
@@ -3281,7 +3290,8 @@ if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
   cat conftest.err >&5
   echo "$as_me:$LINENO: \$? = $ac_status" >&5
   (exit $ac_status); } &&
-	 { ac_try='test -z "$ac_c_werror_flag"			 || test ! -s conftest.err'
+	 { ac_try='test -z "$ac_c_werror_flag"
+			 || test ! -s conftest.err'
   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
@@ -3338,7 +3348,8 @@ if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
   cat conftest.err >&5
   echo "$as_me:$LINENO: \$? = $ac_status" >&5
   (exit $ac_status); } &&
-	 { ac_try='test -z "$ac_c_werror_flag"			 || test ! -s conftest.err'
+	 { ac_try='test -z "$ac_c_werror_flag"
+			 || test ! -s conftest.err'
   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
@@ -3710,7 +3721,8 @@ if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
   cat conftest.err >&5
   echo "$as_me:$LINENO: \$? = $ac_status" >&5
   (exit $ac_status); } &&
-	 { ac_try='test -z "$ac_c_werror_flag"			 || test ! -s conftest.err'
+	 { ac_try='test -z "$ac_c_werror_flag"
+			 || test ! -s conftest.err'
   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
@@ -3774,7 +3786,8 @@ if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
   cat conftest.err >&5
   echo "$as_me:$LINENO: \$? = $ac_status" >&5
   (exit $ac_status); } &&
-	 { ac_try='test -z "$ac_c_werror_flag"			 || test ! -s conftest.err'
+	 { ac_try='test -z "$ac_c_werror_flag"
+			 || test ! -s conftest.err'
   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
@@ -3835,7 +3848,8 @@ if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
   cat conftest.err >&5
   echo "$as_me:$LINENO: \$? = $ac_status" >&5
   (exit $ac_status); } &&
-	 { ac_try='test -z "$ac_c_werror_flag"			 || test ! -s conftest.err'
+	 { ac_try='test -z "$ac_c_werror_flag"
+			 || test ! -s conftest.err'
   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
@@ -3916,7 +3930,8 @@ if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
   cat conftest.err >&5
   echo "$as_me:$LINENO: \$? = $ac_status" >&5
   (exit $ac_status); } &&
-	 { ac_try='test -z "$ac_c_werror_flag"			 || test ! -s conftest.err'
+	 { ac_try='test -z "$ac_c_werror_flag"
+			 || test ! -s conftest.err'
   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
@@ -4145,7 +4160,8 @@ if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
   cat conftest.err >&5
   echo "$as_me:$LINENO: \$? = $ac_status" >&5
   (exit $ac_status); } &&
-	 { ac_try='test -z "$ac_c_werror_flag"			 || test ! -s conftest.err'
+	 { ac_try='test -z "$ac_c_werror_flag"
+			 || test ! -s conftest.err'
   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
@@ -4207,7 +4223,8 @@ if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
   cat conftest.err >&5
   echo "$as_me:$LINENO: \$? = $ac_status" >&5
   (exit $ac_status); } &&
-	 { ac_try='test -z "$ac_c_werror_flag"			 || test ! -s conftest.err'
+	 { ac_try='test -z "$ac_c_werror_flag"
+			 || test ! -s conftest.err'
   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
@@ -4247,7 +4264,8 @@ if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
   cat conftest.err >&5
   echo "$as_me:$LINENO: \$? = $ac_status" >&5
   (exit $ac_status); } &&
-	 { ac_try='test -z "$ac_c_werror_flag"			 || test ! -s conftest.err'
+	 { ac_try='test -z "$ac_c_werror_flag"
+			 || test ! -s conftest.err'
   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
@@ -4303,7 +4321,8 @@ if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
   cat conftest.err >&5
   echo "$as_me:$LINENO: \$? = $ac_status" >&5
   (exit $ac_status); } &&
-	 { ac_try='test -z "$ac_c_werror_flag"			 || test ! -s conftest.err'
+	 { ac_try='test -z "$ac_c_werror_flag"
+			 || test ! -s conftest.err'
   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
@@ -4343,7 +4362,8 @@ if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
   cat conftest.err >&5
   echo "$as_me:$LINENO: \$? = $ac_status" >&5
   (exit $ac_status); } &&
-	 { ac_try='test -z "$ac_c_werror_flag"			 || test ! -s conftest.err'
+	 { ac_try='test -z "$ac_c_werror_flag"
+			 || test ! -s conftest.err'
   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
@@ -4407,7 +4427,8 @@ if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
   cat conftest.err >&5
   echo "$as_me:$LINENO: \$? = $ac_status" >&5
   (exit $ac_status); } &&
-	 { ac_try='test -z "$ac_c_werror_flag"			 || test ! -s conftest.err'
+	 { ac_try='test -z "$ac_c_werror_flag"
+			 || test ! -s conftest.err'
   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
@@ -4438,8 +4459,10 @@ See \`config.log' for more details." >&2;}
 esac
 else
   if test "$cross_compiling" = yes; then
-  { { echo "$as_me:$LINENO: error: internal error: not reached in cross-compile" >&5
-echo "$as_me: error: internal error: not reached in cross-compile" >&2;}
+  { { echo "$as_me:$LINENO: error: cannot run test program while cross compiling
+See \`config.log' for more details." >&5
+echo "$as_me: error: cannot run test program while cross compiling
+See \`config.log' for more details." >&2;}
    { (exit 1); exit 1; }; }
 else
   cat >conftest.$ac_ext <<_ACEOF
@@ -4552,7 +4575,8 @@ if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
   cat conftest.err >&5
   echo "$as_me:$LINENO: \$? = $ac_status" >&5
   (exit $ac_status); } &&
-	 { ac_try='test -z "$ac_c_werror_flag"			 || test ! -s conftest.err'
+	 { ac_try='test -z "$ac_c_werror_flag"
+			 || test ! -s conftest.err'
   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
@@ -4618,7 +4642,8 @@ if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
   cat conftest.err >&5
   echo "$as_me:$LINENO: \$? = $ac_status" >&5
   (exit $ac_status); } &&
-	 { ac_try='test -z "$ac_c_werror_flag"			 || test ! -s conftest.err'
+	 { ac_try='test -z "$ac_c_werror_flag"
+			 || test ! -s conftest.err'
   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
@@ -4664,7 +4689,8 @@ if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
   cat conftest.err >&5
   echo "$as_me:$LINENO: \$? = $ac_status" >&5
   (exit $ac_status); } &&
-	 { ac_try='test -z "$ac_c_werror_flag"			 || test ! -s conftest.err'
+	 { ac_try='test -z "$ac_c_werror_flag"
+			 || test ! -s conftest.err'
   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
@@ -4710,7 +4736,8 @@ if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
   cat conftest.err >&5
   echo "$as_me:$LINENO: \$? = $ac_status" >&5
   (exit $ac_status); } &&
-	 { ac_try='test -z "$ac_c_werror_flag"			 || test ! -s conftest.err'
+	 { ac_try='test -z "$ac_c_werror_flag"
+			 || test ! -s conftest.err'
   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
@@ -4787,7 +4814,8 @@ if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
   cat conftest.err >&5
   echo "$as_me:$LINENO: \$? = $ac_status" >&5
   (exit $ac_status); } &&
-	 { ac_try='test -z "$ac_c_werror_flag"			 || test ! -s conftest.err'
+	 { ac_try='test -z "$ac_c_werror_flag"
+			 || test ! -s conftest.err'
   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
@@ -5029,7 +5057,8 @@ if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
   cat conftest.err >&5
   echo "$as_me:$LINENO: \$? = $ac_status" >&5
   (exit $ac_status); } &&
-	 { ac_try='test -z "$ac_c_werror_flag"			 || test ! -s conftest.err'
+	 { ac_try='test -z "$ac_c_werror_flag"
+			 || test ! -s conftest.err'
   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
@@ -5093,7 +5122,8 @@ if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
   cat conftest.err >&5
   echo "$as_me:$LINENO: \$? = $ac_status" >&5
   (exit $ac_status); } &&
-	 { ac_try='test -z "$ac_c_werror_flag"			 || test ! -s conftest.err'
+	 { ac_try='test -z "$ac_c_werror_flag"
+			 || test ! -s conftest.err'
   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
@@ -5162,7 +5192,8 @@ if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
   cat conftest.err >&5
   echo "$as_me:$LINENO: \$? = $ac_status" >&5
   (exit $ac_status); } &&
-	 { ac_try='test -z "$ac_c_werror_flag"			 || test ! -s conftest.err'
+	 { ac_try='test -z "$ac_c_werror_flag"
+			 || test ! -s conftest.err'
   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
@@ -5231,7 +5262,8 @@ if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
   cat conftest.err >&5
   echo "$as_me:$LINENO: \$? = $ac_status" >&5
   (exit $ac_status); } &&
-	 { ac_try='test -z "$ac_c_werror_flag"			 || test ! -s conftest.err'
+	 { ac_try='test -z "$ac_c_werror_flag"
+			 || test ! -s conftest.err'
   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
@@ -5300,7 +5332,8 @@ if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
   cat conftest.err >&5
   echo "$as_me:$LINENO: \$? = $ac_status" >&5
   (exit $ac_status); } &&
-	 { ac_try='test -z "$ac_c_werror_flag"			 || test ! -s conftest.err'
+	 { ac_try='test -z "$ac_c_werror_flag"
+			 || test ! -s conftest.err'
   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
@@ -5369,7 +5402,8 @@ if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
   cat conftest.err >&5
   echo "$as_me:$LINENO: \$? = $ac_status" >&5
   (exit $ac_status); } &&
-	 { ac_try='test -z "$ac_c_werror_flag"			 || test ! -s conftest.err'
+	 { ac_try='test -z "$ac_c_werror_flag"
+			 || test ! -s conftest.err'
   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
@@ -5438,7 +5472,8 @@ if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
   cat conftest.err >&5
   echo "$as_me:$LINENO: \$? = $ac_status" >&5
   (exit $ac_status); } &&
-	 { ac_try='test -z "$ac_c_werror_flag"			 || test ! -s conftest.err'
+	 { ac_try='test -z "$ac_c_werror_flag"
+			 || test ! -s conftest.err'
   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
@@ -5864,7 +5899,8 @@ if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
   cat conftest.err >&5
   echo "$as_me:$LINENO: \$? = $ac_status" >&5
   (exit $ac_status); } &&
-	 { ac_try='test -z "$ac_c_werror_flag"			 || test ! -s conftest.err'
+	 { ac_try='test -z "$ac_c_werror_flag"
+			 || test ! -s conftest.err'
   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
@@ -5923,7 +5959,8 @@ if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
   cat conftest.err >&5
   echo "$as_me:$LINENO: \$? = $ac_status" >&5
   (exit $ac_status); } &&
-	 { ac_try='test -z "$ac_c_werror_flag"			 || test ! -s conftest.err'
+	 { ac_try='test -z "$ac_c_werror_flag"
+			 || test ! -s conftest.err'
   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
@@ -6023,7 +6060,8 @@ if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
   cat conftest.err >&5
   echo "$as_me:$LINENO: \$? = $ac_status" >&5
   (exit $ac_status); } &&
-	 { ac_try='test -z "$ac_c_werror_flag"			 || test ! -s conftest.err'
+	 { ac_try='test -z "$ac_c_werror_flag"
+			 || test ! -s conftest.err'
   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
@@ -6161,7 +6199,8 @@ if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
   cat conftest.err >&5
   echo "$as_me:$LINENO: \$? = $ac_status" >&5
   (exit $ac_status); } &&
-	 { ac_try='test -z "$ac_c_werror_flag"			 || test ! -s conftest.err'
+	 { ac_try='test -z "$ac_c_werror_flag"
+			 || test ! -s conftest.err'
   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
@@ -6382,7 +6421,8 @@ if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
   cat conftest.err >&5
   echo "$as_me:$LINENO: \$? = $ac_status" >&5
   (exit $ac_status); } &&
-	 { ac_try='test -z "$ac_c_werror_flag"			 || test ! -s conftest.err'
+	 { ac_try='test -z "$ac_c_werror_flag"
+			 || test ! -s conftest.err'
   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
@@ -6727,7 +6767,8 @@ if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
   cat conftest.err >&5
   echo "$as_me:$LINENO: \$? = $ac_status" >&5
   (exit $ac_status); } &&
-	 { ac_try='test -z "$ac_c_werror_flag"			 || test ! -s conftest.err'
+	 { ac_try='test -z "$ac_c_werror_flag"
+			 || test ! -s conftest.err'
   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
@@ -6838,7 +6879,8 @@ if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
   cat conftest.err >&5
   echo "$as_me:$LINENO: \$? = $ac_status" >&5
   (exit $ac_status); } &&
-	 { ac_try='test -z "$ac_c_werror_flag"			 || test ! -s conftest.err'
+	 { ac_try='test -z "$ac_c_werror_flag"
+			 || test ! -s conftest.err'
   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
@@ -6907,7 +6949,8 @@ if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
   cat conftest.err >&5
   echo "$as_me:$LINENO: \$? = $ac_status" >&5
   (exit $ac_status); } &&
-	 { ac_try='test -z "$ac_c_werror_flag"			 || test ! -s conftest.err'
+	 { ac_try='test -z "$ac_c_werror_flag"
+			 || test ! -s conftest.err'
   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
@@ -6972,7 +7015,8 @@ if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
   cat conftest.err >&5
   echo "$as_me:$LINENO: \$? = $ac_status" >&5
   (exit $ac_status); } &&
-	 { ac_try='test -z "$ac_c_werror_flag"			 || test ! -s conftest.err'
+	 { ac_try='test -z "$ac_c_werror_flag"
+			 || test ! -s conftest.err'
   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
@@ -7068,7 +7112,8 @@ if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
   cat conftest.err >&5
   echo "$as_me:$LINENO: \$? = $ac_status" >&5
   (exit $ac_status); } &&
-	 { ac_try='test -z "$ac_c_werror_flag"			 || test ! -s conftest.err'
+	 { ac_try='test -z "$ac_c_werror_flag"
+			 || test ! -s conftest.err'
   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
@@ -7132,7 +7177,8 @@ if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
   cat conftest.err >&5
   echo "$as_me:$LINENO: \$? = $ac_status" >&5
   (exit $ac_status); } &&
-	 { ac_try='test -z "$ac_c_werror_flag"			 || test ! -s conftest.err'
+	 { ac_try='test -z "$ac_c_werror_flag"
+			 || test ! -s conftest.err'
   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
@@ -7201,7 +7247,8 @@ if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
   cat conftest.err >&5
   echo "$as_me:$LINENO: \$? = $ac_status" >&5
   (exit $ac_status); } &&
-	 { ac_try='test -z "$ac_c_werror_flag"			 || test ! -s conftest.err'
+	 { ac_try='test -z "$ac_c_werror_flag"
+			 || test ! -s conftest.err'
   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
@@ -7270,7 +7317,8 @@ if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
   cat conftest.err >&5
   echo "$as_me:$LINENO: \$? = $ac_status" >&5
   (exit $ac_status); } &&
-	 { ac_try='test -z "$ac_c_werror_flag"			 || test ! -s conftest.err'
+	 { ac_try='test -z "$ac_c_werror_flag"
+			 || test ! -s conftest.err'
   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
@@ -7339,7 +7387,8 @@ if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
   cat conftest.err >&5
   echo "$as_me:$LINENO: \$? = $ac_status" >&5
   (exit $ac_status); } &&
-	 { ac_try='test -z "$ac_c_werror_flag"			 || test ! -s conftest.err'
+	 { ac_try='test -z "$ac_c_werror_flag"
+			 || test ! -s conftest.err'
   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
@@ -7408,7 +7457,8 @@ if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
   cat conftest.err >&5
   echo "$as_me:$LINENO: \$? = $ac_status" >&5
   (exit $ac_status); } &&
-	 { ac_try='test -z "$ac_c_werror_flag"			 || test ! -s conftest.err'
+	 { ac_try='test -z "$ac_c_werror_flag"
+			 || test ! -s conftest.err'
   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
@@ -7477,7 +7527,8 @@ if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
   cat conftest.err >&5
   echo "$as_me:$LINENO: \$? = $ac_status" >&5
   (exit $ac_status); } &&
-	 { ac_try='test -z "$ac_c_werror_flag"			 || test ! -s conftest.err'
+	 { ac_try='test -z "$ac_c_werror_flag"
+			 || test ! -s conftest.err'
   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
@@ -7548,7 +7599,8 @@ if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
   cat conftest.err >&5
   echo "$as_me:$LINENO: \$? = $ac_status" >&5
   (exit $ac_status); } &&
-	 { ac_try='test -z "$ac_c_werror_flag"			 || test ! -s conftest.err'
+	 { ac_try='test -z "$ac_c_werror_flag"
+			 || test ! -s conftest.err'
   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
@@ -7617,7 +7669,8 @@ if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
   cat conftest.err >&5
   echo "$as_me:$LINENO: \$? = $ac_status" >&5
   (exit $ac_status); } &&
-	 { ac_try='test -z "$ac_c_werror_flag"			 || test ! -s conftest.err'
+	 { ac_try='test -z "$ac_c_werror_flag"
+			 || test ! -s conftest.err'
   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
@@ -7686,7 +7739,8 @@ if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
   cat conftest.err >&5
   echo "$as_me:$LINENO: \$? = $ac_status" >&5
   (exit $ac_status); } &&
-	 { ac_try='test -z "$ac_c_werror_flag"			 || test ! -s conftest.err'
+	 { ac_try='test -z "$ac_c_werror_flag"
+			 || test ! -s conftest.err'
   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
@@ -7755,7 +7809,8 @@ if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
   cat conftest.err >&5
   echo "$as_me:$LINENO: \$? = $ac_status" >&5
   (exit $ac_status); } &&
-	 { ac_try='test -z "$ac_c_werror_flag"			 || test ! -s conftest.err'
+	 { ac_try='test -z "$ac_c_werror_flag"
+			 || test ! -s conftest.err'
   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
@@ -7824,7 +7879,8 @@ if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
   cat conftest.err >&5
   echo "$as_me:$LINENO: \$? = $ac_status" >&5
   (exit $ac_status); } &&
-	 { ac_try='test -z "$ac_c_werror_flag"			 || test ! -s conftest.err'
+	 { ac_try='test -z "$ac_c_werror_flag"
+			 || test ! -s conftest.err'
   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
@@ -7893,7 +7949,8 @@ if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
   cat conftest.err >&5
   echo "$as_me:$LINENO: \$? = $ac_status" >&5
   (exit $ac_status); } &&
-	 { ac_try='test -z "$ac_c_werror_flag"			 || test ! -s conftest.err'
+	 { ac_try='test -z "$ac_c_werror_flag"
+			 || test ! -s conftest.err'
   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
@@ -7964,7 +8021,8 @@ if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
   cat conftest.err >&5
   echo "$as_me:$LINENO: \$? = $ac_status" >&5
   (exit $ac_status); } &&
-	 { ac_try='test -z "$ac_c_werror_flag"			 || test ! -s conftest.err'
+	 { ac_try='test -z "$ac_c_werror_flag"
+			 || test ! -s conftest.err'
   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
@@ -8047,7 +8105,8 @@ if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
   cat conftest.err >&5
   echo "$as_me:$LINENO: \$? = $ac_status" >&5
   (exit $ac_status); } &&
-	 { ac_try='test -z "$ac_c_werror_flag"			 || test ! -s conftest.err'
+	 { ac_try='test -z "$ac_c_werror_flag"
+			 || test ! -s conftest.err'
   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
@@ -8219,7 +8278,8 @@ if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
   cat conftest.err >&5
   echo "$as_me:$LINENO: \$? = $ac_status" >&5
   (exit $ac_status); } &&
-	 { ac_try='test -z "$ac_c_werror_flag"			 || test ! -s conftest.err'
+	 { ac_try='test -z "$ac_c_werror_flag"
+			 || test ! -s conftest.err'
   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
@@ -9407,6 +9467,11 @@ esac
   *) ac_INSTALL=$ac_top_builddir$INSTALL ;;
   esac
 
+  if test x"$ac_file" != x-; then
+    { echo "$as_me:$LINENO: creating $ac_file" >&5
+echo "$as_me: creating $ac_file" >&6;}
+    rm -f "$ac_file"
+  fi
   # Let's still pretend it is `configure' which instantiates (i.e., don't
   # use $as_me), people would be surprised to read:
   #    /* config.h.  Generated by config.status.  */
@@ -9445,12 +9510,6 @@ echo "$as_me: error: cannot find input file: $f" >&2;}
 	 fi;;
       esac
     done` || { (exit 1); exit 1; }
-
-  if test x"$ac_file" != x-; then
-    { echo "$as_me:$LINENO: creating $ac_file" >&5
-echo "$as_me: creating $ac_file" >&6;}
-    rm -f "$ac_file"
-  fi
 _ACEOF
 cat >>$CONFIG_STATUS <<_ACEOF
   sed "$ac_vpsub
diff --git a/libiberty/make-relative-prefix.c b/libiberty/make-relative-prefix.c
index 66ddcaa4..280542de 100644
--- a/libiberty/make-relative-prefix.c
+++ b/libiberty/make-relative-prefix.c
@@ -78,6 +78,7 @@ relative prefix can be found, return @code{NULL}.
 #  define HAVE_DOS_BASED_FILE_SYSTEM
 #  define HAVE_HOST_EXECUTABLE_SUFFIX
 #  define HOST_EXECUTABLE_SUFFIX ".exe"
+#  define FILENAME_COMPARE strcasecmp
 #  ifndef DIR_SEPARATOR_2 
 #    define DIR_SEPARATOR_2 '\\'
 #  endif
@@ -93,6 +94,10 @@ relative prefix can be found, return @code{NULL}.
 	(((ch) == DIR_SEPARATOR) || ((ch) == DIR_SEPARATOR_2))
 #endif
 
+#ifndef FILENAME_COMPARE
+#  define FILENAME_COMPARE strcmp
+#endif
+
 #define DIR_UP ".."
 
 static char *save_string (const char *, int);
@@ -310,7 +315,7 @@ make_relative_prefix (const char *progname,
     {
       for (i = 0; i < bin_num; i++)
 	{
-	  if (strcmp (prog_dirs[i], bin_dirs[i]) != 0)
+	  if (FILENAME_COMPARE (prog_dirs[i], bin_dirs[i]) != 0)
 	    break;
 	}
 
@@ -335,7 +340,7 @@ make_relative_prefix (const char *progname,
   n = (prefix_num < bin_num) ? prefix_num : bin_num;
   for (common = 0; common < n; common++)
     {
-      if (strcmp (bin_dirs[common], prefix_dirs[common]) != 0)
+      if (FILENAME_COMPARE (bin_dirs[common], prefix_dirs[common]) != 0)
 	break;
     }
 
diff --git a/libiberty/make-temp-file.c b/libiberty/make-temp-file.c
index 5e21414a..efb28319 100644
--- a/libiberty/make-temp-file.c
+++ b/libiberty/make-temp-file.c
@@ -50,6 +50,29 @@ extern int mkstemps (char *, int);
 #define DIR_SEPARATOR '/'
 #endif
 
+#if defined (_WIN32) || defined (__MSDOS__) \
+    || defined (__DJGPP__) || defined (__OS2__)
+#  define HAVE_DOS_BASED_FILE_SYSTEM
+#  ifndef DIR_SEPARATOR_2 
+#    define DIR_SEPARATOR_2 '\\'
+#  endif
+#endif
+
+/* Define IS_DIR_SEPARATOR. VMS uses '::', ':', '[...]' and '<...>' to
+   separate the different components of a file specification.  It's a
+   bit of a stretch to call ':', ']' and '>' directory separators, so
+   just define the test to find the file name component.  */
+#ifdef VMS
+#  define IS_DIR_SEPARATOR(ch) ((ch) == ':' || (ch) == ']' || (ch) == '>')
+#else
+#  ifndef DIR_SEPARATOR_2
+#    define IS_DIR_SEPARATOR(ch) ((ch) == DIR_SEPARATOR)
+#  else
+#    define IS_DIR_SEPARATOR(ch) \
+	(((ch) == DIR_SEPARATOR) || ((ch) == DIR_SEPARATOR_2))
+#  endif
+#endif
+
 /* Name of temporary file.
    mktemp requires 6 trailing X's.  */
 #define TEMP_FILE "ccXXXXXX"
@@ -125,7 +148,8 @@ choose_tmpdir (void)
   len = strlen (base);
   tmpdir = XNEWVEC (char, len + 2);
   strcpy (tmpdir, base);
-  tmpdir[len] = DIR_SEPARATOR;
+  if (len>0 && !IS_DIR_SEPARATOR(tmpdir[len-1]))   
+      tmpdir[len] = DIR_SEPARATOR;
   tmpdir[len+1] = '\0';
 
   memoized_tmpdir = tmpdir;
diff --git a/libobjc/Makefile.in b/libobjc/Makefile.in
index aec11f7c..1d762f6c 100644
--- a/libobjc/Makefile.in
+++ b/libobjc/Makefile.in
@@ -40,6 +40,8 @@ toplevel_srcdir = @toplevel_srcdir@
 toolexecdir = @toolexecdir@
 # Toolexecdir is used only by toolexeclibdir
 toolexeclibdir = @toolexeclibdir@
+# Editted (if neccessary) GCC version string
+gcc_version_dir = @gcc_version_dir@
 
 includedirname = @includedirname@
 libext = @libext@
@@ -49,7 +51,7 @@ extra_ldflags_libobjc = @extra_ldflags_libobjc@
 top_builddir = .
 
 libdir = $(exec_prefix)/lib
-libsubdir = $(libdir)/gcc/$(target_noncanonical)/$(gcc_version)
+libsubdir = $(libdir)/gcc/$(target_noncanonical)/$(gcc_version_dir)
 
 # Multilib support variables.
 MULTISRCTOP =
diff --git a/libobjc/configure b/libobjc/configure
index ca1bfe95..cee71cc0 100755
--- a/libobjc/configure
+++ b/libobjc/configure
@@ -309,7 +309,7 @@ ac_includes_default="\
 # include <unistd.h>
 #endif"
 
-ac_subst_vars='SHELL PATH_SEPARATOR PACKAGE_NAME PACKAGE_TARNAME PACKAGE_VERSION PACKAGE_STRING PACKAGE_BUGREPORT exec_prefix prefix program_transform_name bindir sbindir libexecdir datadir sysconfdir sharedstatedir localstatedir libdir includedir oldincludedir infodir mandir build_alias host_alias target_alias DEFS ECHO_C ECHO_N ECHO_T LIBS build build_cpu build_vendor build_os build_subdir host_subdir target_subdir VERSION OBJC_BOEHM_GC OBJC_BOEHM_GC_INCLUDES toplevel_srcdir host host_cpu host_vendor host_os target target_cpu target_vendor target_os target_noncanonical glibcpp_srcdir toolexecdir toolexeclibdir includedirname libext CC ac_ct_CC EXEEXT OBJEXT extra_ldflags_libobjc CFLAGS AS ac_ct_AS AR ac_ct_AR RANLIB ac_ct_RANLIB INSTALL_PROGRAM INSTALL_SCRIPT INSTALL_DATA MAINTAINER_MODE_TRUE MAINTAINER_MODE_FALSE MAINT LN_S STRIP ac_ct_STRIP LIBTOOL SET_MAKE CPP CPPFLAGS EGREP LIBOBJS LTLIBOBJS'
+ac_subst_vars='SHELL PATH_SEPARATOR PACKAGE_NAME PACKAGE_TARNAME PACKAGE_VERSION PACKAGE_STRING PACKAGE_BUGREPORT exec_prefix prefix program_transform_name bindir sbindir libexecdir datadir sysconfdir sharedstatedir localstatedir libdir includedir oldincludedir infodir mandir build_alias host_alias target_alias DEFS ECHO_C ECHO_N ECHO_T LIBS build build_cpu build_vendor build_os build_subdir host_subdir target_subdir VERSION OBJC_BOEHM_GC OBJC_BOEHM_GC_INCLUDES toplevel_srcdir host host_cpu host_vendor host_os target target_cpu target_vendor target_os target_noncanonical glibcpp_srcdir toolexecdir toolexeclibdir includedirname libext CC ac_ct_CC EXEEXT OBJEXT extra_ldflags_libobjc CFLAGS AS ac_ct_AS AR ac_ct_AR RANLIB ac_ct_RANLIB INSTALL_PROGRAM INSTALL_SCRIPT INSTALL_DATA MAINTAINER_MODE_TRUE MAINTAINER_MODE_FALSE MAINT LN_S STRIP ac_ct_STRIP LIBTOOL SET_MAKE CPP CPPFLAGS EGREP gcc_version_dir LIBOBJS LTLIBOBJS'
 ac_subst_files=''
 
 # Initialize some variables set by options.
@@ -5265,6 +5265,19 @@ echo "${ECHO_T}$ac_exception_model_name" >&6
           ac_config_commands="$ac_config_commands default"
 
 
+# For DJGPP there should not be more than 1 dot. Therefore edit
+# version in case of DJGPP
+case $build in
+	i?86-*-msdosdjgpp*)
+		gcc_version_dir='$(shell echo $(gcc_version) | sed -e "s:\.::2g")'
+		;;
+
+	* )
+		gcc_version_dir='$(gcc_version)'
+		;;
+esac
+
+
 cat >confcache <<\_ACEOF
 # This file is a shell script that caches the results of configure
 # tests run on this system so they can be shared between configure
@@ -5955,6 +5968,7 @@ s,@SET_MAKE@,$SET_MAKE,;t t
 s,@CPP@,$CPP,;t t
 s,@CPPFLAGS@,$CPPFLAGS,;t t
 s,@EGREP@,$EGREP,;t t
+s,@gcc_version_dir@,$gcc_version_dir,;t t
 s,@LIBOBJS@,$LIBOBJS,;t t
 s,@LTLIBOBJS@,$LTLIBOBJS,;t t
 CEOF
diff --git a/libobjc/configure.ac b/libobjc/configure.ac
index 86d9726b..66c7920d 100644
--- a/libobjc/configure.ac
+++ b/libobjc/configure.ac
@@ -322,4 +322,17 @@ CONFIG_SHELL=${CONFIG_SHELL-/bin/sh}
 ORIGINAL_LD_FOR_MULTILIBS="${ORIGINAL_LD_FOR_MULTILIBS}"
 ]])
 
+# For DJGPP there should not be more than 1 dot. Therefore edit
+# version in case of DJGPP
+[case $build in
+	i?86-*-msdosdjgpp*)
+		gcc_version_dir='$(shell echo $(gcc_version) | sed -e "s:\.::2g")'
+		;;
+
+	* )
+		gcc_version_dir='$(gcc_version)'
+		;;
+esac]
+AC_SUBST(gcc_version_dir)
+
 AC_OUTPUT
diff --git a/libssp/Makefile.am b/libssp/Makefile.am
index 1500e251..23258f13 100644
--- a/libssp/Makefile.am
+++ b/libssp/Makefile.am
@@ -24,7 +24,7 @@ AM_CFLAGS = -Wall
 toolexeclib_LTLIBRARIES = libssp.la libssp_nonshared.la
 
 target_noncanonical = @target_noncanonical@
-libsubincludedir = $(libdir)/gcc/$(target_noncanonical)/$(gcc_version)/include
+libsubincludedir = $(libdir)/gcc/$(target_noncanonical)/$(gcc_version_dir)/include
 nobase_libsubinclude_HEADERS = ssp/ssp.h ssp/string.h ssp/stdio.h ssp/unistd.h
 
 libssp_la_SOURCES = \
diff --git a/libssp/Makefile.in b/libssp/Makefile.in
index 95dbddbf..2aa40061 100644
--- a/libssp/Makefile.in
+++ b/libssp/Makefile.in
@@ -1,4 +1,4 @@
-# Makefile.in generated by automake 1.9.5 from Makefile.am.
+# Makefile.in generated by automake 1.9.6 from Makefile.am.
 # @configure_input@
 
 # Copyright (C) 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002,
@@ -15,8 +15,6 @@
 @SET_MAKE@
 
 
-SOURCES = $(libssp_la_SOURCES) $(libssp_nonshared_la_SOURCES)
-
 srcdir = @srcdir@
 top_srcdir = @top_srcdir@
 VPATH = @srcdir@
@@ -182,6 +180,7 @@ datadir = @datadir@
 enable_shared = @enable_shared@
 enable_static = @enable_static@
 exec_prefix = @exec_prefix@
+gcc_version_dir = @gcc_version_dir@
 host = @host@
 host_alias = @host_alias@
 host_cpu = @host_cpu@
@@ -223,7 +222,7 @@ gcc_version := $(shell cat $(top_srcdir)/../gcc/BASE-VER)
 @LIBSSP_USE_SYMVER_TRUE@version_dep = $(srcdir)/ssp.map
 AM_CFLAGS = -Wall
 toolexeclib_LTLIBRARIES = libssp.la libssp_nonshared.la
-libsubincludedir = $(libdir)/gcc/$(target_noncanonical)/$(gcc_version)/include
+libsubincludedir = $(libdir)/gcc/$(target_noncanonical)/$(gcc_version_dir)/include
 nobase_libsubinclude_HEADERS = ssp/ssp.h ssp/string.h ssp/stdio.h ssp/unistd.h
 libssp_la_SOURCES = \
 	ssp.c gets-chk.c memcpy-chk.c memmove-chk.c mempcpy-chk.c \
diff --git a/libssp/aclocal.m4 b/libssp/aclocal.m4
index 7777acfc..bee813da 100644
--- a/libssp/aclocal.m4
+++ b/libssp/aclocal.m4
@@ -1,4 +1,4 @@
-# generated automatically by aclocal 1.9.5 -*- Autoconf -*-
+# generated automatically by aclocal 1.9.6 -*- Autoconf -*-
 
 # Copyright (C) 1996, 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004,
 # 2005  Free Software Foundation, Inc.
@@ -28,7 +28,7 @@ AC_DEFUN([AM_AUTOMAKE_VERSION], [am__api_version="1.9"])
 # Call AM_AUTOMAKE_VERSION so it can be traced.
 # This function is AC_REQUIREd by AC_INIT_AUTOMAKE.
 AC_DEFUN([AM_SET_CURRENT_AUTOMAKE_VERSION],
-	 [AM_AUTOMAKE_VERSION([1.9.5])])
+	 [AM_AUTOMAKE_VERSION([1.9.6])])
 
 # AM_AUX_DIR_EXPAND                                         -*- Autoconf -*-
 
diff --git a/libssp/configure b/libssp/configure
index dbb7abbd..f0996f6f 100755
--- a/libssp/configure
+++ b/libssp/configure
@@ -309,7 +309,7 @@ ac_includes_default="\
 # include <unistd.h>
 #endif"
 
-ac_subst_vars='SHELL PATH_SEPARATOR PACKAGE_NAME PACKAGE_TARNAME PACKAGE_VERSION PACKAGE_STRING PACKAGE_BUGREPORT exec_prefix prefix program_transform_name bindir sbindir libexecdir datadir sysconfdir sharedstatedir localstatedir libdir includedir oldincludedir infodir mandir build_alias host_alias target_alias DEFS ECHO_C ECHO_N ECHO_T LIBS build build_cpu build_vendor build_os host host_cpu host_vendor host_os target target_cpu target_vendor target_os target_noncanonical INSTALL_PROGRAM INSTALL_SCRIPT INSTALL_DATA CYGPATH_W PACKAGE VERSION ACLOCAL AUTOCONF AUTOMAKE AUTOHEADER MAKEINFO install_sh STRIP ac_ct_STRIP INSTALL_STRIP_PROGRAM mkdir_p AWK SET_MAKE am__leading_dot AMTAR am__tar am__untar MAINTAINER_MODE_TRUE MAINTAINER_MODE_FALSE MAINT multi_basedir CC ac_ct_CC EXEEXT OBJEXT DEPDIR am__include am__quote AMDEP_TRUE AMDEP_FALSE AMDEPBACKSLASH CCDEPMODE am__fastdepCC_TRUE am__fastdepCC_FALSE CFLAGS CPP CPPFLAGS LIBSSP_USE_SYMVER_TRUE LIBSSP_USE_SYMVER_FALSE EGREP ssp_have_usable_vsnprintf LN_S RANLIB ac_ct_RANLIB LIBTOOL enable_shared enable_static toolexecdir toolexeclibdir LIBOBJS LTLIBOBJS'
+ac_subst_vars='SHELL PATH_SEPARATOR PACKAGE_NAME PACKAGE_TARNAME PACKAGE_VERSION PACKAGE_STRING PACKAGE_BUGREPORT exec_prefix prefix program_transform_name bindir sbindir libexecdir datadir sysconfdir sharedstatedir localstatedir libdir includedir oldincludedir infodir mandir build_alias host_alias target_alias DEFS ECHO_C ECHO_N ECHO_T LIBS build build_cpu build_vendor build_os host host_cpu host_vendor host_os target target_cpu target_vendor target_os target_noncanonical INSTALL_PROGRAM INSTALL_SCRIPT INSTALL_DATA CYGPATH_W PACKAGE VERSION ACLOCAL AUTOCONF AUTOMAKE AUTOHEADER MAKEINFO install_sh STRIP ac_ct_STRIP INSTALL_STRIP_PROGRAM mkdir_p AWK SET_MAKE am__leading_dot AMTAR am__tar am__untar MAINTAINER_MODE_TRUE MAINTAINER_MODE_FALSE MAINT multi_basedir CC ac_ct_CC EXEEXT OBJEXT DEPDIR am__include am__quote AMDEP_TRUE AMDEP_FALSE AMDEPBACKSLASH CCDEPMODE am__fastdepCC_TRUE am__fastdepCC_FALSE CFLAGS CPP CPPFLAGS LIBSSP_USE_SYMVER_TRUE LIBSSP_USE_SYMVER_FALSE EGREP ssp_have_usable_vsnprintf LN_S RANLIB ac_ct_RANLIB LIBTOOL enable_shared enable_static toolexecdir toolexeclibdir gcc_version_dir LIBOBJS LTLIBOBJS'
 ac_subst_files=''
 
 # Initialize some variables set by options.
@@ -5259,6 +5259,19 @@ else
   multilib_arg=
 fi
 
+# For DJGPP there should not be more than 1 dot. Therefore edit
+# version in case of DJGPP
+case $build in
+       i?86-*-msdosdjgpp*)
+               gcc_version_dir='$(shell echo $(gcc_version) | sed -e "s:\.::2g")'
+               ;;
+
+       * )
+               gcc_version_dir='$(gcc_version)'
+               ;;
+esac
+
+
                     ac_config_files="$ac_config_files Makefile ssp/ssp.h"
 
 cat >confcache <<\_ACEOF
@@ -5992,6 +6005,7 @@ s,@enable_shared@,$enable_shared,;t t
 s,@enable_static@,$enable_static,;t t
 s,@toolexecdir@,$toolexecdir,;t t
 s,@toolexeclibdir@,$toolexeclibdir,;t t
+s,@gcc_version_dir@,$gcc_version_dir,;t t
 s,@LIBOBJS@,$LIBOBJS,;t t
 s,@LTLIBOBJS@,$LTLIBOBJS,;t t
 CEOF
diff --git a/libssp/configure.ac b/libssp/configure.ac
index 99b4edfe..9f19832a 100644
--- a/libssp/configure.ac
+++ b/libssp/configure.ac
@@ -170,5 +170,18 @@ else
   multilib_arg=
 fi
 
+# For DJGPP there should not be more than 1 dot. Therefore edit
+# version in case of DJGPP
+[case $build in
+       i?86-*-msdosdjgpp*)
+               gcc_version_dir='$(shell echo $(gcc_version) | sed -e "s:\.::2g")'
+               ;;
+
+       * )
+               gcc_version_dir='$(gcc_version)'
+               ;;
+esac]
+AC_SUBST(gcc_version_dir)
+
 AC_CONFIG_FILES([Makefile ssp/ssp.h])
 AC_OUTPUT
diff --git a/libstdc++-v3/Makefile.in b/libstdc++-v3/Makefile.in
index 5d5e744d..a241ab66 100644
--- a/libstdc++-v3/Makefile.in
+++ b/libstdc++-v3/Makefile.in
@@ -127,6 +127,8 @@ CYGPATH_W = @CYGPATH_W@
 C_INCLUDE_DIR = @C_INCLUDE_DIR@
 DEBUG_FLAGS = @DEBUG_FLAGS@
 DEFS = @DEFS@
+DJGPP_FALSE = @DJGPP_FALSE@
+DJGPP_TRUE = @DJGPP_TRUE@
 ECHO_C = @ECHO_C@
 ECHO_N = @ECHO_N@
 ECHO_T = @ECHO_T@
diff --git a/libstdc++-v3/acinclude.m4 b/libstdc++-v3/acinclude.m4
index 69c44329..cbe6ee34 100644
--- a/libstdc++-v3/acinclude.m4
+++ b/libstdc++-v3/acinclude.m4
@@ -688,9 +688,23 @@ AC_DEFUN([GLIBCXX_EXPORT_INSTALL_INFO], [
     [version_specific_libs=no])
   AC_MSG_RESULT($version_specific_libs)
 
+  # Convert GCC version string (to be used as directory name)
+  # Does nothing except for DJGPP
+  case "$build" in
+    *-msdosdjgpp*)
+       libstdcxx_incdir_base=cxx
+       gcc_version_alias='$(shell echo $(gcc_version) | sed -e "s:\.::2g")'
+       ;;
+    *)
+       libstdcxx_incdir_base=c++
+       gcc_version_alias='$(gcc_version)'
+       ;;
+  esac
+
+
   # Default case for install directory for include files.
   if test $version_specific_libs = no && test $gxx_include_dir = no; then
-    gxx_include_dir='${prefix}/include/c++/${gcc_version}'
+      gxx_include_dir='${prefix}'/include/${libstdcxx_incdir_base}/${gcc_version_alias}
   fi
 
   # Version-specific runtime libs processing.
@@ -700,10 +714,10 @@ AC_DEFUN([GLIBCXX_EXPORT_INSTALL_INFO], [
     # is selected.  FIXME: these variables are misnamed, there are
     # no executables installed in _toolexecdir or _toolexeclibdir.
     if test x"$gxx_include_dir" = x"no"; then
-      gxx_include_dir='${libdir}/gcc/${host_alias}/${gcc_version}/include/c++'
+      gxx_include_dir='${libdir}/gcc/${host_alias}/'$gcc_version_alias/include/${libstdcxx_incdir_base}
     fi
     glibcxx_toolexecdir='${libdir}/gcc/${host_alias}'
-    glibcxx_toolexeclibdir='${toolexecdir}/${gcc_version}$(MULTISUBDIR)'
+    glibcxx_toolexeclibdir='${toolexecdir}/'$gcc_version_alias'$(MULTISUBDIR)'
   fi
 
   # Calculate glibcxx_toolexecdir, glibcxx_toolexeclibdir
diff --git a/libstdc++-v3/configure b/libstdc++-v3/configure
index 0c0a5d3d..12df3588 100755
--- a/libstdc++-v3/configure
+++ b/libstdc++-v3/configure
@@ -309,7 +309,7 @@ ac_includes_default="\
 # include <unistd.h>
 #endif"
 
-ac_subst_vars='SHELL PATH_SEPARATOR PACKAGE_NAME PACKAGE_TARNAME PACKAGE_VERSION PACKAGE_STRING PACKAGE_BUGREPORT exec_prefix prefix program_transform_name bindir sbindir libexecdir datadir sysconfdir sharedstatedir localstatedir libdir includedir oldincludedir infodir mandir build_alias host_alias target_alias DEFS ECHO_C ECHO_N ECHO_T LIBS libtool_VERSION multi_basedir build build_cpu build_vendor build_os host host_cpu host_vendor host_os target target_cpu target_vendor target_os INSTALL_PROGRAM INSTALL_SCRIPT INSTALL_DATA CYGPATH_W PACKAGE VERSION ACLOCAL AUTOCONF AUTOMAKE AUTOHEADER MAKEINFO install_sh STRIP ac_ct_STRIP INSTALL_STRIP_PROGRAM mkdir_p AWK SET_MAKE am__leading_dot AMTAR am__tar am__untar glibcxx_builddir glibcxx_srcdir toplevel_srcdir CC ac_ct_CC EXEEXT OBJEXT CXX ac_ct_CXX CFLAGS CXXFLAGS LN_S AS ac_ct_AS AR ac_ct_AR RANLIB ac_ct_RANLIB MAINTAINER_MODE_TRUE MAINTAINER_MODE_FALSE MAINT LIBTOOL CXXCPP CPPFLAGS enable_shared enable_static GLIBCXX_HOSTED_TRUE GLIBCXX_HOSTED_FALSE GLIBCXX_BUILD_PCH_TRUE GLIBCXX_BUILD_PCH_FALSE glibcxx_PCHFLAGS CSTDIO_H BASIC_FILE_H BASIC_FILE_CC CPP EGREP check_msgfmt glibcxx_MOFILES glibcxx_POFILES glibcxx_localedir USE_NLS CLOCALE_H CMESSAGES_H CCODECVT_CC CCOLLATE_CC CCTYPE_CC CMESSAGES_CC CMONEY_CC CNUMERIC_CC CTIME_H CTIME_CC CLOCALE_CC CLOCALE_INTERNAL_H ALLOCATOR_H ALLOCATOR_NAME C_INCLUDE_DIR GLIBCXX_C_HEADERS_C_TRUE GLIBCXX_C_HEADERS_C_FALSE GLIBCXX_C_HEADERS_C_STD_TRUE GLIBCXX_C_HEADERS_C_STD_FALSE GLIBCXX_C_HEADERS_COMPATIBILITY_TRUE GLIBCXX_C_HEADERS_COMPATIBILITY_FALSE DEBUG_FLAGS GLIBCXX_BUILD_DEBUG_TRUE GLIBCXX_BUILD_DEBUG_FALSE EXTRA_CXX_FLAGS glibcxx_thread_h WERROR SECTION_FLAGS SECTION_LDFLAGS OPT_LDFLAGS LIBMATHOBJS LIBICONV SYMVER_MAP port_specific_symbol_files ENABLE_SYMVERS_GNU_TRUE ENABLE_SYMVERS_GNU_FALSE ENABLE_SYMVERS_DARWIN_EXPORT_TRUE ENABLE_SYMVERS_DARWIN_EXPORT_FALSE baseline_dir ATOMICITY_SRCDIR ATOMIC_WORD_SRCDIR CPU_DEFINES_SRCDIR ABI_TWEAKS_SRCDIR OS_INC_SRCDIR glibcxx_prefixdir gxx_include_dir glibcxx_toolexecdir glibcxx_toolexeclibdir GLIBCXX_INCLUDES TOPLEVEL_INCLUDES OPTIMIZE_CXXFLAGS WARN_FLAGS LIBSUPCXX_PICFLAGS LIBOBJS LTLIBOBJS'
+ac_subst_vars='SHELL PATH_SEPARATOR PACKAGE_NAME PACKAGE_TARNAME PACKAGE_VERSION PACKAGE_STRING PACKAGE_BUGREPORT exec_prefix prefix program_transform_name bindir sbindir libexecdir datadir sysconfdir sharedstatedir localstatedir libdir includedir oldincludedir infodir mandir build_alias host_alias target_alias DEFS ECHO_C ECHO_N ECHO_T LIBS libtool_VERSION multi_basedir build build_cpu build_vendor build_os host host_cpu host_vendor host_os target target_cpu target_vendor target_os INSTALL_PROGRAM INSTALL_SCRIPT INSTALL_DATA CYGPATH_W PACKAGE VERSION ACLOCAL AUTOCONF AUTOMAKE AUTOHEADER MAKEINFO install_sh STRIP ac_ct_STRIP INSTALL_STRIP_PROGRAM mkdir_p AWK SET_MAKE am__leading_dot AMTAR am__tar am__untar DJGPP_TRUE DJGPP_FALSE glibcxx_builddir glibcxx_srcdir toplevel_srcdir CC ac_ct_CC EXEEXT OBJEXT CXX ac_ct_CXX CFLAGS CXXFLAGS LN_S AS ac_ct_AS AR ac_ct_AR RANLIB ac_ct_RANLIB MAINTAINER_MODE_TRUE MAINTAINER_MODE_FALSE MAINT LIBTOOL CXXCPP CPPFLAGS enable_shared enable_static GLIBCXX_HOSTED_TRUE GLIBCXX_HOSTED_FALSE GLIBCXX_BUILD_PCH_TRUE GLIBCXX_BUILD_PCH_FALSE glibcxx_PCHFLAGS CSTDIO_H BASIC_FILE_H BASIC_FILE_CC CPP EGREP check_msgfmt glibcxx_MOFILES glibcxx_POFILES glibcxx_localedir USE_NLS CLOCALE_H CMESSAGES_H CCODECVT_CC CCOLLATE_CC CCTYPE_CC CMESSAGES_CC CMONEY_CC CNUMERIC_CC CTIME_H CTIME_CC CLOCALE_CC CLOCALE_INTERNAL_H ALLOCATOR_H ALLOCATOR_NAME C_INCLUDE_DIR GLIBCXX_C_HEADERS_C_TRUE GLIBCXX_C_HEADERS_C_FALSE GLIBCXX_C_HEADERS_C_STD_TRUE GLIBCXX_C_HEADERS_C_STD_FALSE GLIBCXX_C_HEADERS_COMPATIBILITY_TRUE GLIBCXX_C_HEADERS_COMPATIBILITY_FALSE DEBUG_FLAGS GLIBCXX_BUILD_DEBUG_TRUE GLIBCXX_BUILD_DEBUG_FALSE EXTRA_CXX_FLAGS glibcxx_thread_h WERROR SECTION_FLAGS SECTION_LDFLAGS OPT_LDFLAGS LIBMATHOBJS LIBICONV SYMVER_MAP port_specific_symbol_files ENABLE_SYMVERS_GNU_TRUE ENABLE_SYMVERS_GNU_FALSE ENABLE_SYMVERS_DARWIN_EXPORT_TRUE ENABLE_SYMVERS_DARWIN_EXPORT_FALSE baseline_dir ATOMICITY_SRCDIR ATOMIC_WORD_SRCDIR CPU_DEFINES_SRCDIR ABI_TWEAKS_SRCDIR OS_INC_SRCDIR glibcxx_prefixdir gxx_include_dir glibcxx_toolexecdir glibcxx_toolexeclibdir GLIBCXX_INCLUDES TOPLEVEL_INCLUDES OPTIMIZE_CXXFLAGS WARN_FLAGS LIBSUPCXX_PICFLAGS LIBOBJS LTLIBOBJS'
 ac_subst_files=''
 
 # Initialize some variables set by options.
@@ -1985,6 +1985,18 @@ am__tar='${AMTAR} chof - "$$tardir"'; am__untar='${AMTAR} xf -'
 
 
 
+# Add test for DJGPP environment
+
+
+if echo $build | grep msdosdjgpp; then
+  DJGPP_TRUE=
+  DJGPP_FALSE='#'
+else
+  DJGPP_TRUE='#'
+  DJGPP_FALSE=
+fi
+
+
 # Runs configure.host, finds CC, CXX, and assorted other critical bits.  Sets
 # up critical shell variables.
 
@@ -4458,7 +4470,7 @@ test x"$pic_mode" = xno && libtool_flags="$libtool_flags --prefer-non-pic"
 case $host in
 *-*-irix6*)
   # Find out which ABI we are using.
-  echo '#line 4461 "configure"' > conftest.$ac_ext
+  echo '#line 4473 "configure"' > conftest.$ac_ext
   if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
   (eval $ac_compile) 2>&5
   ac_status=$?
@@ -5078,7 +5090,7 @@ fi;
     #
     # Fake what AC_TRY_COMPILE does.  XXX Look at redoing this new-style.
     cat > conftest.$ac_ext << EOF
-#line 5081 "configure"
+#line 5093 "configure"
 struct S { ~S(); };
 void bar();
 void foo()
@@ -88558,9 +88570,23 @@ fi;
   echo "$as_me:$LINENO: result: $version_specific_libs" >&5
 echo "${ECHO_T}$version_specific_libs" >&6
 
+  # Convert GCC version string (to be used as directory name)
+  # Does nothing except for DJGPP
+  case "$build" in
+    *-msdosdjgpp*)
+       libstdcxx_incdir_base=cxx
+       gcc_version_alias='$(shell echo $(gcc_version) | sed -e "s:\.::2g")'
+       ;;
+    *)
+       libstdcxx_incdir_base=c++
+       gcc_version_alias='$(gcc_version)'
+       ;;
+  esac
+
+
   # Default case for install directory for include files.
   if test $version_specific_libs = no && test $gxx_include_dir = no; then
-    gxx_include_dir='${prefix}/include/c++/${gcc_version}'
+      gxx_include_dir='${prefix}'/include/${libstdcxx_incdir_base}/${gcc_version_alias}
   fi
 
   # Version-specific runtime libs processing.
@@ -88570,10 +88596,10 @@ echo "${ECHO_T}$version_specific_libs" >&6
     # is selected.  FIXME: these variables are misnamed, there are
     # no executables installed in _toolexecdir or _toolexeclibdir.
     if test x"$gxx_include_dir" = x"no"; then
-      gxx_include_dir='${libdir}/gcc/${host_alias}/${gcc_version}/include/c++'
+      gxx_include_dir='${libdir}/gcc/${host_alias}/'$gcc_version_alias/include/${libstdcxx_incdir_base}
     fi
     glibcxx_toolexecdir='${libdir}/gcc/${host_alias}'
-    glibcxx_toolexeclibdir='${toolexecdir}/${gcc_version}$(MULTISUBDIR)'
+    glibcxx_toolexeclibdir='${toolexecdir}/'$gcc_version_alias'$(MULTISUBDIR)'
   fi
 
   # Calculate glibcxx_toolexecdir, glibcxx_toolexeclibdir
@@ -88746,6 +88772,13 @@ LIBOBJS=$ac_libobjs
 LTLIBOBJS=$ac_ltlibobjs
 
 
+if test -z "${DJGPP_TRUE}" && test -z "${DJGPP_FALSE}"; then
+  { { echo "$as_me:$LINENO: error: conditional \"DJGPP\" was never defined.
+Usually this means the macro was only invoked conditionally." >&5
+echo "$as_me: error: conditional \"DJGPP\" was never defined.
+Usually this means the macro was only invoked conditionally." >&2;}
+   { (exit 1); exit 1; }; }
+fi
 if test -z "${MAINTAINER_MODE_TRUE}" && test -z "${MAINTAINER_MODE_FALSE}"; then
   { { echo "$as_me:$LINENO: error: conditional \"MAINTAINER_MODE\" was never defined.
 Usually this means the macro was only invoked conditionally." >&5
@@ -89400,6 +89433,8 @@ s,@am__leading_dot@,$am__leading_dot,;t t
 s,@AMTAR@,$AMTAR,;t t
 s,@am__tar@,$am__tar,;t t
 s,@am__untar@,$am__untar,;t t
+s,@DJGPP_TRUE@,$DJGPP_TRUE,;t t
+s,@DJGPP_FALSE@,$DJGPP_FALSE,;t t
 s,@glibcxx_builddir@,$glibcxx_builddir,;t t
 s,@glibcxx_srcdir@,$glibcxx_srcdir,;t t
 s,@toplevel_srcdir@,$toplevel_srcdir,;t t
diff --git a/libstdc++-v3/configure.ac b/libstdc++-v3/configure.ac
index 228bd8f8..5413bb4a 100644
--- a/libstdc++-v3/configure.ac
+++ b/libstdc++-v3/configure.ac
@@ -78,6 +78,9 @@ AM_INIT_AUTOMAKE([1.9.3 no-define foreign no-dependencies -Wall -Wno-portability
 AH_TEMPLATE(PACKAGE, [Name of package])
 AH_TEMPLATE(VERSION, [Version number of package])
 
+# Add test for DJGPP environment
+AM_CONDITIONAL(DJGPP,echo $build | grep msdosdjgpp)
+
 # Runs configure.host, finds CC, CXX, and assorted other critical bits.  Sets
 # up critical shell variables.
 GLIBCXX_CONFIGURE
diff --git a/libstdc++-v3/docs/html/ext/pb_assoc/sample_node_updator.hpp b/libstdc++-v3/docs/html/ext/pb_assoc/sample_node_updator.hpp
index f862353b..0ab9f729 100644
--- a/libstdc++-v3/docs/html/ext/pb_assoc/sample_node_updator.hpp
+++ b/libstdc++-v3/docs/html/ext/pb_assoc/sample_node_updator.hpp
@@ -1,116 +1,116 @@
-/* 
-* @file sample_node_updator.hpp
-* Contains a samle node update functor.
-* 
-* Copyright Ami Tavory, IBM-HRL, 2004.
-* 
-* Permission to use, copy, modify, sell, and distribute this software
-*	is hereby granted without fee, provided that the above copyright notice
-*	appears in all copies, and that both that copyright notice and this
-*	permission notice appear in supporting documentation.
-*
-* None of the above authors, nor IBM Haifa Research Laboratories, make any
-*	representation about the suitability of this software for any
-*	purpose. It is provided "as is" without express or implied warranty.
-**/
-
-
-#ifndef SAMPLE_NODE_UPDATOR_HPP
-#define SAMPLE_NODE_UPDATOR_HPP
-
-
-/**
-* <class 
-*	description = "A sample node updator."
-*  comment = "This class serves to show the interface a node update functor
-*	needs to support.">
-**/
-class sample_node_updator
-{
-/**
-*******************************************************************************
-*******************************************************************************
-* <public_methods_group>
-**/
-public:
-
-	/**
-	***************************************************************************
-	***************************************************************************
-	** <group description = "Conclassors, declassor, and related.">
-	**/
-
-	/*
-	* <fn description = "Default constructor."
-	*	comment = "Must be default constructible.">
-	**/
-		sample_node_updator
-		();
-	/** </fn> **/
-
-	/*
-	* <fn description = "Copy constructor."
-	*	comment = "Must be copy constructible.">
-	**/
-		sample_node_updator
-		(const sample_node_updator &r_other);
-	/** </fn> **/
-
-	/*
-	* <fn description = "Swaps content."
-	*	comment = "Must be swappable (if there is such a word).">
-	**/
-	inline void
-		swap
-		(sample_node_updator &r_other);
-	/** </fn> **/
-
-	/*
-	***************************************************************************
-	***************************************************************************
-	* </group>
-	**/
-
-
-	/**
-	***************************************************************************
-	***************************************************************************
-	** <group description = "Operators.">
-	**/
-
-	/**
-	* <fn description = "This method is called by the superclass container 
-	*	object to update the key of a node whose invariants have been
-	*	violated. p_key is a pointer to the key being updated;
-	*	p_l_child_key is a pointer to the key of the left-child node of
-	*	the node being updated (and is NULL if there is no such child node);
-	*	p_r_child_key is a pointer to the key of the right-child node of
-	*	the node being updated (and is NULL if there is no such child node)."
-	*	comment = "@@sample_node_updator_const_key_pointer_comment">
-	**/
-	void
-		operator()
-		(const_key_pointer p_key, 
-			const_key_pointer p_l_child_key, 
-			const_key_pointer p_r_child_key);
-	/** </fn> **/		   
-
-	/*
-	***************************************************************************
-	***************************************************************************
-	* </group>
-	**/
-
-	
-/**
-*******************************************************************************
-*******************************************************************************
-* </public_methods_group>
-**/
-};
-/**
-* </class>
-**/
-
-
-#endif // #ifndef SAMPLE_NODE_UPDATOR_HPP
+/* 
+* @file sample_node_updator.hpp
+* Contains a samle node update functor.
+* 
+* Copyright Ami Tavory, IBM-HRL, 2004.
+* 
+* Permission to use, copy, modify, sell, and distribute this software
+*	is hereby granted without fee, provided that the above copyright notice
+*	appears in all copies, and that both that copyright notice and this
+*	permission notice appear in supporting documentation.
+*
+* None of the above authors, nor IBM Haifa Research Laboratories, make any
+*	representation about the suitability of this software for any
+*	purpose. It is provided "as is" without express or implied warranty.
+**/
+
+
+#ifndef SAMPLE_NODE_UPDATOR_HPP
+#define SAMPLE_NODE_UPDATOR_HPP
+
+
+/**
+* <class 
+*	description = "A sample node updator."
+*  comment = "This class serves to show the interface a node update functor
+*	needs to support.">
+**/
+class sample_node_updator
+{
+/**
+*******************************************************************************
+*******************************************************************************
+* <public_methods_group>
+**/
+public:
+
+	/**
+	***************************************************************************
+	***************************************************************************
+	** <group description = "Conclassors, declassor, and related.">
+	**/
+
+	/*
+	* <fn description = "Default constructor."
+	*	comment = "Must be default constructible.">
+	**/
+		sample_node_updator
+		();
+	/** </fn> **/
+
+	/*
+	* <fn description = "Copy constructor."
+	*	comment = "Must be copy constructible.">
+	**/
+		sample_node_updator
+		(const sample_node_updator &r_other);
+	/** </fn> **/
+
+	/*
+	* <fn description = "Swaps content."
+	*	comment = "Must be swappable (if there is such a word).">
+	**/
+	inline void
+		swap
+		(sample_node_updator &r_other);
+	/** </fn> **/
+
+	/*
+	***************************************************************************
+	***************************************************************************
+	* </group>
+	**/
+
+
+	/**
+	***************************************************************************
+	***************************************************************************
+	** <group description = "Operators.">
+	**/
+
+	/**
+	* <fn description = "This method is called by the superclass container 
+	*	object to update the key of a node whose invariants have been
+	*	violated. p_key is a pointer to the key being updated;
+	*	p_l_child_key is a pointer to the key of the left-child node of
+	*	the node being updated (and is NULL if there is no such child node);
+	*	p_r_child_key is a pointer to the key of the right-child node of
+	*	the node being updated (and is NULL if there is no such child node)."
+	*	comment = "@@sample_node_updator_const_key_pointer_comment">
+	**/
+	void
+		operator()
+		(const_key_pointer p_key, 
+			const_key_pointer p_l_child_key, 
+			const_key_pointer p_r_child_key);
+	/** </fn> **/		   
+
+	/*
+	***************************************************************************
+	***************************************************************************
+	* </group>
+	**/
+
+	
+/**
+*******************************************************************************
+*******************************************************************************
+* </public_methods_group>
+**/
+};
+/**
+* </class>
+**/
+
+
+#endif // #ifndef SAMPLE_NODE_UPDATOR_HPP
diff --git a/libstdc++-v3/docs/html/ext/pb_assoc/sample_probe_fn.hpp b/libstdc++-v3/docs/html/ext/pb_assoc/sample_probe_fn.hpp
index 1117418e..b250b54f 100644
--- a/libstdc++-v3/docs/html/ext/pb_assoc/sample_probe_fn.hpp
+++ b/libstdc++-v3/docs/html/ext/pb_assoc/sample_probe_fn.hpp
@@ -1,121 +1,121 @@
-/** 
-* @file sample_probe_fn.hpp
-* Contains a sample probe policy.
-* 
-* Copyright Ami Tavory, IBM-HRL, 2004.
-* 
-* Permission to use, copy, modify, sell, and distribute this software
-*   is hereby granted without fee, provided that the above copyright notice
-*   appears in all copies, and that both that copyright notice and this
-*   permission notice appear in supporting documentation.
-*
-* None of the above authors, nor IBM Haifa Research Laboratories, make any
-*   representation about the suitability of this software for any
-*   purpose. It is provided "as is" without express or implied warranty.
-**/
-
-
-#ifndef SAMPLE_PROBE_FN_HPP
-#define SAMPLE_PROBE_FN_HPP
-
-
-/**
-* <class 
-*   description = "A sample probe policy."
-*  comment = "This class serves to show the interface a probe functor
-*	needs to support.">
-**/
-class sample_probe_fn
-{
-/**
-*******************************************************************************
-*******************************************************************************
-* <public_methods_group>
-**/
-public:
-	/**
-	***************************************************************************
-	***************************************************************************
-	** <group description = "Constructors, destructor, and related.">
-	**/
-
-	/*
-	* <fn description = "Default constructor."
-	*	comment = "Must be default constructible.">
-	**/
-		sample_probe_fn
-		();
-	/** </fn> **/
-
-	/*
-	* <fn description = "Copy constructor."
-	*	comment = "Must be copy constructible.">
-	**/
-		sample_probe_fn
-		(const sample_probe_fn &r_other);
-	/** </fn> **/
-
-	/*
-	* <fn description = "Swaps content."
-	*	comment = "Must be swappable (if there is such a word).">
-	**/
-	inline void
-		swap
-		(sample_probe_fn &r_other);
-	/** </fn> **/
-
-	/*
-	***************************************************************************
-	***************************************************************************
-	* </group>
-	**/
-
-
-/**
-*******************************************************************************
-*******************************************************************************
-* </public_methods_group>
-**/
-
-
-/**
-*******************************************************************************
-*******************************************************************************
-* <protected_methods_group>
-**/
-protected:
-	/**
-	***************************************************************************
-	***************************************************************************
-	** <group description = "Offset methods.">
-	**/
-
-	/*
-	* <fn description = "Returns the i-th offset from the hash value
-	*		of some key r_key."
-	*	comment = "@@sample_range_hashing_size_type_comment">
-	**/
-	inline size_type
-		operator()
-		(const_key_reference r_key,
-			size_type i) const;
-	/** </fn> **/
-
-	/**
-	***************************************************************************
-	***************************************************************************
-	** </group">
-	**/
-
-/**
-*******************************************************************************
-*******************************************************************************
-* </protected_methods_group>
-**/
-};
-/**
-* </class>
-**/
-
-
-#endif // #ifndef SAMPLE_PROBE_FN_HPP
+/** 
+* @file sample_probe_fn.hpp
+* Contains a sample probe policy.
+* 
+* Copyright Ami Tavory, IBM-HRL, 2004.
+* 
+* Permission to use, copy, modify, sell, and distribute this software
+*   is hereby granted without fee, provided that the above copyright notice
+*   appears in all copies, and that both that copyright notice and this
+*   permission notice appear in supporting documentation.
+*
+* None of the above authors, nor IBM Haifa Research Laboratories, make any
+*   representation about the suitability of this software for any
+*   purpose. It is provided "as is" without express or implied warranty.
+**/
+
+
+#ifndef SAMPLE_PROBE_FN_HPP
+#define SAMPLE_PROBE_FN_HPP
+
+
+/**
+* <class 
+*   description = "A sample probe policy."
+*  comment = "This class serves to show the interface a probe functor
+*	needs to support.">
+**/
+class sample_probe_fn
+{
+/**
+*******************************************************************************
+*******************************************************************************
+* <public_methods_group>
+**/
+public:
+	/**
+	***************************************************************************
+	***************************************************************************
+	** <group description = "Constructors, destructor, and related.">
+	**/
+
+	/*
+	* <fn description = "Default constructor."
+	*	comment = "Must be default constructible.">
+	**/
+		sample_probe_fn
+		();
+	/** </fn> **/
+
+	/*
+	* <fn description = "Copy constructor."
+	*	comment = "Must be copy constructible.">
+	**/
+		sample_probe_fn
+		(const sample_probe_fn &r_other);
+	/** </fn> **/
+
+	/*
+	* <fn description = "Swaps content."
+	*	comment = "Must be swappable (if there is such a word).">
+	**/
+	inline void
+		swap
+		(sample_probe_fn &r_other);
+	/** </fn> **/
+
+	/*
+	***************************************************************************
+	***************************************************************************
+	* </group>
+	**/
+
+
+/**
+*******************************************************************************
+*******************************************************************************
+* </public_methods_group>
+**/
+
+
+/**
+*******************************************************************************
+*******************************************************************************
+* <protected_methods_group>
+**/
+protected:
+	/**
+	***************************************************************************
+	***************************************************************************
+	** <group description = "Offset methods.">
+	**/
+
+	/*
+	* <fn description = "Returns the i-th offset from the hash value
+	*		of some key r_key."
+	*	comment = "@@sample_range_hashing_size_type_comment">
+	**/
+	inline size_type
+		operator()
+		(const_key_reference r_key,
+			size_type i) const;
+	/** </fn> **/
+
+	/**
+	***************************************************************************
+	***************************************************************************
+	** </group">
+	**/
+
+/**
+*******************************************************************************
+*******************************************************************************
+* </protected_methods_group>
+**/
+};
+/**
+* </class>
+**/
+
+
+#endif // #ifndef SAMPLE_PROBE_FN_HPP
diff --git a/libstdc++-v3/docs/html/ext/pb_assoc/sample_range_hashing.hpp b/libstdc++-v3/docs/html/ext/pb_assoc/sample_range_hashing.hpp
index d22f8e23..b2e526d8 100644
--- a/libstdc++-v3/docs/html/ext/pb_assoc/sample_range_hashing.hpp
+++ b/libstdc++-v3/docs/html/ext/pb_assoc/sample_range_hashing.hpp
@@ -1,147 +1,147 @@
-/** 
-* @file sample_range_hashing.hpp
-* Contains a range hashing policy.
-* 
-* Copyright Ami Tavory, IBM-HRL, 2004.
-* 
-* Permission to use, copy, modify, sell, and distribute this software
-*   is hereby granted without fee, provided that the above copyright notice
-*   appears in all copies, and that both that copyright notice and this
-*   permission notice appear in supporting documentation.
-*
-* None of the above authors, nor IBM Haifa Research Laboratories, make any
-*   representation about the suitability of this software for any
-*   purpose. It is provided "as is" without express or implied warranty.
-**/
-
-
-#ifndef SAMPLE_RANGE_HASHING_HPP
-#define SAMPLE_RANGE_HASHING_HPP
-
-
-/**
-* <class 
-*   description = "A sample range-hashing functor."
-*  comment = "This class serves to show the interface a range-hashing 
-*	functor needs to support.">
-**/
-class sample_range_hashing
-{
-/**
-*******************************************************************************
-*******************************************************************************
-* <public_methods_group>
-**/
-public:
-	/**
-	***************************************************************************
-	***************************************************************************
-	** <group description = "Constructors, destructor, and related.">
-	**/
-
-	/*
-	* <fn description = "Default constructor."
-	*	comment = "Must be default constructible.">
-	**/
-		sample_range_hashing
-		();
-	/** </fn> **/
-
-	/*
-	* <fn description = "Copy constructor."
-	*	comment = "Must be copy constructible.">
-	**/
-		sample_range_hashing
-		(const sample_range_hashing &r_other);
-	/** </fn> **/
-
-	/*
-	* <fn description = "Swaps content."
-	*	comment = "Must be swappable (if there is such a word).">
-	**/
-	inline void
-		swap
-		(sample_range_hashing &r_other);
-	/** </fn> **/
-
-	/*
-	***************************************************************************
-	***************************************************************************
-	* </group>
-	**/
-
-/**
-*******************************************************************************
-*******************************************************************************
-* </public_methods_group>
-**/
-
-	
-/**
-*******************************************************************************
-*******************************************************************************
-* <protected_methods_group>
-**/
-protected:
-
-	/**
-	***************************************************************************
-	***************************************************************************
-	** <group 
-	*	  description = "Notification methods.">
-	**/
-	
-	/*
-	* <fn 
-	*   description = "Notifies the policy object that the container's
-	*	  __size has changed to size."
-	*	comment = "@@sample_range_hashing_size_type_comment">
-	**/ 
-	void 
-		notify_resized
-		(size_type size);
-	/** </fn> **/
-
-	/**
-	***************************************************************************
-	***************************************************************************
-	** </group>
-	**/
-
-
-	/**
-	***************************************************************************
-	***************************************************************************
-	** <group 
-	*	  description = "Operators.">
-	**/
-	
-	/*
-	* <fn description = "Transforms the __hash value hash into a 
-	*	ranged-hash value.">
-	*	comment = "@@sample_range_hashing_size_type_comment">
-	**/ 
-	inline size_type
-		operator()
-		(size_type hash) const;
-	/** </fn> **/
-
-	/**
-	***************************************************************************
-	***************************************************************************
-	** </group>
-	**/
-
-
-/**
-*******************************************************************************
-*******************************************************************************
-* </protected_methods_group>
-**/
-};
-/**
-* </class>
-**/
-
-
-#endif // #ifndef SAMPLE_RANGE_HASHING_HPP
+/** 
+* @file sample_range_hashing.hpp
+* Contains a range hashing policy.
+* 
+* Copyright Ami Tavory, IBM-HRL, 2004.
+* 
+* Permission to use, copy, modify, sell, and distribute this software
+*   is hereby granted without fee, provided that the above copyright notice
+*   appears in all copies, and that both that copyright notice and this
+*   permission notice appear in supporting documentation.
+*
+* None of the above authors, nor IBM Haifa Research Laboratories, make any
+*   representation about the suitability of this software for any
+*   purpose. It is provided "as is" without express or implied warranty.
+**/
+
+
+#ifndef SAMPLE_RANGE_HASHING_HPP
+#define SAMPLE_RANGE_HASHING_HPP
+
+
+/**
+* <class 
+*   description = "A sample range-hashing functor."
+*  comment = "This class serves to show the interface a range-hashing 
+*	functor needs to support.">
+**/
+class sample_range_hashing
+{
+/**
+*******************************************************************************
+*******************************************************************************
+* <public_methods_group>
+**/
+public:
+	/**
+	***************************************************************************
+	***************************************************************************
+	** <group description = "Constructors, destructor, and related.">
+	**/
+
+	/*
+	* <fn description = "Default constructor."
+	*	comment = "Must be default constructible.">
+	**/
+		sample_range_hashing
+		();
+	/** </fn> **/
+
+	/*
+	* <fn description = "Copy constructor."
+	*	comment = "Must be copy constructible.">
+	**/
+		sample_range_hashing
+		(const sample_range_hashing &r_other);
+	/** </fn> **/
+
+	/*
+	* <fn description = "Swaps content."
+	*	comment = "Must be swappable (if there is such a word).">
+	**/
+	inline void
+		swap
+		(sample_range_hashing &r_other);
+	/** </fn> **/
+
+	/*
+	***************************************************************************
+	***************************************************************************
+	* </group>
+	**/
+
+/**
+*******************************************************************************
+*******************************************************************************
+* </public_methods_group>
+**/
+
+	
+/**
+*******************************************************************************
+*******************************************************************************
+* <protected_methods_group>
+**/
+protected:
+
+	/**
+	***************************************************************************
+	***************************************************************************
+	** <group 
+	*	  description = "Notification methods.">
+	**/
+	
+	/*
+	* <fn 
+	*   description = "Notifies the policy object that the container's
+	*	  __size has changed to size."
+	*	comment = "@@sample_range_hashing_size_type_comment">
+	**/ 
+	void 
+		notify_resized
+		(size_type size);
+	/** </fn> **/
+
+	/**
+	***************************************************************************
+	***************************************************************************
+	** </group>
+	**/
+
+
+	/**
+	***************************************************************************
+	***************************************************************************
+	** <group 
+	*	  description = "Operators.">
+	**/
+	
+	/*
+	* <fn description = "Transforms the __hash value hash into a 
+	*	ranged-hash value.">
+	*	comment = "@@sample_range_hashing_size_type_comment">
+	**/ 
+	inline size_type
+		operator()
+		(size_type hash) const;
+	/** </fn> **/
+
+	/**
+	***************************************************************************
+	***************************************************************************
+	** </group>
+	**/
+
+
+/**
+*******************************************************************************
+*******************************************************************************
+* </protected_methods_group>
+**/
+};
+/**
+* </class>
+**/
+
+
+#endif // #ifndef SAMPLE_RANGE_HASHING_HPP
diff --git a/libstdc++-v3/docs/html/ext/pb_assoc/sample_ranged_hash_fn.hpp b/libstdc++-v3/docs/html/ext/pb_assoc/sample_ranged_hash_fn.hpp
index 32c5a498..46afb2b0 100644
--- a/libstdc++-v3/docs/html/ext/pb_assoc/sample_ranged_hash_fn.hpp
+++ b/libstdc++-v3/docs/html/ext/pb_assoc/sample_ranged_hash_fn.hpp
@@ -1,141 +1,141 @@
-/** 
-* @file sample_ranged_hash_fn.hpp
-* Contains a ranged hash policy.
-* 
-* Copyright Ami Tavory, IBM-HRL, 2004.
-* 
-* Permission to use, copy, modify, sell, and distribute this software
-*   is hereby granted without fee, provided that the above copyright notice
-*   appears in all copies, and that both that copyright notice and this
-*   permission notice appear in supporting documentation.
-*
-* None of the above authors, nor IBM Haifa Research Laboratories, make any
-*   representation about the suitability of this software for any
-*   purpose. It is provided "as is" without express or implied warranty.
-**/
-
-
-#ifndef SAMPLE_RANGED_HASH_FN_HPP
-#define SAMPLE_RANGED_HASH_FN_HPP
-
-
-/**
-* <class 
-*   description = "A sample ranged-hash functor."
-*  comment = "This class serves to show the interface a ranged-hash 
-*	functor needs to support.">
-**/
-class sample_ranged_hash_fn
-{
-/**
-*******************************************************************************
-*******************************************************************************
-* <public_methods_group>
-**/
-public:
-	/**
-	***************************************************************************
-	***************************************************************************
-	** <group description = "Constructors, destructor, and related.">
-	**/
-
-	/*
-	* <fn description = "Default constructor."
-	*	comment = "Must be default constructible.">
-	**/
-		sample_ranged_hash_fn
-		();
-	/** </fn> **/
-
-	/*
-	* <fn description = "Copy constructor."
-	*	comment = "Must be copy constructible.">
-	**/
-		sample_ranged_hash_fn
-		(const sample_ranged_hash_fn &r_other);
-	/** </fn> **/
-
-	/*
-	* <fn description = "Swaps content."
-	*	comment = "Must be swappable (if there is such a word).">
-	**/
-	inline void
-		swap
-		(sample_ranged_hash_fn &r_other);
-	/** </fn> **/
-
-	/*
-	***************************************************************************
-	***************************************************************************
-	* </group>
-	**/
-
-/**
-*******************************************************************************
-*******************************************************************************
-* </public_methods_group>
-**/
-
-	
-/**
-*******************************************************************************
-*******************************************************************************
-* <protected_methods_group>
-**/
-protected:
-
-	/**
-	***************************************************************************
-	***************************************************************************
-	** <group 
-	*	  description = "Notification methods.">
-	**/
-	
-	/*
-	* <fn 
-	*   description = "Notifies the policy object that the container's
-	*	  __size has changed to size."
-	*	comment = "@@sample_ranged_hash_fn_size_type_comment">
-	**/ 
-	void 
-		notify_resized
-		(size_type size);
-	/** </fn> **/
-
-	/**
-	***************************************************************************
-	***************************************************************************
-	** </group>
-	**/
-
-
-	/**
-	***************************************************************************
-	***************************************************************************
-	** <group 
-	*	  description = "Operators.">
-	**/
-	
-	/*
-	* <fn description = "Transforms the const key reference 
-	*		r_key into a position
-	*		within the table.">
-	*	comment = "@@sample_ranged_hash_fn_size_type_comment">
-	**/ 
-	inline size_type 
-		operator()
-		(const_key_reference r_key) const;
-	/** </fn> **/
-
-	/**
-	***************************************************************************
-	***************************************************************************
-	** </group>
-	**/
-};
-/**
-* </class>
-**/
-
-
-#endif // #ifndef SAMPLE_RANGED_HASH_FN_HPP
+/** 
+* @file sample_ranged_hash_fn.hpp
+* Contains a ranged hash policy.
+* 
+* Copyright Ami Tavory, IBM-HRL, 2004.
+* 
+* Permission to use, copy, modify, sell, and distribute this software
+*   is hereby granted without fee, provided that the above copyright notice
+*   appears in all copies, and that both that copyright notice and this
+*   permission notice appear in supporting documentation.
+*
+* None of the above authors, nor IBM Haifa Research Laboratories, make any
+*   representation about the suitability of this software for any
+*   purpose. It is provided "as is" without express or implied warranty.
+**/
+
+
+#ifndef SAMPLE_RANGED_HASH_FN_HPP
+#define SAMPLE_RANGED_HASH_FN_HPP
+
+
+/**
+* <class 
+*   description = "A sample ranged-hash functor."
+*  comment = "This class serves to show the interface a ranged-hash 
+*	functor needs to support.">
+**/
+class sample_ranged_hash_fn
+{
+/**
+*******************************************************************************
+*******************************************************************************
+* <public_methods_group>
+**/
+public:
+	/**
+	***************************************************************************
+	***************************************************************************
+	** <group description = "Constructors, destructor, and related.">
+	**/
+
+	/*
+	* <fn description = "Default constructor."
+	*	comment = "Must be default constructible.">
+	**/
+		sample_ranged_hash_fn
+		();
+	/** </fn> **/
+
+	/*
+	* <fn description = "Copy constructor."
+	*	comment = "Must be copy constructible.">
+	**/
+		sample_ranged_hash_fn
+		(const sample_ranged_hash_fn &r_other);
+	/** </fn> **/
+
+	/*
+	* <fn description = "Swaps content."
+	*	comment = "Must be swappable (if there is such a word).">
+	**/
+	inline void
+		swap
+		(sample_ranged_hash_fn &r_other);
+	/** </fn> **/
+
+	/*
+	***************************************************************************
+	***************************************************************************
+	* </group>
+	**/
+
+/**
+*******************************************************************************
+*******************************************************************************
+* </public_methods_group>
+**/
+
+	
+/**
+*******************************************************************************
+*******************************************************************************
+* <protected_methods_group>
+**/
+protected:
+
+	/**
+	***************************************************************************
+	***************************************************************************
+	** <group 
+	*	  description = "Notification methods.">
+	**/
+	
+	/*
+	* <fn 
+	*   description = "Notifies the policy object that the container's
+	*	  __size has changed to size."
+	*	comment = "@@sample_ranged_hash_fn_size_type_comment">
+	**/ 
+	void 
+		notify_resized
+		(size_type size);
+	/** </fn> **/
+
+	/**
+	***************************************************************************
+	***************************************************************************
+	** </group>
+	**/
+
+
+	/**
+	***************************************************************************
+	***************************************************************************
+	** <group 
+	*	  description = "Operators.">
+	**/
+	
+	/*
+	* <fn description = "Transforms the const key reference 
+	*		r_key into a position
+	*		within the table.">
+	*	comment = "@@sample_ranged_hash_fn_size_type_comment">
+	**/ 
+	inline size_type 
+		operator()
+		(const_key_reference r_key) const;
+	/** </fn> **/
+
+	/**
+	***************************************************************************
+	***************************************************************************
+	** </group>
+	**/
+};
+/**
+* </class>
+**/
+
+
+#endif // #ifndef SAMPLE_RANGED_HASH_FN_HPP
diff --git a/libstdc++-v3/docs/html/ext/pb_assoc/sample_ranged_probe_fn.hpp b/libstdc++-v3/docs/html/ext/pb_assoc/sample_ranged_probe_fn.hpp
index 2aaab0e3..e773ab62 100644
--- a/libstdc++-v3/docs/html/ext/pb_assoc/sample_ranged_probe_fn.hpp
+++ b/libstdc++-v3/docs/html/ext/pb_assoc/sample_ranged_probe_fn.hpp
@@ -1,143 +1,143 @@
-/** 
-* @file sample_ranged_probe_fn.hpp
-* Contains a ranged probe policy.
-* 
-* Copyright Ami Tavory, IBM-HRL, 2004.
-* 
-* Permission to use, copy, modify, sell, and distribute this software
-*   is hereby granted without fee, provided that the above copyright notice
-*   appears in all copies, and that both that copyright notice and this
-*   permission notice appear in supporting documentation.
-*
-* None of the above authors, nor IBM Haifa Research Laboratories, make any
-*   representation about the suitability of this software for any
-*   purpose. It is provided "as is" without express or implied warranty.
-**/
-
-
-#ifndef SAMPLE_RANGED_PROBE_FN_HPP
-#define SAMPLE_RANGED_PROBE_FN_HPP
-
-
-/**
-* <class 
-*   description = "A sample ranged-probe functor."
-*  comment = "This class serves to show the interface a ranged-probe 
-*	functor needs to support.">
-**/
-class sample_ranged_probe_fn
-{
-/**
-*******************************************************************************
-*******************************************************************************
-* <public_methods_group>
-**/
-public:
-	/**
-	***************************************************************************
-	***************************************************************************
-	** <group description = "Constructors, destructor, and related.">
-	**/
-
-	/*
-	* <fn description = "Default constructor."
-	*	comment = "Must be default constructible.">
-	**/
-		sample_ranged_probe_fn
-		();
-	/** </fn> **/
-
-	/*
-	* <fn description = "Copy constructor."
-	*	comment = "Must be copy constructible.">
-	**/
-		sample_ranged_probe_fn
-		(const sample_ranged_probe_fn &r_other);
-	/** </fn> **/
-
-	/*
-	* <fn description = "Swaps content."
-	*	comment = "Must be swappable (if there is such a word).">
-	**/
-	inline void
-		swap
-		(sample_ranged_probe_fn &r_other);
-	/** </fn> **/
-
-	/*
-	***************************************************************************
-	***************************************************************************
-	* </group>
-	**/
-
-/**
-*******************************************************************************
-*******************************************************************************
-* </public_methods_group>
-**/
-
-	
-/**
-*******************************************************************************
-*******************************************************************************
-* <protected_methods_group>
-**/
-protected:
-
-	/**
-	***************************************************************************
-	***************************************************************************
-	** <group 
-	*	  description = "Notification methods.">
-	**/
-	
-	/*
-	* <fn 
-	*   description = "Notifies the policy object that the container's
-	*	  __size has changed to size."
-	*	comment = "@@sample_ranged_probe_fn_size_type_comment">
-	**/ 
-	void 
-		notify_resized
-		(size_type size);
-	/** </fn> **/
-
-	/**
-	***************************************************************************
-	***************************************************************************
-	** </group>
-	**/
-
-
-	/**
-	***************************************************************************
-	***************************************************************************
-	** <group 
-	*	  description = "Operators.">
-	**/
-	
-	/*
-	* <fn description = "Transforms the const key reference 
-	*		r_key into the i-th position
-	*		within the table. This method is called for 
-	*		each collision within the probe sequence.">
-	*	comment = "@@sample_ranged_probe_fn_size_type_comment">
-	**/ 
-	inline size_type 
-		operator()
-		(const_key_reference r_key,
-			size_type i) const;
-	/** </fn> **/
-
-	/**
-	***************************************************************************
-	***************************************************************************
-	** </group>
-	**/
-};
-/**
-* </class>
-**/
-
-
-#endif // #ifndef SAMPLE_RANGED_PROBE_FN_HPP
+/** 
+* @file sample_ranged_probe_fn.hpp
+* Contains a ranged probe policy.
+* 
+* Copyright Ami Tavory, IBM-HRL, 2004.
+* 
+* Permission to use, copy, modify, sell, and distribute this software
+*   is hereby granted without fee, provided that the above copyright notice
+*   appears in all copies, and that both that copyright notice and this
+*   permission notice appear in supporting documentation.
+*
+* None of the above authors, nor IBM Haifa Research Laboratories, make any
+*   representation about the suitability of this software for any
+*   purpose. It is provided "as is" without express or implied warranty.
+**/
+
+
+#ifndef SAMPLE_RANGED_PROBE_FN_HPP
+#define SAMPLE_RANGED_PROBE_FN_HPP
+
+
+/**
+* <class 
+*   description = "A sample ranged-probe functor."
+*  comment = "This class serves to show the interface a ranged-probe 
+*	functor needs to support.">
+**/
+class sample_ranged_probe_fn
+{
+/**
+*******************************************************************************
+*******************************************************************************
+* <public_methods_group>
+**/
+public:
+	/**
+	***************************************************************************
+	***************************************************************************
+	** <group description = "Constructors, destructor, and related.">
+	**/
+
+	/*
+	* <fn description = "Default constructor."
+	*	comment = "Must be default constructible.">
+	**/
+		sample_ranged_probe_fn
+		();
+	/** </fn> **/
+
+	/*
+	* <fn description = "Copy constructor."
+	*	comment = "Must be copy constructible.">
+	**/
+		sample_ranged_probe_fn
+		(const sample_ranged_probe_fn &r_other);
+	/** </fn> **/
+
+	/*
+	* <fn description = "Swaps content."
+	*	comment = "Must be swappable (if there is such a word).">
+	**/
+	inline void
+		swap
+		(sample_ranged_probe_fn &r_other);
+	/** </fn> **/
+
+	/*
+	***************************************************************************
+	***************************************************************************
+	* </group>
+	**/
+
+/**
+*******************************************************************************
+*******************************************************************************
+* </public_methods_group>
+**/
+
+	
+/**
+*******************************************************************************
+*******************************************************************************
+* <protected_methods_group>
+**/
+protected:
+
+	/**
+	***************************************************************************
+	***************************************************************************
+	** <group 
+	*	  description = "Notification methods.">
+	**/
+	
+	/*
+	* <fn 
+	*   description = "Notifies the policy object that the container's
+	*	  __size has changed to size."
+	*	comment = "@@sample_ranged_probe_fn_size_type_comment">
+	**/ 
+	void 
+		notify_resized
+		(size_type size);
+	/** </fn> **/
+
+	/**
+	***************************************************************************
+	***************************************************************************
+	** </group>
+	**/
+
+
+	/**
+	***************************************************************************
+	***************************************************************************
+	** <group 
+	*	  description = "Operators.">
+	**/
+	
+	/*
+	* <fn description = "Transforms the const key reference 
+	*		r_key into the i-th position
+	*		within the table. This method is called for 
+	*		each collision within the probe sequence.">
+	*	comment = "@@sample_ranged_probe_fn_size_type_comment">
+	**/ 
+	inline size_type 
+		operator()
+		(const_key_reference r_key,
+			size_type i) const;
+	/** </fn> **/
+
+	/**
+	***************************************************************************
+	***************************************************************************
+	** </group>
+	**/
+};
+/**
+* </class>
+**/
+
+
+#endif // #ifndef SAMPLE_RANGED_PROBE_FN_HPP
diff --git a/libstdc++-v3/docs/html/ext/pb_assoc/sample_resize_policy.hpp b/libstdc++-v3/docs/html/ext/pb_assoc/sample_resize_policy.hpp
index 4101a70f..4aa34f79 100644
--- a/libstdc++-v3/docs/html/ext/pb_assoc/sample_resize_policy.hpp
+++ b/libstdc++-v3/docs/html/ext/pb_assoc/sample_resize_policy.hpp
@@ -1,310 +1,310 @@
-/** 
-* @file sample_resize_policy.hpp
-* Contains a sample resize policy for hash tables.
-* 
-* Copyright Ami Tavory, IBM-HRL, 2004.
-* 
-* Permission to use, copy, modify, sell, and distribute this software
-*   is hereby granted without fee, provided that the above copyright notice
-*   appears in all copies, and that both that copyright notice and this
-*   permission notice appear in supporting documentation,
-*
-* None of the above authors, nor IBM Haifa Research Laboratories, make any
-*   representation about the suitability of this software for any
-*   purpose. It is provided "as is" without express or implied warranty.
-**/
-
-
-#ifndef SAMPLE_RESIZE_POLICY_HPP
-#define SAMPLE_RESIZE_POLICY_HPP
-
-
-/**
-* <class 
-*   description = "A sample resize policy."
-*  comment = "This class serves to show the interface a resize policy
-*	needs to support.">
-**/
-class sample_resize_policy
-{
-/**
-*******************************************************************************
-*******************************************************************************
-* <public_methods_group>
-**/
-public:
-	/**
-	***************************************************************************
-	***************************************************************************
-	** <group description = "Constructors, destructor, and related.">
-	**/
-
-	/*
-	* <fn description = "Default constructor."
-	*	comment = "Must be default constructible.">
-	**/
-		sample_resize_policy
-		();
-	/** </fn> **/
-
-	/*
-	* <fn description = "Copy constructor."
-	*	comment = "Must be copy constructible.">
-	**/
-		sample_range_hashing
-		(const sample_resize_policy &r_other);
-	/** </fn> **/
-
-	/*
-	* <fn description = "Swaps content."
-	*	comment = "Must be swappable (if there is such a word).">
-	**/
-	inline void
-		swap
-		(sample_resize_policy &r_other);
-	/** </fn> **/
-
-	/*
-	***************************************************************************
-	***************************************************************************
-	* </group>
-	**/
-
-
-/**
-*******************************************************************************
-*******************************************************************************
-* </public_methods_group>
-**/
-
-
-/**
-*******************************************************************************
-*******************************************************************************
-* <protected_methods_group>
-**/
-protected:
-	/**
-	***************************************************************************
-	***************************************************************************
-	** <group description = "Insert search notifications."
-	**  comment = "Notifications called during an insert operation.">
-	**/
-
-	/*
-	* <fn description = "Notifies a search started.">
-	**/
-	inline void
-		notify_insert_search_start
-		();
-	/** </fn> **/
-
-	/*
-	* <fn description = "Notifies a search encountered a collision.">
-	**/
-	inline void
-		notify_insert_search_collision
-		();
-	/** </fn> **/
-
-	/*
-	* <fn description = "Notifies a search ended.">
-	**/
-	inline void
-		notify_insert_search_end
-		();
-	/** </fn> **/
-
-	/*
-	***************************************************************************
-	***************************************************************************
-	* </group>
-	**/
-
-
-	/**
-	***************************************************************************
-	***************************************************************************
-	** <group description = "Find search notifications."
-	**  comment = "Notifications called during a find operation.">
-	**/
-
-	/*
-	* <fn description = "Notifies a search started.">
-	**/
-	inline void
-		notify_find_search_start
-		();
-	/** </fn> **/
-
-	/*
-	* <fn description = "Notifies a search encountered a collision.">
-	**/
-	inline void
-		notify_find_search_collision
-		();
-	/** </fn> **/
-
-	/*
-	* <fn description = "Notifies a search ended.">
-	**/
-	inline void
-		notify_find_search_end
-		();
-	/** </fn> **/
-
-	/*
-	***************************************************************************
-	***************************************************************************
-	* </group>
-	**/
-
-
-	/**
-	***************************************************************************
-	***************************************************************************
-	** <group description = "Erase search notifications."
-	**  comment = "Notifications called during an insert operation.">
-	**/
-
-	/*
-	* <fn description = "Notifies a search started.">
-	**/
-	inline void
-		notify_erase_search_start
-		();
-	/** </fn> **/
-
-	/*
-	* <fn description = "Notifies a search encountered a collision.">
-	**/
-	inline void
-		notify_erase_search_collision
-		();
-	/** </fn> **/
-
-	/*
-	* <fn description = "Notifies a search ended.">
-	**/
-	inline void
-		notify_erase_search_end
-		();
-	/** </fn> **/
-
-	/*
-	***************************************************************************
-	***************************************************************************
-	* </group>
-	**/
-
-
-	/**
-	***************************************************************************
-	***************************************************************************
-	** <group description = "Content change notifications."
-	**  comment = "Notifications called when the content of the table
-	**	  changes in a way that can affect the resize policy.">
-	**/
-
-	/*
-	* <fn description = "Notifies an element was inserted.">
-	**/
-	inline void
-		notify_inserted
-		(size_type num_e);
-	/** </fn> **/
-
-	/*
-	* <fn description = "Notifies an element was erased.">
-	**/
-	inline void
-		notify_erased
-		(size_type num_e);
-	/** </fn> **/
-
-	/*
-	* <fn description = "Notifies the table was cleared.">
-	**/
-	void 
-		notify_cleared
-		();
-	/** </fn> **/
-
-	/*
-	***************************************************************************
-	***************************************************************************
-	* </group>
-	**/
-
-
-	/**
-	***************************************************************************
-	***************************************************************************
-	** <group description = "Size change notifications."
-	**  comment = "Notifications called when the table changes size.">
-	**/
-
-	/*
-	* <fn description = "Notifies the table was resized to new_size.">
-	**/
-	void
-		notify_resized
-		(size_type new_size);
-	/** </fn> **/
-
-	/*
-	***************************************************************************
-	***************************************************************************
-	* </group>
-	**/
-
-
-	/**
-	***************************************************************************
-	***************************************************************************
-	** <group description = "Queries."
-	**  comment = "Called to query whether/how to resize.">
-	**/
-
-	/*
-	* <fn description = "Queries initial size.">
-	**/
-	size_type
-		get_init_size
-		() const;
-	/** </fn> **/
-
-	/*
-	* <fn description = "Queries whether a resize is needed.">
-	**/
-	inline bool
-		is_resize_needed
-		() const;
-	/** </fn> **/
-
-	/*
-	* <fn description = "Queries what the new size should be.">
-	**/
-	size_type
-		get_new_size
-		(size_type size, size_type num_used_e) const;
-	/** </fn> **/
-
-	/*
-	***************************************************************************
-	***************************************************************************
-	* </group>
-	**/
-
-/**
-*******************************************************************************
-*******************************************************************************
-* </protected_methods_group>
-**/
-};
-/**
-* </class>
-**/
-
-
-#endif // #ifndef SAMPLE_RESIZE_POLICY_HPP
+/** 
+* @file sample_resize_policy.hpp
+* Contains a sample resize policy for hash tables.
+* 
+* Copyright Ami Tavory, IBM-HRL, 2004.
+* 
+* Permission to use, copy, modify, sell, and distribute this software
+*   is hereby granted without fee, provided that the above copyright notice
+*   appears in all copies, and that both that copyright notice and this
+*   permission notice appear in supporting documentation,
+*
+* None of the above authors, nor IBM Haifa Research Laboratories, make any
+*   representation about the suitability of this software for any
+*   purpose. It is provided "as is" without express or implied warranty.
+**/
+
+
+#ifndef SAMPLE_RESIZE_POLICY_HPP
+#define SAMPLE_RESIZE_POLICY_HPP
+
+
+/**
+* <class 
+*   description = "A sample resize policy."
+*  comment = "This class serves to show the interface a resize policy
+*	needs to support.">
+**/
+class sample_resize_policy
+{
+/**
+*******************************************************************************
+*******************************************************************************
+* <public_methods_group>
+**/
+public:
+	/**
+	***************************************************************************
+	***************************************************************************
+	** <group description = "Constructors, destructor, and related.">
+	**/
+
+	/*
+	* <fn description = "Default constructor."
+	*	comment = "Must be default constructible.">
+	**/
+		sample_resize_policy
+		();
+	/** </fn> **/
+
+	/*
+	* <fn description = "Copy constructor."
+	*	comment = "Must be copy constructible.">
+	**/
+		sample_range_hashing
+		(const sample_resize_policy &r_other);
+	/** </fn> **/
+
+	/*
+	* <fn description = "Swaps content."
+	*	comment = "Must be swappable (if there is such a word).">
+	**/
+	inline void
+		swap
+		(sample_resize_policy &r_other);
+	/** </fn> **/
+
+	/*
+	***************************************************************************
+	***************************************************************************
+	* </group>
+	**/
+
+
+/**
+*******************************************************************************
+*******************************************************************************
+* </public_methods_group>
+**/
+
+
+/**
+*******************************************************************************
+*******************************************************************************
+* <protected_methods_group>
+**/
+protected:
+	/**
+	***************************************************************************
+	***************************************************************************
+	** <group description = "Insert search notifications."
+	**  comment = "Notifications called during an insert operation.">
+	**/
+
+	/*
+	* <fn description = "Notifies a search started.">
+	**/
+	inline void
+		notify_insert_search_start
+		();
+	/** </fn> **/
+
+	/*
+	* <fn description = "Notifies a search encountered a collision.">
+	**/
+	inline void
+		notify_insert_search_collision
+		();
+	/** </fn> **/
+
+	/*
+	* <fn description = "Notifies a search ended.">
+	**/
+	inline void
+		notify_insert_search_end
+		();
+	/** </fn> **/
+
+	/*
+	***************************************************************************
+	***************************************************************************
+	* </group>
+	**/
+
+
+	/**
+	***************************************************************************
+	***************************************************************************
+	** <group description = "Find search notifications."
+	**  comment = "Notifications called during a find operation.">
+	**/
+
+	/*
+	* <fn description = "Notifies a search started.">
+	**/
+	inline void
+		notify_find_search_start
+		();
+	/** </fn> **/
+
+	/*
+	* <fn description = "Notifies a search encountered a collision.">
+	**/
+	inline void
+		notify_find_search_collision
+		();
+	/** </fn> **/
+
+	/*
+	* <fn description = "Notifies a search ended.">
+	**/
+	inline void
+		notify_find_search_end
+		();
+	/** </fn> **/
+
+	/*
+	***************************************************************************
+	***************************************************************************
+	* </group>
+	**/
+
+
+	/**
+	***************************************************************************
+	***************************************************************************
+	** <group description = "Erase search notifications."
+	**  comment = "Notifications called during an insert operation.">
+	**/
+
+	/*
+	* <fn description = "Notifies a search started.">
+	**/
+	inline void
+		notify_erase_search_start
+		();
+	/** </fn> **/
+
+	/*
+	* <fn description = "Notifies a search encountered a collision.">
+	**/
+	inline void
+		notify_erase_search_collision
+		();
+	/** </fn> **/
+
+	/*
+	* <fn description = "Notifies a search ended.">
+	**/
+	inline void
+		notify_erase_search_end
+		();
+	/** </fn> **/
+
+	/*
+	***************************************************************************
+	***************************************************************************
+	* </group>
+	**/
+
+
+	/**
+	***************************************************************************
+	***************************************************************************
+	** <group description = "Content change notifications."
+	**  comment = "Notifications called when the content of the table
+	**	  changes in a way that can affect the resize policy.">
+	**/
+
+	/*
+	* <fn description = "Notifies an element was inserted.">
+	**/
+	inline void
+		notify_inserted
+		(size_type num_e);
+	/** </fn> **/
+
+	/*
+	* <fn description = "Notifies an element was erased.">
+	**/
+	inline void
+		notify_erased
+		(size_type num_e);
+	/** </fn> **/
+
+	/*
+	* <fn description = "Notifies the table was cleared.">
+	**/
+	void 
+		notify_cleared
+		();
+	/** </fn> **/
+
+	/*
+	***************************************************************************
+	***************************************************************************
+	* </group>
+	**/
+
+
+	/**
+	***************************************************************************
+	***************************************************************************
+	** <group description = "Size change notifications."
+	**  comment = "Notifications called when the table changes size.">
+	**/
+
+	/*
+	* <fn description = "Notifies the table was resized to new_size.">
+	**/
+	void
+		notify_resized
+		(size_type new_size);
+	/** </fn> **/
+
+	/*
+	***************************************************************************
+	***************************************************************************
+	* </group>
+	**/
+
+
+	/**
+	***************************************************************************
+	***************************************************************************
+	** <group description = "Queries."
+	**  comment = "Called to query whether/how to resize.">
+	**/
+
+	/*
+	* <fn description = "Queries initial size.">
+	**/
+	size_type
+		get_init_size
+		() const;
+	/** </fn> **/
+
+	/*
+	* <fn description = "Queries whether a resize is needed.">
+	**/
+	inline bool
+		is_resize_needed
+		() const;
+	/** </fn> **/
+
+	/*
+	* <fn description = "Queries what the new size should be.">
+	**/
+	size_type
+		get_new_size
+		(size_type size, size_type num_used_e) const;
+	/** </fn> **/
+
+	/*
+	***************************************************************************
+	***************************************************************************
+	* </group>
+	**/
+
+/**
+*******************************************************************************
+*******************************************************************************
+* </protected_methods_group>
+**/
+};
+/**
+* </class>
+**/
+
+
+#endif // #ifndef SAMPLE_RESIZE_POLICY_HPP
diff --git a/libstdc++-v3/docs/html/ext/pb_assoc/sample_resize_trigger.hpp b/libstdc++-v3/docs/html/ext/pb_assoc/sample_resize_trigger.hpp
index b2799cfb..6fd2b6c0 100644
--- a/libstdc++-v3/docs/html/ext/pb_assoc/sample_resize_trigger.hpp
+++ b/libstdc++-v3/docs/html/ext/pb_assoc/sample_resize_trigger.hpp
@@ -1,341 +1,341 @@
-/** 
-* @file sample_resize_trigger.hpp 
-* Contains a sample resize trigger policy class.
-* 
-* Copyright Ami Tavory, IBM-HRL, 2004.
-* 
-* Permission to use, copy, modify, sell, and distribute this software
-*   is hereby granted without fee, provided that the above copyright notice
-*   appears in all copies, and that both that copyright notice and this
-*   permission notice appear in supporting documentation.
-*
-* None of the above authors, nor IBM Haifa Research Laboratories, make any
-*   representation about the suitability of this software for any
-*   purpose. It is provided "as is" without express or implied warranty.
-**/
-
-
-#ifndef SAMPLE_RESIZE_TRIGGER_HPP
-#define SAMPLE_RESIZE_TRIGGER_HPP
-
-
-/**
-* <class 
-*   description = "A sample resize trigger policy."
-*  comment = "This class serves to show the interface a trigger policy
-*	needs to support.">
-**/
-class sample_resize_trigger
-{
-/**
-*******************************************************************************
-*******************************************************************************
-* <public_methods_group>
-**/
-public:
-	/**
-	***************************************************************************
-	***************************************************************************
-	** <group description = "Constructors, destructor, and related.">
-	**/
-
-	/*
-	* <fn description = "Default constructor."
-	*	comment = "Must be default constructible.">
-	**/
-		sample_resize_trigger
-		();
-	/** </fn> **/
-
-	/*
-	* <fn description = "Copy constructor."
-	*	comment = "Must be copy constructible.">
-	**/
-		sample_range_hashing
-		(const sample_resize_trigger &r_other);
-	/** </fn> **/
-
-	/*
-	* <fn description = "Swaps content."
-	*	comment = "Must be swappable (if there is such a word).">
-	**/
-	inline void
-		swap
-		(sample_resize_trigger &r_other);
-	/** </fn> **/
-
-	/*
-	***************************************************************************
-	***************************************************************************
-	* </group>
-	**/
-
-	
-/**
-*******************************************************************************
-*******************************************************************************
-* </public_methods_group>
-**/
-
-
-/**
-*******************************************************************************
-*******************************************************************************
-* <protected_methods_group>
-**/
-protected:
-	/**
-	**************************************************************************	
-	***************************************************************************
-	** <group description = "Insert search notifications."
-	**  comment = "Notifications called during an insert operation.">
-	**/
-
-	/*
-	* <fn description = "Notifies a search started.">
-	**/
-	inline void
-		notify_insert_search_start
-		();
-	/** </fn> **/
-
-	/*
-	* <fn description = "Notifies a search encountered a collision.">
-	**/
-	inline void
-		notify_insert_search_collision
-		();
-	/** </fn> **/
-
-	/*
-	* <fn description = "Notifies a search ended.">
-	**/
-	inline void
-		notify_insert_search_end
-		();
-	/** </fn> **/
-
-	/*
-	***************************************************************************
-	***************************************************************************
-	* </group>
-	**/
-
-
-	/**
-	***************************************************************************
-	***************************************************************************
-	** <group description = "Find search notifications."
-	**  comment = "Notifications called during a find operation.">
-	**/
-
-	/*
-	* <fn description = "Notifies a search started.">
-	**/
-	inline void
-		notify_find_search_start
-		();
-	/** </fn> **/
-
-	/*
-	* <fn description = "Notifies a search encountered a collision.">
-	**/
-	inline void
-		notify_find_search_collision
-		();
-	/** </fn> **/
-
-	/*
-	* <fn description = "Notifies a search ended.">
-	**/
-	inline void
-		notify_find_search_end
-		();
-	/** </fn> **/
-
-	/*
-	***************************************************************************
-	***************************************************************************
-	* </group>
-	**/
-
-
-	/**
-	***************************************************************************
-	***************************************************************************
-	** <group description = "Erase search notifications."
-	**  comment = "Notifications called during an insert operation.">
-	**/
-
-	/*
-	* <fn description = "Notifies a search started.">
-	**/
-	inline void
-		notify_erase_search_start
-		();
-	/** </fn> **/
-
-	/*
-	* <fn description = "Notifies a search encountered a collision.">
-	**/
-	inline void
-		notify_erase_search_collision
-		();
-	/** </fn> **/
-
-	/*
-	* <fn description = "Notifies a search ended.">
-	**/
-	inline void
-		notify_erase_search_end
-		();
-	/** </fn> **/
-
-	/*
-	***************************************************************************
-	***************************************************************************
-	* </group>
-	**/
-
-
-	/**
-	***************************************************************************
-	***************************************************************************
-	** <group description = "Content change notifications."
-	**  comment = "Notifications called when the content of the table
-	**	  changes in a way that can affect the resize policy.">
-	**/
-
-	/*
-	* <fn description = "Notifies an element was inserted.
-	*	the total number of entries in the table is num_entries.">
-	**/
-	inline void
-		notify_inserted
-		(size_type num_entries);
-	/** </fn> **/
-
-	/*
-	* <fn description = "Notifies an element was erased."
-	*	the total number of entries in the table is num_entries.">
-	**/
-	inline void
-		notify_erased
-		(size_type num_entries);
-	/** </fn> **/
-
-	/*
-	* <fn description = "Notifies the table was cleared.">
-	**/
-	void 
-		notify_cleared
-		();
-	/** </fn> **/
-
-	/*
-	***************************************************************************
-	***************************************************************************
-	* </group>
-	**/
-
-
-	/**
-	***************************************************************************
-	***************************************************************************
-	** <group description = "Size change notifications."
-	**  comment = "Notifications called when the table changes size.">
-	**/
-
-	/*
-	* <fn description = "Notifies the table was resized as a result of
-	*   this object's signifying that a resize is needed."
-	*	The actual size of the table is new_size.">
-	**/
-	void
-		notify_resized
-		(size_type new_size);
-	/** </fn> **/
-
-	/*
-	* <fn description = "Notifies the table was resized externally."
-	*	The actual size of the table is new_size.">
-	**/
-	void
-		notify_externally_resized
-		(size_type new_size);
-	/** </fn> **/
-
-	/*
-	***************************************************************************
-	***************************************************************************
-	* </group>
-	**/
-
-
-	/**
-	***************************************************************************
-	***************************************************************************
-	** <group description = "Queries."
-	**  comment = "Called to query whether/how to resize.">
-	**/
-
-	/*
-	* <fn description = "Queries whether a resize is needed.">
-	**/
-	inline bool 
-		is_resize_needed
-		() const;
-	/** </fn> **/
-
-	/*
-	* <fn description = "Queries whether a grow is needed."
-	*   comment = "This method is
-	*   called only if this object indicated resize is needed.
-	*	The actual size of the table is size, and the number of
-	*	entries in it is num_entries.">
-	**/
-	inline bool
-		is_grow_needed
-		(size_type size, 
-			size_type num_entries) const;
-	/** </fn> **/
-
-	/*
-	* <fn description = "Queries whether a shrink is needed."
-	*   comment = "This method is
-	*   called only if this object indicated resize is needed.
-	*	The actual size of the table is size, and the number of
-	*	entries in it is num_entries.">
-	**/
-	inline bool
-		is_shrink_needed
-		(size_type size, 
-			size_type num_entries) const;
-	/** </fn> **/
-
-	/*
-	***************************************************************************
-	***************************************************************************
-	* </group>
-	**/
-
-
-/**
-*******************************************************************************
-*******************************************************************************
-* </protected_methods_group>
-**/
-};
-/**
-* </class>
-**/
-
-
-/*
-****************************************************************************
-****************************************************************************
-*/
-} // namespace pb_assoc
-
-
-#endif // #ifndef SAMPLE_RESIZE_TRIGGER_HPP
+/** 
+* @file sample_resize_trigger.hpp 
+* Contains a sample resize trigger policy class.
+* 
+* Copyright Ami Tavory, IBM-HRL, 2004.
+* 
+* Permission to use, copy, modify, sell, and distribute this software
+*   is hereby granted without fee, provided that the above copyright notice
+*   appears in all copies, and that both that copyright notice and this
+*   permission notice appear in supporting documentation.
+*
+* None of the above authors, nor IBM Haifa Research Laboratories, make any
+*   representation about the suitability of this software for any
+*   purpose. It is provided "as is" without express or implied warranty.
+**/
+
+
+#ifndef SAMPLE_RESIZE_TRIGGER_HPP
+#define SAMPLE_RESIZE_TRIGGER_HPP
+
+
+/**
+* <class 
+*   description = "A sample resize trigger policy."
+*  comment = "This class serves to show the interface a trigger policy
+*	needs to support.">
+**/
+class sample_resize_trigger
+{
+/**
+*******************************************************************************
+*******************************************************************************
+* <public_methods_group>
+**/
+public:
+	/**
+	***************************************************************************
+	***************************************************************************
+	** <group description = "Constructors, destructor, and related.">
+	**/
+
+	/*
+	* <fn description = "Default constructor."
+	*	comment = "Must be default constructible.">
+	**/
+		sample_resize_trigger
+		();
+	/** </fn> **/
+
+	/*
+	* <fn description = "Copy constructor."
+	*	comment = "Must be copy constructible.">
+	**/
+		sample_range_hashing
+		(const sample_resize_trigger &r_other);
+	/** </fn> **/
+
+	/*
+	* <fn description = "Swaps content."
+	*	comment = "Must be swappable (if there is such a word).">
+	**/
+	inline void
+		swap
+		(sample_resize_trigger &r_other);
+	/** </fn> **/
+
+	/*
+	***************************************************************************
+	***************************************************************************
+	* </group>
+	**/
+
+	
+/**
+*******************************************************************************
+*******************************************************************************
+* </public_methods_group>
+**/
+
+
+/**
+*******************************************************************************
+*******************************************************************************
+* <protected_methods_group>
+**/
+protected:
+	/**
+	**************************************************************************	
+	***************************************************************************
+	** <group description = "Insert search notifications."
+	**  comment = "Notifications called during an insert operation.">
+	**/
+
+	/*
+	* <fn description = "Notifies a search started.">
+	**/
+	inline void
+		notify_insert_search_start
+		();
+	/** </fn> **/
+
+	/*
+	* <fn description = "Notifies a search encountered a collision.">
+	**/
+	inline void
+		notify_insert_search_collision
+		();
+	/** </fn> **/
+
+	/*
+	* <fn description = "Notifies a search ended.">
+	**/
+	inline void
+		notify_insert_search_end
+		();
+	/** </fn> **/
+
+	/*
+	***************************************************************************
+	***************************************************************************
+	* </group>
+	**/
+
+
+	/**
+	***************************************************************************
+	***************************************************************************
+	** <group description = "Find search notifications."
+	**  comment = "Notifications called during a find operation.">
+	**/
+
+	/*
+	* <fn description = "Notifies a search started.">
+	**/
+	inline void
+		notify_find_search_start
+		();
+	/** </fn> **/
+
+	/*
+	* <fn description = "Notifies a search encountered a collision.">
+	**/
+	inline void
+		notify_find_search_collision
+		();
+	/** </fn> **/
+
+	/*
+	* <fn description = "Notifies a search ended.">
+	**/
+	inline void
+		notify_find_search_end
+		();
+	/** </fn> **/
+
+	/*
+	***************************************************************************
+	***************************************************************************
+	* </group>
+	**/
+
+
+	/**
+	***************************************************************************
+	***************************************************************************
+	** <group description = "Erase search notifications."
+	**  comment = "Notifications called during an insert operation.">
+	**/
+
+	/*
+	* <fn description = "Notifies a search started.">
+	**/
+	inline void
+		notify_erase_search_start
+		();
+	/** </fn> **/
+
+	/*
+	* <fn description = "Notifies a search encountered a collision.">
+	**/
+	inline void
+		notify_erase_search_collision
+		();
+	/** </fn> **/
+
+	/*
+	* <fn description = "Notifies a search ended.">
+	**/
+	inline void
+		notify_erase_search_end
+		();
+	/** </fn> **/
+
+	/*
+	***************************************************************************
+	***************************************************************************
+	* </group>
+	**/
+
+
+	/**
+	***************************************************************************
+	***************************************************************************
+	** <group description = "Content change notifications."
+	**  comment = "Notifications called when the content of the table
+	**	  changes in a way that can affect the resize policy.">
+	**/
+
+	/*
+	* <fn description = "Notifies an element was inserted.
+	*	the total number of entries in the table is num_entries.">
+	**/
+	inline void
+		notify_inserted
+		(size_type num_entries);
+	/** </fn> **/
+
+	/*
+	* <fn description = "Notifies an element was erased."
+	*	the total number of entries in the table is num_entries.">
+	**/
+	inline void
+		notify_erased
+		(size_type num_entries);
+	/** </fn> **/
+
+	/*
+	* <fn description = "Notifies the table was cleared.">
+	**/
+	void 
+		notify_cleared
+		();
+	/** </fn> **/
+
+	/*
+	***************************************************************************
+	***************************************************************************
+	* </group>
+	**/
+
+
+	/**
+	***************************************************************************
+	***************************************************************************
+	** <group description = "Size change notifications."
+	**  comment = "Notifications called when the table changes size.">
+	**/
+
+	/*
+	* <fn description = "Notifies the table was resized as a result of
+	*   this object's signifying that a resize is needed."
+	*	The actual size of the table is new_size.">
+	**/
+	void
+		notify_resized
+		(size_type new_size);
+	/** </fn> **/
+
+	/*
+	* <fn description = "Notifies the table was resized externally."
+	*	The actual size of the table is new_size.">
+	**/
+	void
+		notify_externally_resized
+		(size_type new_size);
+	/** </fn> **/
+
+	/*
+	***************************************************************************
+	***************************************************************************
+	* </group>
+	**/
+
+
+	/**
+	***************************************************************************
+	***************************************************************************
+	** <group description = "Queries."
+	**  comment = "Called to query whether/how to resize.">
+	**/
+
+	/*
+	* <fn description = "Queries whether a resize is needed.">
+	**/
+	inline bool 
+		is_resize_needed
+		() const;
+	/** </fn> **/
+
+	/*
+	* <fn description = "Queries whether a grow is needed."
+	*   comment = "This method is
+	*   called only if this object indicated resize is needed.
+	*	The actual size of the table is size, and the number of
+	*	entries in it is num_entries.">
+	**/
+	inline bool
+		is_grow_needed
+		(size_type size, 
+			size_type num_entries) const;
+	/** </fn> **/
+
+	/*
+	* <fn description = "Queries whether a shrink is needed."
+	*   comment = "This method is
+	*   called only if this object indicated resize is needed.
+	*	The actual size of the table is size, and the number of
+	*	entries in it is num_entries.">
+	**/
+	inline bool
+		is_shrink_needed
+		(size_type size, 
+			size_type num_entries) const;
+	/** </fn> **/
+
+	/*
+	***************************************************************************
+	***************************************************************************
+	* </group>
+	**/
+
+
+/**
+*******************************************************************************
+*******************************************************************************
+* </protected_methods_group>
+**/
+};
+/**
+* </class>
+**/
+
+
+/*
+****************************************************************************
+****************************************************************************
+*/
+} // namespace pb_assoc
+
+
+#endif // #ifndef SAMPLE_RESIZE_TRIGGER_HPP
diff --git a/libstdc++-v3/docs/html/ext/pb_assoc/sample_size_policy.hpp b/libstdc++-v3/docs/html/ext/pb_assoc/sample_size_policy.hpp
index a8642700..7fde4a44 100644
--- a/libstdc++-v3/docs/html/ext/pb_assoc/sample_size_policy.hpp
+++ b/libstdc++-v3/docs/html/ext/pb_assoc/sample_size_policy.hpp
@@ -1,140 +1,140 @@
-/** 
-* @file sample_size_policy.hpp 
-* Contains a sample size resize-policy.
-* 
-* Copyright Ami Tavory, IBM-HRL, 2004.
-* 
-* Permission to use, copy, modify, sell, and distribute this software
-*   is hereby granted without fee, provided that the above copyright notice
-*   appears in all copies, and that both that copyright notice and this
-*   permission notice appear in supporting documentation.
-*
-* None of the above authors, nor IBM Haifa Research Laboratories, make any
-*   representation about the suitability of this software for any
-*   purpose. It is provided "as is" without express or implied warranty.
-**/
-
-
-#ifndef SAMPLE_SIZE_POLICY_HPP
-#define SAMPLE_SIZE_POLICY_HPP
-
-
-/**
-* <class 
-*   description = "A sample size policy."
-*  comment = "This class serves to show the interface a size policy
-*	needs to support.">
-**/
-class sample_size_policy
-{
-/**
-*******************************************************************************
-*******************************************************************************
-* <public_methods_group>
-**/
-public:
-	/**
-	***************************************************************************
-	***************************************************************************
-	** <group description = "Constructors, destructor, and related.">
-	**/
-
-	/*
-	* <fn description = "Default constructor."
-	*	comment = "Must be default constructible.">
-	**/
-		sample_size_policy
-		();
-	/** </fn> **/
-
-	/*
-	* <fn description = "Copy constructor."
-	*	comment = "Must be copy constructible.">
-	**/
-		sample_range_hashing
-		(const sample_size_policy &r_other);
-	/** </fn> **/
-
-	/*
-	* <fn description = "Swaps content."
-	*	comment = "Must be swappable (if there is such a word).">
-	**/
-	inline void
-		swap
-		(sample_size_policy &r_other);
-	/** </fn> **/
-
-	/*
-	***************************************************************************
-	***************************************************************************
-	* </group>
-	**/
-
-
-/**
-*******************************************************************************
-*******************************************************************************
-* </public_methods_group>
-**/
-
-
-/**
-*******************************************************************************
-*******************************************************************************
-* <protected_methods_group>
-**/
-protected:
-
-	/**
-	**************************************************************************	
-	***************************************************************************
-	** <group description = "Size methods">
-	**/
-	
-	/*
-	* <fn description = "Given suggested_size, a suggested size, returns
-	*   an initial size of the container related to the initial size.">
-	**/ 
-	inline size_type
-		get_init_size
-		(size_type suggested_size) const;
-	/** </fn> **/
-	
-	/*
-	* <fn description = "Given cur_size, the
-	*	current size, returns a size that is 
-	*   larger.">
-	**/ 
-	inline size_type
-		get_nearest_larger_size
-		(size_type cur_size) const;
-	/** </fn> **/
-	
-	/*
-	* <fn description = "Given cur_size, the current size, returns a size that is 
-	*   smaller.">
-	**/		 
-	inline size_type
-		get_nearest_smaller_size
-		(size_type cur_size) const;		
-	/** </fn> **/
-
-	/**
-	**************************************************************************	
-	***************************************************************************
-	** </group>
-	**/
-
-
-/**
-*******************************************************************************
-*******************************************************************************
-* </protected_methods_group>
-**/
-};
-/*
-** </class>
-**/
-
-
-#endif // #ifndef SAMPLE_SIZE_POLICY_HPP
+/** 
+* @file sample_size_policy.hpp 
+* Contains a sample size resize-policy.
+* 
+* Copyright Ami Tavory, IBM-HRL, 2004.
+* 
+* Permission to use, copy, modify, sell, and distribute this software
+*   is hereby granted without fee, provided that the above copyright notice
+*   appears in all copies, and that both that copyright notice and this
+*   permission notice appear in supporting documentation.
+*
+* None of the above authors, nor IBM Haifa Research Laboratories, make any
+*   representation about the suitability of this software for any
+*   purpose. It is provided "as is" without express or implied warranty.
+**/
+
+
+#ifndef SAMPLE_SIZE_POLICY_HPP
+#define SAMPLE_SIZE_POLICY_HPP
+
+
+/**
+* <class 
+*   description = "A sample size policy."
+*  comment = "This class serves to show the interface a size policy
+*	needs to support.">
+**/
+class sample_size_policy
+{
+/**
+*******************************************************************************
+*******************************************************************************
+* <public_methods_group>
+**/
+public:
+	/**
+	***************************************************************************
+	***************************************************************************
+	** <group description = "Constructors, destructor, and related.">
+	**/
+
+	/*
+	* <fn description = "Default constructor."
+	*	comment = "Must be default constructible.">
+	**/
+		sample_size_policy
+		();
+	/** </fn> **/
+
+	/*
+	* <fn description = "Copy constructor."
+	*	comment = "Must be copy constructible.">
+	**/
+		sample_range_hashing
+		(const sample_size_policy &r_other);
+	/** </fn> **/
+
+	/*
+	* <fn description = "Swaps content."
+	*	comment = "Must be swappable (if there is such a word).">
+	**/
+	inline void
+		swap
+		(sample_size_policy &r_other);
+	/** </fn> **/
+
+	/*
+	***************************************************************************
+	***************************************************************************
+	* </group>
+	**/
+
+
+/**
+*******************************************************************************
+*******************************************************************************
+* </public_methods_group>
+**/
+
+
+/**
+*******************************************************************************
+*******************************************************************************
+* <protected_methods_group>
+**/
+protected:
+
+	/**
+	**************************************************************************	
+	***************************************************************************
+	** <group description = "Size methods">
+	**/
+	
+	/*
+	* <fn description = "Given suggested_size, a suggested size, returns
+	*   an initial size of the container related to the initial size.">
+	**/ 
+	inline size_type
+		get_init_size
+		(size_type suggested_size) const;
+	/** </fn> **/
+	
+	/*
+	* <fn description = "Given cur_size, the
+	*	current size, returns a size that is 
+	*   larger.">
+	**/ 
+	inline size_type
+		get_nearest_larger_size
+		(size_type cur_size) const;
+	/** </fn> **/
+	
+	/*
+	* <fn description = "Given cur_size, the current size, returns a size that is 
+	*   smaller.">
+	**/		 
+	inline size_type
+		get_nearest_smaller_size
+		(size_type cur_size) const;		
+	/** </fn> **/
+
+	/**
+	**************************************************************************	
+	***************************************************************************
+	** </group>
+	**/
+
+
+/**
+*******************************************************************************
+*******************************************************************************
+* </protected_methods_group>
+**/
+};
+/*
+** </class>
+**/
+
+
+#endif // #ifndef SAMPLE_SIZE_POLICY_HPP
diff --git a/libstdc++-v3/docs/html/ext/pb_assoc/sample_update_policy.hpp b/libstdc++-v3/docs/html/ext/pb_assoc/sample_update_policy.hpp
index 70a1bd43..429fefca 100644
--- a/libstdc++-v3/docs/html/ext/pb_assoc/sample_update_policy.hpp
+++ b/libstdc++-v3/docs/html/ext/pb_assoc/sample_update_policy.hpp
@@ -1,171 +1,171 @@
-/** 
-* @file sample_update_policy.hpp
-* Contains a sample policy for list update containers.
-* 
-* Copyright Ami Tavory, IBM-HRL, 2004.
-* 
-* Permission to use, copy, modify, sell, and distribute this software
-*	is hereby granted without fee, provided that the above copyright notice
-*	appears in all copies, and that both that copyright notice and this
-*	permission notice appear in supporting documentation.
-*
-* None of the above authors, nor IBM Haifa Research Laboratories, make any
-*	representation about the suitability of this software for any
-*	purpose. It is provided "as is" without express or implied warranty.
-**/
-
-
-#ifndef SAMPLE_UPDATE_POLICY_HPP
-#define SAMPLE_UPDATE_POLICY_HPP
-
-
-/**
-* <class
-*	description = "A sample list-update policy."
-*  comment = "This class serves to show the interface a list update functor
-*	needs to support.">
-**/
-class sample_update_policy
-{
-/**
-*******************************************************************************
-*******************************************************************************
-* <public_methods_group>
-**/
-public:
-	/**
-	***************************************************************************
-	***************************************************************************
-	** <group description = "Constructors, destructor, and related.">
-	**/
-
-	/*
-	* <fn description = "Default constructor."
-	*	comment = "Must be default constructible.">
-	**/
-		sample_update_policy
-		();
-	/** </fn> **/
-
-	/*
-	* <fn description = "Copy constructor."
-	*	comment = "Must be copy constructible.">
-	**/
-		sample_update_policy
-		(const sample_update_policy &r_other);
-	/** </fn> **/
-
-	/*
-	* <fn description = "Swaps content."
-	*	comment = "Must be swappable (if there is such a word).">
-	**/
-	inline void
-		swap
-		(sample_update_policy &r_other);
-	/** </fn> **/
-
-	/*
-	***************************************************************************
-	***************************************************************************
-	* </group>
-	**/
-
-/**
-*******************************************************************************
-*******************************************************************************
-* </public_methods_group>
-**/
-
-
-/**
-*******************************************************************************
-*******************************************************************************
-* <protected_types_group>
-**/
-protected:
-
-	/**
-	***************************************************************************
-	***************************************************************************
-	** <group description = "Metadata definitions.">
-	**/
-
-	/**
-	* <tdef description = "Metadata on which this functor operates."
-	*	comment = "The class must declare the metadata type on which it
-	*		operates; the list-update based containers will append to 
-	*		each node an object of this type.">
-	**/
-	typedef
-		some_metadata_type
-		metadata_type;
-	/** </tdef> **/
-
-
-	/*
-	***************************************************************************
-	***************************************************************************
-	* </group>
-	**/
-
-/**
-*******************************************************************************
-*******************************************************************************
-* </protected_types_group>
-**/
-
-
-/**
-*******************************************************************************
-*******************************************************************************
-* <protected_methods_group>
-**/
-protected:
-	/**
-	***************************************************************************
-	***************************************************************************
-	** <group description = "Metadata operations.">
-	**/
-
-	/*
-	* <fn description = "Creates a metadata object."
-	*	comment = "A list-update based container object  will call this
-	*		method to create a metadata type when a node is created.">
-	**/
-	metadata_type
-		operator()
-		() const;
-	/** </fn> **/
-
-	/*
-	* <fn description = "Decides whether a metadata object should be 
-	*	moved to the front of the list. A list-update based containers object 
-	*	will call this
-	*	method to decide whether to move a node to the front of 
-	*	the list. The method shoule return true if the node should
-	*	be moved to the front of the list."
-	*	comment = "@@sample_update_policy_metadata_reference">
-	**/
-	bool 
-		operator()
-		(metadata_reference r_data) const;
-	/** </fn> **/
-
-	/*
-	***************************************************************************
-	***************************************************************************
-	* </group>
-	**/
-
-/**
-*******************************************************************************
-*******************************************************************************
-* </protected_methods_group>
-**/
-};
-/**
-* </class>
-**/
-
-
-#endif // #ifndef SAMPLE_UPDATE_POLICY_HPP
+/** 
+* @file sample_update_policy.hpp
+* Contains a sample policy for list update containers.
+* 
+* Copyright Ami Tavory, IBM-HRL, 2004.
+* 
+* Permission to use, copy, modify, sell, and distribute this software
+*	is hereby granted without fee, provided that the above copyright notice
+*	appears in all copies, and that both that copyright notice and this
+*	permission notice appear in supporting documentation.
+*
+* None of the above authors, nor IBM Haifa Research Laboratories, make any
+*	representation about the suitability of this software for any
+*	purpose. It is provided "as is" without express or implied warranty.
+**/
+
+
+#ifndef SAMPLE_UPDATE_POLICY_HPP
+#define SAMPLE_UPDATE_POLICY_HPP
+
+
+/**
+* <class
+*	description = "A sample list-update policy."
+*  comment = "This class serves to show the interface a list update functor
+*	needs to support.">
+**/
+class sample_update_policy
+{
+/**
+*******************************************************************************
+*******************************************************************************
+* <public_methods_group>
+**/
+public:
+	/**
+	***************************************************************************
+	***************************************************************************
+	** <group description = "Constructors, destructor, and related.">
+	**/
+
+	/*
+	* <fn description = "Default constructor."
+	*	comment = "Must be default constructible.">
+	**/
+		sample_update_policy
+		();
+	/** </fn> **/
+
+	/*
+	* <fn description = "Copy constructor."
+	*	comment = "Must be copy constructible.">
+	**/
+		sample_update_policy
+		(const sample_update_policy &r_other);
+	/** </fn> **/
+
+	/*
+	* <fn description = "Swaps content."
+	*	comment = "Must be swappable (if there is such a word).">
+	**/
+	inline void
+		swap
+		(sample_update_policy &r_other);
+	/** </fn> **/
+
+	/*
+	***************************************************************************
+	***************************************************************************
+	* </group>
+	**/
+
+/**
+*******************************************************************************
+*******************************************************************************
+* </public_methods_group>
+**/
+
+
+/**
+*******************************************************************************
+*******************************************************************************
+* <protected_types_group>
+**/
+protected:
+
+	/**
+	***************************************************************************
+	***************************************************************************
+	** <group description = "Metadata definitions.">
+	**/
+
+	/**
+	* <tdef description = "Metadata on which this functor operates."
+	*	comment = "The class must declare the metadata type on which it
+	*		operates; the list-update based containers will append to 
+	*		each node an object of this type.">
+	**/
+	typedef
+		some_metadata_type
+		metadata_type;
+	/** </tdef> **/
+
+
+	/*
+	***************************************************************************
+	***************************************************************************
+	* </group>
+	**/
+
+/**
+*******************************************************************************
+*******************************************************************************
+* </protected_types_group>
+**/
+
+
+/**
+*******************************************************************************
+*******************************************************************************
+* <protected_methods_group>
+**/
+protected:
+	/**
+	***************************************************************************
+	***************************************************************************
+	** <group description = "Metadata operations.">
+	**/
+
+	/*
+	* <fn description = "Creates a metadata object."
+	*	comment = "A list-update based container object  will call this
+	*		method to create a metadata type when a node is created.">
+	**/
+	metadata_type
+		operator()
+		() const;
+	/** </fn> **/
+
+	/*
+	* <fn description = "Decides whether a metadata object should be 
+	*	moved to the front of the list. A list-update based containers object 
+	*	will call this
+	*	method to decide whether to move a node to the front of 
+	*	the list. The method shoule return true if the node should
+	*	be moved to the front of the list."
+	*	comment = "@@sample_update_policy_metadata_reference">
+	**/
+	bool 
+		operator()
+		(metadata_reference r_data) const;
+	/** </fn> **/
+
+	/*
+	***************************************************************************
+	***************************************************************************
+	* </group>
+	**/
+
+/**
+*******************************************************************************
+*******************************************************************************
+* </protected_methods_group>
+**/
+};
+/**
+* </class>
+**/
+
+
+#endif // #ifndef SAMPLE_UPDATE_POLICY_HPP
diff --git a/libstdc++-v3/include/Makefile.in b/libstdc++-v3/include/Makefile.in
index a0c358c6..9e6702e9 100644
--- a/libstdc++-v3/include/Makefile.in
+++ b/libstdc++-v3/include/Makefile.in
@@ -95,6 +95,8 @@ CYGPATH_W = @CYGPATH_W@
 C_INCLUDE_DIR = @C_INCLUDE_DIR@
 DEBUG_FLAGS = @DEBUG_FLAGS@
 DEFS = @DEFS@
+DJGPP_FALSE = @DJGPP_FALSE@
+DJGPP_TRUE = @DJGPP_TRUE@
 ECHO_C = @ECHO_C@
 ECHO_N = @ECHO_N@
 ECHO_T = @ECHO_T@
diff --git a/libstdc++-v3/libmath/Makefile.in b/libstdc++-v3/libmath/Makefile.in
index 73cd3ca1..61dd6030 100644
--- a/libstdc++-v3/libmath/Makefile.in
+++ b/libstdc++-v3/libmath/Makefile.in
@@ -110,6 +110,8 @@ CYGPATH_W = @CYGPATH_W@
 C_INCLUDE_DIR = @C_INCLUDE_DIR@
 DEBUG_FLAGS = @DEBUG_FLAGS@
 DEFS = @DEFS@
+DJGPP_FALSE = @DJGPP_FALSE@
+DJGPP_TRUE = @DJGPP_TRUE@
 ECHO_C = @ECHO_C@
 ECHO_N = @ECHO_N@
 ECHO_T = @ECHO_T@
diff --git a/libstdc++-v3/libsupc++/Makefile.in b/libstdc++-v3/libsupc++/Makefile.in
index fb4d7a88..5f04cae9 100644
--- a/libstdc++-v3/libsupc++/Makefile.in
+++ b/libstdc++-v3/libsupc++/Makefile.in
@@ -151,6 +151,8 @@ CYGPATH_W = @CYGPATH_W@
 C_INCLUDE_DIR = @C_INCLUDE_DIR@
 DEBUG_FLAGS = @DEBUG_FLAGS@
 DEFS = @DEFS@
+DJGPP_FALSE = @DJGPP_FALSE@
+DJGPP_TRUE = @DJGPP_TRUE@
 ECHO_C = @ECHO_C@
 ECHO_N = @ECHO_N@
 ECHO_T = @ECHO_T@
diff --git a/libstdc++-v3/po/Makefile.in b/libstdc++-v3/po/Makefile.in
index e814e23e..c1d2f1cf 100644
--- a/libstdc++-v3/po/Makefile.in
+++ b/libstdc++-v3/po/Makefile.in
@@ -95,6 +95,8 @@ CYGPATH_W = @CYGPATH_W@
 C_INCLUDE_DIR = @C_INCLUDE_DIR@
 DEBUG_FLAGS = @DEBUG_FLAGS@
 DEFS = @DEFS@
+DJGPP_FALSE = @DJGPP_FALSE@
+DJGPP_TRUE = @DJGPP_TRUE@
 ECHO_C = @ECHO_C@
 ECHO_N = @ECHO_N@
 ECHO_T = @ECHO_T@
diff --git a/libstdc++-v3/scripts/create_testsuite_files b/libstdc++-v3/scripts/create_testsuite_files
index d5305236..396a01de 100755
--- a/libstdc++-v3/scripts/create_testsuite_files
+++ b/libstdc++-v3/scripts/create_testsuite_files
@@ -35,8 +35,16 @@ dlist=`echo [0-9][0-9]*`
 for d in [a-z]*; do
   test -d $d && dlist="$dlist $d"
 done
-find $dlist "(" -type f -o -type l ")" -name "*.cc" -print > $tmp.01
-find $dlist "(" -type f -o -type l ")" -name "*.c" -print > $tmp.02
+case $OSTYPE in
+  msdos*)
+     find $dlist "(" -type f ")" -name "*.cc" -print > $tmp.01
+     find $dlist "(" -type f ")" -name "*.c" -print > $tmp.02
+     ;;
+  *)
+     find $dlist "(" -type f -o -type l ")" -name "*.cc" -print > $tmp.01
+     find $dlist "(" -type f -o -type l ")" -name "*.c" -print > $tmp.02
+     ;;
+esac
 cat  $tmp.01 $tmp.02 | sort > $tmp.1
 if test ! -s "$tmp.1"; then
   exit 1
diff --git a/libstdc++-v3/src/Makefile.am b/libstdc++-v3/src/Makefile.am
index 63c5070a..93c5fd4a 100644
--- a/libstdc++-v3/src/Makefile.am
+++ b/libstdc++-v3/src/Makefile.am
@@ -25,7 +25,11 @@
 include $(top_srcdir)/fragment.am
 
 # Cross compiler support.
+if DJGPP
+toolexeclib_LTLIBRARIES = libstdcxx.la
+else
 toolexeclib_LTLIBRARIES = libstdc++.la
+endif
 
 # Symbol versioning for shared libraries.
 # This could be conditional on
@@ -162,18 +166,35 @@ sources = \
 	${host_sources} \
 	${host_sources_extra}
 
-VPATH = $(top_srcdir)/src:$(top_srcdir)
+VPATH = $(top_srcdir)/src $(top_srcdir)
 
+if DJGPP
+libstdcxx_la_SOURCES = $(sources)
+else
 libstdc___la_SOURCES = $(sources)
-
+endif
+  
+if DJGPP
+libstdcxx_la_LIBADD = \
+	$(top_builddir)/libmath/libmath.la \
+	$(top_builddir)/libsupc++/libsupc++convenience.la
+else
 libstdc___la_LIBADD = \
 	$(top_builddir)/libmath/libmath.la \
 	$(top_builddir)/libsupc++/libsupc++convenience.la
+endif
 
+if DJGPP
+libstdcxx_la_DEPENDENCIES = ${version_dep} $(libstdcxx_la_LIBADD)
+  
+libstdcxx_la_LDFLAGS = \
+	-version-info $(libtool_VERSION) ${version_arg} -lm
+else
 libstdc___la_DEPENDENCIES = ${version_dep} $(libstdc___la_LIBADD)
 
 libstdc___la_LDFLAGS = \
 	-version-info $(libtool_VERSION) ${version_arg} -lm 
+endif
 
 # Use special rules for the deprecated source files so that they find
 # deprecated include files.
diff --git a/libstdc++-v3/src/Makefile.in b/libstdc++-v3/src/Makefile.in
index 5570846c..8fc121b3 100644
--- a/libstdc++-v3/src/Makefile.in
+++ b/libstdc++-v3/src/Makefile.in
@@ -59,6 +59,21 @@ am__strip_dir = `echo $$p | sed -e 's|^.*/||'`;
 am__installdirs = "$(DESTDIR)$(toolexeclibdir)"
 toolexeclibLTLIBRARIES_INSTALL = $(INSTALL)
 LTLIBRARIES = $(toolexeclib_LTLIBRARIES)
+am__libstdc___la_SOURCES_DIST = bitmap_allocator.cc pool_allocator.cc \
+	mt_allocator.cc codecvt.cc compatibility.cc complex_io.cc \
+	ctype.cc debug.cc debug_list.cc functexcept.cc \
+	globals_locale.cc globals_io.cc ios.cc ios_failure.cc \
+	ios_init.cc ios_locale.cc limits.cc list.cc locale.cc \
+	locale_init.cc locale_facets.cc localename.cc stdexcept.cc \
+	strstream.cc tree.cc allocator-inst.cc concept-inst.cc \
+	fstream-inst.cc ext-inst.cc ios-inst.cc iostream-inst.cc \
+	istream-inst.cc istream.cc locale-inst.cc locale-misc-inst.cc \
+	misc-inst.cc ostream-inst.cc sstream-inst.cc streambuf-inst.cc \
+	streambuf.cc string-inst.cc valarray-inst.cc wlocale-inst.cc \
+	wstring-inst.cc atomicity.cc codecvt_members.cc \
+	collate_members.cc ctype_members.cc messages_members.cc \
+	monetary_members.cc numeric_members.cc time_members.cc \
+	basic_file.cc c++locale.cc
 am__objects_1 = atomicity.lo codecvt_members.lo collate_members.lo \
 	ctype_members.lo messages_members.lo monetary_members.lo \
 	numeric_members.lo time_members.lo
@@ -75,20 +90,40 @@ am__objects_3 = bitmap_allocator.lo pool_allocator.lo mt_allocator.lo \
 	ostream-inst.lo sstream-inst.lo streambuf-inst.lo streambuf.lo \
 	string-inst.lo valarray-inst.lo wlocale-inst.lo \
 	wstring-inst.lo $(am__objects_1) $(am__objects_2)
-am_libstdc___la_OBJECTS = $(am__objects_3)
+@DJGPP_FALSE@am_libstdc___la_OBJECTS = $(am__objects_3)
 libstdc___la_OBJECTS = $(am_libstdc___la_OBJECTS)
+@DJGPP_FALSE@am_libstdc___la_rpath = -rpath $(toolexeclibdir)
+am__libstdcxx_la_SOURCES_DIST = bitmap_allocator.cc pool_allocator.cc \
+	mt_allocator.cc codecvt.cc compatibility.cc complex_io.cc \
+	ctype.cc debug.cc debug_list.cc functexcept.cc \
+	globals_locale.cc globals_io.cc ios.cc ios_failure.cc \
+	ios_init.cc ios_locale.cc limits.cc list.cc locale.cc \
+	locale_init.cc locale_facets.cc localename.cc stdexcept.cc \
+	strstream.cc tree.cc allocator-inst.cc concept-inst.cc \
+	fstream-inst.cc ext-inst.cc ios-inst.cc iostream-inst.cc \
+	istream-inst.cc istream.cc locale-inst.cc locale-misc-inst.cc \
+	misc-inst.cc ostream-inst.cc sstream-inst.cc streambuf-inst.cc \
+	streambuf.cc string-inst.cc valarray-inst.cc wlocale-inst.cc \
+	wstring-inst.cc atomicity.cc codecvt_members.cc \
+	collate_members.cc ctype_members.cc messages_members.cc \
+	monetary_members.cc numeric_members.cc time_members.cc \
+	basic_file.cc c++locale.cc
+@DJGPP_TRUE@am_libstdcxx_la_OBJECTS = $(am__objects_3)
+libstdcxx_la_OBJECTS = $(am_libstdcxx_la_OBJECTS)
+@DJGPP_TRUE@am_libstdcxx_la_rpath = -rpath $(toolexeclibdir)
 DEFAULT_INCLUDES = -I. -I$(srcdir) -I$(top_builddir)
 depcomp =
 am__depfiles_maybe =
 CXXCOMPILE = $(CXX) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) \
 	$(AM_CPPFLAGS) $(CPPFLAGS) $(AM_CXXFLAGS) $(CXXFLAGS)
 CXXLD = $(CXX)
-SOURCES = $(libstdc___la_SOURCES)
-DIST_SOURCES = $(libstdc___la_SOURCES)
+SOURCES = $(libstdc___la_SOURCES) $(libstdcxx_la_SOURCES)
+DIST_SOURCES = $(am__libstdc___la_SOURCES_DIST) \
+	$(am__libstdcxx_la_SOURCES_DIST)
 ETAGS = etags
 CTAGS = ctags
 DISTFILES = $(DIST_COMMON) $(DIST_SOURCES) $(TEXINFOS) $(EXTRA_DIST)
-VPATH = $(top_srcdir)/src:$(top_srcdir)
+VPATH = $(top_srcdir)/src $(top_srcdir)
 ABI_TWEAKS_SRCDIR = @ABI_TWEAKS_SRCDIR@
 ACLOCAL = @ACLOCAL@
 ALLOCATOR_H = @ALLOCATOR_H@
@@ -129,6 +164,8 @@ CYGPATH_W = @CYGPATH_W@
 C_INCLUDE_DIR = @C_INCLUDE_DIR@
 DEBUG_FLAGS = @DEBUG_FLAGS@
 DEFS = @DEFS@
+DJGPP_FALSE = @DJGPP_FALSE@
+DJGPP_TRUE = @DJGPP_TRUE@
 ECHO_C = @ECHO_C@
 ECHO_N = @ECHO_N@
 ECHO_T = @ECHO_T@
@@ -272,9 +309,10 @@ WARN_CXXFLAGS = \
 
 # -I/-D flags to pass when compiling.
 AM_CPPFLAGS = $(GLIBCXX_INCLUDES)
+@DJGPP_FALSE@toolexeclib_LTLIBRARIES = libstdc++.la
 
 # Cross compiler support.
-toolexeclib_LTLIBRARIES = libstdc++.la
+@DJGPP_TRUE@toolexeclib_LTLIBRARIES = libstdcxx.la
 @ENABLE_SYMVERS_DARWIN_EXPORT_FALSE@@ENABLE_SYMVERS_GNU_FALSE@version_arg = 
 @ENABLE_SYMVERS_DARWIN_EXPORT_TRUE@@ENABLE_SYMVERS_GNU_FALSE@version_arg = -Wl,-exported_symbols_list,libstdc++-symbol.explist
 @ENABLE_SYMVERS_GNU_TRUE@version_arg = -Wl,--version-script=libstdc++-symbol.ver
@@ -352,14 +390,23 @@ sources = \
 	${host_sources} \
 	${host_sources_extra}
 
-libstdc___la_SOURCES = $(sources)
-libstdc___la_LIBADD = \
-	$(top_builddir)/libmath/libmath.la \
-	$(top_builddir)/libsupc++/libsupc++convenience.la
+@DJGPP_TRUE@libstdcxx_la_SOURCES = $(sources)
+@DJGPP_FALSE@libstdc___la_SOURCES = $(sources)
+@DJGPP_TRUE@libstdcxx_la_LIBADD = \
+@DJGPP_TRUE@	$(top_builddir)/libmath/libmath.la \
+@DJGPP_TRUE@	$(top_builddir)/libsupc++/libsupc++convenience.la
 
-libstdc___la_DEPENDENCIES = ${version_dep} $(libstdc___la_LIBADD)
-libstdc___la_LDFLAGS = \
-	-version-info $(libtool_VERSION) ${version_arg} -lm 
+@DJGPP_FALSE@libstdc___la_LIBADD = \
+@DJGPP_FALSE@	$(top_builddir)/libmath/libmath.la \
+@DJGPP_FALSE@	$(top_builddir)/libsupc++/libsupc++convenience.la
+
+@DJGPP_TRUE@libstdcxx_la_DEPENDENCIES = ${version_dep} $(libstdcxx_la_LIBADD)
+@DJGPP_TRUE@libstdcxx_la_LDFLAGS = \
+@DJGPP_TRUE@	-version-info $(libtool_VERSION) ${version_arg} -lm
+
+@DJGPP_FALSE@libstdc___la_DEPENDENCIES = ${version_dep} $(libstdc___la_LIBADD)
+@DJGPP_FALSE@libstdc___la_LDFLAGS = \
+@DJGPP_FALSE@	-version-info $(libtool_VERSION) ${version_arg} -lm 
 
 
 # Use special rules for the deprecated source files so that they find
@@ -471,7 +518,9 @@ clean-toolexeclibLTLIBRARIES:
 	  rm -f "$${dir}/so_locations"; \
 	done
 libstdc++.la: $(libstdc___la_OBJECTS) $(libstdc___la_DEPENDENCIES) 
-	$(CXXLINK) -rpath $(toolexeclibdir) $(libstdc___la_LDFLAGS) $(libstdc___la_OBJECTS) $(libstdc___la_LIBADD) $(LIBS)
+	$(CXXLINK) $(am_libstdc___la_rpath) $(libstdc___la_LDFLAGS) $(libstdc___la_OBJECTS) $(libstdc___la_LIBADD) $(LIBS)
+libstdcxx.la: $(libstdcxx_la_OBJECTS) $(libstdcxx_la_DEPENDENCIES) 
+	$(CXXLINK) $(am_libstdcxx_la_rpath) $(libstdcxx_la_LDFLAGS) $(libstdcxx_la_OBJECTS) $(libstdcxx_la_LIBADD) $(LIBS)
 
 mostlyclean-compile:
 	-rm -f *.$(OBJEXT)
diff --git a/libstdc++-v3/testsuite/Makefile.in b/libstdc++-v3/testsuite/Makefile.in
index 0b25a5a8..16543216 100644
--- a/libstdc++-v3/testsuite/Makefile.in
+++ b/libstdc++-v3/testsuite/Makefile.in
@@ -99,6 +99,8 @@ CYGPATH_W = @CYGPATH_W@
 C_INCLUDE_DIR = @C_INCLUDE_DIR@
 DEBUG_FLAGS = @DEBUG_FLAGS@
 DEFS = @DEFS@
+DJGPP_FALSE = @DJGPP_FALSE@
+DJGPP_TRUE = @DJGPP_TRUE@
 ECHO_C = @ECHO_C@
 ECHO_N = @ECHO_N@
 ECHO_T = @ECHO_T@
diff --git a/readme.DJGPP b/readme.DJGPP
new file mode 100644
index 00000000..d7fd7e43
--- /dev/null
+++ b/readme.DJGPP
@@ -0,0 +1,332 @@
+This is the DJGPP port of gcc-4.1.2
+
+Please read this file up to end (maybe skipping sections You don't need,
+for example You don't need to read how to build gcc-4.1.2 from sources
+if You only intend to use binary archives). Also consult DJGPP documentation
+and FAQ where needed.
+
+
+Requirements to use this binary release:
+    DJGPP-@DJVER@. 
+    binutils-2.16 or above (Earlier versions will NOT work any more due to
+	incompatible linker scripts as linker script is no more included
+	with DJGPP port of GCC)
+
+#########################  NOTE  ##############################################
+
+This update of DJGPP port of DJGPP generates from C++ sources object files 
+that are not compatible with ones generated by any earlier releases of DJGPP
+ports of GCC before gcc-4.1.0
+
+So it's required to recompile all C++ sources after upgrade if You are 
+upgrading from version earlier than 4.1.0
+
+###############################################################################
+
+Requirements to build gcc-4.1.2 from sources:
+    Long filename support. I built it in DOS session under WinXP Pro (SP2).
+        Win95, Win98, WinME or Win2K should be Ok. I myself haven't tested
+	whether it can be build under Win98, Win2k or Win2K.
+    perhaps at least 128Mb of RAM for building (Amount of available
+        DPMI memory for DOS session should be set to auto).  
+    at least DJGPP-2.03 patchlevel 2 required
+    other GNU utilities (see below)
+
+
+Source archives
+===============
+
+
+Archive gcc412s2.zip contains script which modifies original gcc-4.1.2
+and sources for DJGPP. You don't need it unless You want to recreate
+GCC source archive for DJGPP. If You are using this archive and original 
+sources of gcc-4.1.2.tar.gz, then You don't need gcc412s.zip.
+    
+The source archive gcc412s.zip contains all the sources to build
+all compilers (C, C++, Objective C, Objective C++, GNU Fortran) and also C++
+and Fortran libraries (libstdcxx.a, libgpp.a and libg2c.a). 
+libg++ is no more supported.
+
+Most users don't need source archives at all.
+
+Binary archives
+================
+
+Binary archives are split into 5 parts:
+
+  gcc412b.zip  : The gcc.exe driver program and the C compiler.
+                 It also contains the documentation.
+
+  gpp412b.zip  : The C++ compiler and libstdcxx.a together 
+                 with needed header files. Please note that one must
+		 recompile all C++ sources built with any earlier GCC version
+
+  objc412b.zip : The Objective C and Objective C++ compilers and 
+		 libobjc.a and the needed header files.
+
+  gfor412b.zip  : GNU Fortran compiler
+
+  ada412b.zip  : Ada compiler (untested)
+
+
+The archive gcc412b.zip is required by all other binary packages
+
+Binary packages includes following documentation files:
+  
+  Archive gcc412b.zip:  
+	info/gcc.info - the use and the internals of the GNU compiler
+	info/cpp.info - documentation of the GNU C preprocessor.
+	info/cppinternals.info  - internals of the GNU C Preprocessor.
+        info/gccinstall.info
+	info/gccint.info
+		(NEW: use install-info to add it to info/dir)
+  Archive gpp412b.zip:
+        gnu/gcc-4.12/libstdcxx/* - some documentation of libstdc++-v3
+		(HTML and text formats)
+  Archive gfor412b.zip:
+	info/gfortran.info - documentation of the GNU Fortran compiler
+
+
+Before you install gcc-4.1.2 binaries
+======================================
+
+You should remove previous installation of gcc or egcs completely
+(unless You really know what You are doing).
+
+Make sure You don't have following files from earlier versions
+(relative paths againt to DJGPP directory are given):
+	bin/cc1.exe		(from gcc272b.zip or gcc2721b.zip)
+	bin/cc1plus.exe		(from gpp272b.zip or gpp2721b.zip)
+	lib/libgcc.a		(from gcc272b.zip or gcc2721b.zip)
+	lib/libobjc.a		
+	lib/specs		(from djdev201.zip or djdev202.zip) 
+	lib/libstdcxx.a		
+	lib/libgpp.a		
+
+Following packages are required for binaries:
+	binutils-2.16 or above. Linker script is no more included in DJGPP
+	    release of GCC and all earlier binutils releases for DJGPP
+	    had incompatible scripts. SO PLEASE UPGRADE.
+
+	DJGPP-@DJVER@ (djdev203.zip)
+
+
+Installing binaries of gcc-4.1.2
+=================================
+
+Needed archives for different programing languages
+	C 			: gcc412b.zip
+
+	C++			: gcc412b.zip, gpp412b.zip
+
+	Fortran	95              : gcc412b.zip, gfor412b.zip
+
+	Objective C		: gcc412b.zip, objc412b.zip
+
+	Ada			: gcc412b.zip, ada412b.zip
+
+Of course for ALL languages You also need at least binutils (bnu215b.zip
+or newer) and @DJDEV@.zip (or newer when it will be released)
+
+Unzip all the zip files from that directory, preserving the
+directory structure.  For example:
+
+	pkunzip -d @DJDEV@
+or
+	unzip386 @DJDEV@
+
+
+NOTE:   For debugging GDB version 6.3 or above is recommended. 
+        (gdb-6.3 is not released for DJGPP yet though).
+
+
+1. Only long filenames
+----------------------
+
+Unzip the binaries with an unzip program, which can restore the long filenames
+stored in the zip archive.
+
+2. Only short filenames
+-----------------------
+
+Unzip the binaries with an unzip program which doesn't know about long
+filenames, or if your unzipper knows about them, please follow first
+the steps described in the DJGPP FAQ in the section 
+about setting the NameNumericTail to 0 __BEFORE__!!! unzipping the archives.
+
+3. Long and short filenames at the same time
+--------------------------------------------
+
+Use an unzip program which can restore the long filenames and follow
+the instructions under 2. when the unzipper knows about long filenames.
+
+
+Note for users of C++ IO classes fstream, ifstream, ofstream
+============================================================
+
+There is a regression against earlier versions of GCC (gcc-2.95.3 and
+earlier): Member functions tellp(), tellg(), seekp() and seekg()
+are broken when stream is opened not in binary mode. If You are going
+to use any similar functions You should open stream in binary mode.
+
+Don't ask me when it will be fixed as I don't know that. I'm also 
+not sure I'll spend much time trying to fix that.
+
+
+Rebuilding gcc-4.1.2 from the sources
+======================================
+
+Requirememts
+------------
+
+-  Long filename support is required. It means You should build gcc-4.1.2
+   under Win95, Win98, WinME, Win2000 or WinXP. I myself built gcc-4.1.2
+   under WinXP.
+
+-  Much of free disk space (600Mb or more, perhaps not possible
+   at all on FAT16 partition). 
+
+-  perhaps 128Mb RAM (or more) to build gcc-4.1.2 under Win9X. 
+   DPMI memory amount for DOS session should be set to "Auto".
+   Building on machine with only 64 Mb of memory is not tested.
+   (I used machine with 1 Gb of memory, operatind system WinXP Pro SP2)
+
+-  Many GNU packages.
+	bash-2.0.4 or above
+	GNU Diffutils 2.8 
+	GNU Fileutils-4.1
+	GNU Find 4.1.7
+	GNU grep 2.5.1
+	GNU Awk 3.1.1
+	GNU Make 3.80
+	GNU Sed 4.0.7
+	GNU shell utils 2.0.11
+	GNU Textutils 2.0
+	GNU Texinfo 4.8
+	GNU tar 1.1.2
+	GNU binutils 2.16.1
+	GNU gmp 4.1.2 (required to build GNU Fortran compiler)
+	working GNU C compiler (perhaps not earlier than gcc-3.3). 
+
+   If You modify some source files You may also need
+	autoconf-2.59 or above
+	automake-1.9.4 or above
+	(for some directories also old autoconf-2.13 and automake-1.5
+        may be needed)
+	
+   You need autoconf and automake also if You are using gcc412s2.zip.
+   However it's normally not needed for most users who builds gcc-4.1.2 from
+   contents of gcc412s.zip. In that case You need to edit script unpack-gcc
+   to specify place where old and new versions of autoconf and automake are
+   installed
+
+   Usually newer versions of these packages should also work unless
+   otherwise stated above. Older versions may work in some cases, but that
+   is not tested
+
+-  INFO-ZIP binary (compiled with DJGPP v2!!!) is needed for using build.sh 
+   to create binary distrubution archives. There is no problems to compile 
+   it. See http://www.info-zip.org for additional informtion
+   about INFO-ZIP. You can find DJGPP compiled binary there. 
+
+-  Working DJGPP installation of course:
+	DJGPP-2.03 patchlevel 2 or above, 
+	working gcc installation (gcc-3.3.0 or above, You need
+                working Ada compiler to build Ada compiler)
+   NOTE: gcc-4.1.2 compiled using DJGPP-2.03 Patchelevel 2 must not be
+   used with DJGPP-2.04 and otherwise - gcc-4.1.2 compiled using 
+   for example recent DJGPP-2.04 CVS version can be used with DJGPP-2.04
+   Beta 1 but not with DJGPP-2.03 Patchlevel 2. This must be taken into
+   account when compiling gcc-4.1.2 for DJGPP from sources
+
+-  You should have sh.exe in DJGPP bin directory as symbolic link to  
+   bash.exe (type 'ln -s bash.exe sh.exe' in that directory)
+
+
+Extracting the sources
+----------------------
+
+At first you should unzip the archive gcc412s.zip. The sources are _NOT_
+the complete sources like the original gcc-4.1.2 distribution. I have
+removed many files to save disk space which are not needed for the DJGPP
+port. However I left configuration of other machines in to make archives
+usable to build cross-to-DJGPP compilers and DJGPP hosted cross-compilers
+(I haven't tested it).
+
+
+Compiling gcc
+-------------
+
+Directory gnu/gcc-4.12 contains all sources of gcc-4.1.2
+
+Sources are NOT configured. 
+	
+Change to directory gnu/build.gcc and configure sources
+by running script djconfig.sh. 
+
+	sh djconfig.sh
+
+When this is done You can build gcc-4.1.2 by running script djmake.sh
+Under Win9X You'll have to restart it some times when it will crash 
+due to Win9X DPMI descriptor leaks. You may use redir to get output in file.
+
+	sh djmake.sh bootstrap
+
+When this sucessfully ends run script djinsttmp.sh which installs
+all into directory gnu/install.gcc
+
+After that change to this directory and run script makepkg.sh
+to create binary distribution packages
+	
+
+Installing newly compiled gcc
+-----------------------------
+
+It's recommended to install binary packages which are generated 
+by makepkg.sh
+
+
+
+Available resources
+===================
+
+See following URL for additional information:
+gcc:		  http://gcc.gnu.org
+
+
+
+Reporting bugs
+==============
+
+If you found a bug in gcc-4.1.2 (gcc, gfortran, libstdc++, etc) please report it to 
+the GCC bug adresses and _NOT_ (or at least not only) in the DJGPP news group. 
+
+But if you think you found a bug in the DJGPP related things, then please 
+report it in comp.os.msdos.djgpp (the news group) or mail it to 
+djgpp@delorie.com, which is the gateway to the news group.
+
+Some possible situations:
+  - gcc says 'Internal compiler error' (or something similar)
+       more likely it is error of gcc if it is reproducible. It would 
+       be nice to test on some other system (e.g. Linux) and also with 
+       different version of compiler if possible and submit report to 
+       gcc bug address. 
+  - gcc crashes or freezes. 
+       In this situation it's hard to guess where is the problem. It may be
+       problem with gcc itself but it may be also DJGPP specific one.
+
+Please email me directly only in rare cases, if you think it is only of
+interest to me, since I'll see the reports in DJGPP mailing list.
+
+
+Thanks to
+=========
+
+To all who have contributed new features, test results, bugfixes to GCC
+(see http://gcc.gnu.org/thanks.html) and also who helped with DJGPP port of 
+gcc-4.1.2
+
+
+Have fun with gcc
+
+Andris Pavenis <andris.pavenis@iki.fi>

diff --git a/libio/libio.h b/libio/libio.h
index fbb4d7e..48fbac4 100644
--- a/libio/libio.h
+++ b/libio/libio.h
@@ -230,20 +231,29 @@ extern int __overflow _PARAMS((_IO_FILE*, int));
 
 extern unsigned __adjust_column _PARAMS((unsigned start, const char *line, int count));
 
-#define _IO_getc(_fp) \
+#define _IO_getc_unlocked(_fp) \
        ((_fp)->_IO_read_ptr >= (_fp)->_IO_read_end \
 	  && __underflow(_fp) == EOF ? EOF \
 	: *(unsigned char*)(_fp)->_IO_read_ptr++)
-#define _IO_peekc(_fp) \
+#define _IO_peekc_unlocked(_fp) \
        ((_fp)->_IO_read_ptr >= (_fp)->_IO_read_end \
 	  && __underflow(_fp) == EOF ? EOF \
 	: *(unsigned char*)(_fp)->_IO_read_ptr)
 
-#define _IO_putc(_ch, _fp) \
+#define _IO_putc_unlocked(_ch, _fp) \
    (((_fp)->_IO_write_ptr >= (_fp)->_IO_write_end) \
     ? __overflow(_fp, (unsigned char)_ch) \
     : (unsigned char)(*(_fp)->_IO_write_ptr++ = _ch))
 
+#define _IO_feof_unlocked(__fp) (((__fp)->_flags & _IO_EOF_SEEN) != 0)
+#define _IO_ferror_unlocked(__fp) (((__fp)->_flags & _IO_ERR_SEEN) != 0)
+
+extern int _IO_getc (_IO_FILE *__fp);
+extern int _IO_putc (int __c, _IO_FILE *__fp);
+extern int _IO_feof (_IO_FILE *__fp);
+extern int _IO_ferror (_IO_FILE *__fp);
+#define _IO_peekc(_fp) _IO_peekc_unlocked (_fp)
+
 extern int _IO_vfscanf _PARAMS((_IO_FILE*, const char*, _IO_va_list, int*));
 extern int _IO_vfprintf _PARAMS((_IO_FILE*, const char*, _IO_va_list));
 extern _IO_ssize_t _IO_padn _PARAMS((_IO_FILE *, int, _IO_ssize_t));
